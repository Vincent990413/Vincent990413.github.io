<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="format-detection" content="telephone=no"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><link rel="icon" href="/images/icons/favicon-16x16.png?v=2.6.2" type="image/png" sizes="16x16"><link rel="icon" href="/images/icons/favicon-32x32.png?v=2.6.2" type="image/png" sizes="32x32"><meta property="og:type" content="website">
<meta property="og:title" content="斯人若彩虹 遇上方知有">
<meta property="og:url" content="https://vincent990413.github.io/index.html">
<meta property="og:site_name" content="斯人若彩虹 遇上方知有">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="何水浪">
<meta name="twitter:card" content="summary"><title>斯人若彩虹 遇上方知有</title><link ref="canonical" href="https://vincent990413.github.io/index.html"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.12.1/css/all.min.css" type="text/css"><link rel="stylesheet" href="/css/index.css?v=2.6.2"><script>var Stun = window.Stun || {};
var CONFIG = {
  root: '/',
  algolia: undefined,
  assistSearch: undefined,
  fontIcon: {"prompt":{"success":"fas fa-check-circle","info":"fas fa-arrow-circle-right","warning":"fas fa-exclamation-circle","error":"fas fa-times-circle"},"copyBtn":"fas fa-copy"},
  sidebar: {"offsetTop":"20px","tocMaxDepth":6},
  header: {"enable":true,"showOnPost":true,"scrollDownIcon":false},
  postWidget: {"endText":true},
  nightMode: {"enable":true},
  back2top: {"enable":true},
  codeblock: {"style":"default","highlight":"light","wordWrap":false},
  reward: false,
  fancybox: false,
  zoomImage: {"gapAside":"20px"},
  galleryWaterfall: undefined,
  lazyload: false,
  pjax: undefined,
  externalLink: {"icon":{"enable":true,"name":"fas fa-external-link-alt"}},
  shortcuts: undefined,
  prompt: {"copyButton":"复制","copySuccess":"复制成功","copyError":"复制失败"},
  sourcePath: {"js":"js","css":"css","images":"images"},
};

window.CONFIG = CONFIG;</script><meta name="generator" content="Hexo 5.4.0"><link rel="alternate" href="/atom.xml" title="斯人若彩虹 遇上方知有" type="application/atom+xml">
</head><body><div class="container" id="container"><header class="header" id="header"><div class="header-inner"><nav class="header-nav header-nav--fixed"><div class="header-nav-inner"><div class="header-nav-menubtn"><i class="fas fa-bars"></i></div><div class="header-nav-menu"><div class="header-nav-menu-item"><a class="header-nav-menu-item__link" href="/"><span class="header-nav-menu-item__icon"><i class="fas fa-home"></i></span><span class="header-nav-menu-item__text">首页</span></a></div><div class="header-nav-menu-item"><a class="header-nav-menu-item__link" href="/archives/"><span class="header-nav-menu-item__icon"><i class="fas fa-folder-open"></i></span><span class="header-nav-menu-item__text">归档</span></a></div><div class="header-nav-menu-item"><a class="header-nav-menu-item__link" href="/categories/"><span class="header-nav-menu-item__icon"><i class="fas fa-layer-group"></i></span><span class="header-nav-menu-item__text">分类</span></a></div><div class="header-nav-menu-item"><a class="header-nav-menu-item__link" href="/tags/"><span class="header-nav-menu-item__icon"><i class="fas fa-tags"></i></span><span class="header-nav-menu-item__text">标签</span></a></div><div class="header-nav-menu-item"><a class="header-nav-menu-item__link" href="/friends/"><span class="header-nav-menu-item__icon"><i class="fas fa-link"></i></span><span class="header-nav-menu-item__text">友链</span></a></div></div><div class="header-nav-search"><span class="header-nav-search__icon"><i class="fas fa-search"></i></span><span class="header-nav-search__text">搜索</span></div><div class="header-nav-mode"><div class="mode"><div class="mode-track"><span class="mode-track-moon"></span><span class="mode-track-sun"></span></div><div class="mode-thumb"></div></div></div></div></nav><div class="header-banner"><div class="header-banner-info"><div class="header-banner-info__title">斯人若彩虹 遇上方知有</div><div class="header-banner-info__subtitle"></div></div></div></div></header><main class="main" id="main"><div class="main-inner"><div class="content-wrap" id="content-wrap"><div class="content content-home" id="content"><section class="postlist"><article class="postlist-item post"><header class="post-header"><h1 class="post-title"><a class="post-title__link" href="/2021/06/14/vue3-0%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">Vue3.0学习笔记</a></h1><div class="post-meta"><span class="post-meta-item post-meta-item--createtime"><span class="post-meta-item__icon"><i class="far fa-calendar-plus"></i></span><span class="post-meta-item__info">发表于</span><span class="post-meta-item__value">2021-06-14</span></span><span class="post-meta-item post-meta-item--updatetime"><span class="post-meta-item__icon"><i class="far fa-calendar-check"></i></span><span class="post-meta-item__info">更新于</span><span class="post-meta-item__value">2021-06-14</span></span><span class="post-meta-item post-meta-item--wordcount"><span class="post-meta-item__icon"><i class="far fa-file-word"></i></span><span class="post-meta-item__info">字数统计</span><span class="post-meta-item__value">1.4k</span></span><span class="post-meta-item post-meta-item--readtime"><span class="post-meta-item__icon"><i class="far fa-clock"></i></span><span class="post-meta-item__info">阅读时长</span><span class="post-meta-item__value">10分</span></span></div></header><div class="post-body"><div class="post-excerpt">
        <h1 id="Vue3-0-TypeScript-学习笔记"   >
          <a href="#Vue3-0-TypeScript-学习笔记" class="heading-link"><i class="fas fa-link"></i></a><a href="#Vue3-0-TypeScript-学习笔记" class="headerlink" title="Vue3.0+TypeScript 学习笔记"></a>Vue3.0+TypeScript 学习笔记</h1>
      
        <h1 id="Composition-API"   >
          <a href="#Composition-API" class="heading-link"><i class="fas fa-link"></i></a><a href="#Composition-API" class="headerlink" title="Composition API"></a>Composition API</h1>
      <ul>
<li>也称组合式API，是Vue3.x的新特性。通过创建Vue组件，我们可以将接口的可重复部分以及功能提取到可重用的代码段中。提高系统的可重用性。</li>
</ul>

        <h2 id="常用函数"   >
          <a href="#常用函数" class="heading-link"><i class="fas fa-link"></i></a><a href="#常用函数" class="headerlink" title="常用函数"></a>常用函数</h2>
      <ol>
<li>setup（所有CompAPI代码都写在这里）</li>
<li>ref（字符串等类型）</li>
<li>reactive（2、3用于定义响应式数据）（对象数据）</li>
<li>watchEffect</li>
<li>watch（监听数据）</li>
<li>computed（负责复杂数据渲染）</li>
<li>toRefs</li>
<li>生命周期的hooks</li>
</ol>

        <h1 id="创建Vue3-x项目"   >
          <a href="#创建Vue3-x项目" class="heading-link"><i class="fas fa-link"></i></a><a href="#创建Vue3-x项目" class="headerlink" title="创建Vue3.x项目"></a>创建Vue3.x项目</h1>
      <ul>
<li>请注意！<strong>以后的Vue3.x代码，最好使用TypeScript作为编程语言来编写。</strong><figure class="highlight cmd"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vue create vue3_typescript</span><br></pre></td></tr></table></div></figure>
<img   src="https://img-blog.csdnimg.cn/20210614142710905.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzQzNDQ1MDY3,size_16,color_FFFFFF,t_70" style="width: image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,tepx;height: t_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzQzNDQ1MDY3,size_16,color_FFFFFF,t_70px;"  alt="在这里插入图片描述"><br>选择<strong>手动选择</strong>：</li>
</ul>
<p><img   src="https://img-blog.csdnimg.cn/20210614142750743.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzQzNDQ1MDY3,size_16,color_FFFFFF,t_70" style="width: image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,tepx;height: t_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzQzNDQ1MDY3,size_16,color_FFFFFF,t_70px;"  alt="在这里插入图片描述"><br><strong>选择Vue3.0</strong><br><img src="https://img-blog.csdnimg.cn/202106141428131.png" alt="在这里插入图片描述"><br>进入项目：<br>项目结构图如下：</p>
<p><img src="https://img-blog.csdnimg.cn/20210614143202365.png" alt="在这里插入图片描述"></p>

        <h2 id="在setup中写自适应数据"   >
          <a href="#在setup中写自适应数据" class="heading-link"><i class="fas fa-link"></i></a><a href="#在setup中写自适应数据" class="headerlink" title="在setup中写自适应数据"></a>在setup中写自适应数据</h2>
      <figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">setup</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">	<span class="comment">//ref以及reactive 用于定义响应式数据</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<ul>
<li><p>ref 定义string、number、boolean以及数组等基本类型</p>
</li>
<li><p>而reactive一般用于定义对象等组合型数据</p>
</li>
</ul>
<p>声明响应式数据：</p>

        <h3 id="定义字符串等基本类型"   >
          <a href="#定义字符串等基本类型" class="heading-link"><i class="fas fa-link"></i></a><a href="#定义字符串等基本类型" class="headerlink" title="定义字符串等基本类型"></a>定义字符串等基本类型</h3>
      <figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ref 定义string、number、boolean以及数组等基本类型</span></span><br><span class="line">   <span class="keyword">var</span> title:any = ref(<span class="string">&quot;我是一个标题&quot;</span>);</span><br></pre></td></tr></table></div></figure>


        <h3 id="定义对象"   >
          <a href="#定义对象" class="heading-link"><i class="fas fa-link"></i></a><a href="#定义对象" class="headerlink" title="定义对象"></a>定义对象</h3>
      <figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">//而reactive一般用于定义对象等组合型数据</span></span><br><span class="line"><span class="keyword">var</span> userInfo:any = reactive(&#123;</span><br><span class="line">  <span class="attr">username</span>: <span class="string">&quot;vincent&quot;</span>,</span><br><span class="line">  <span class="attr">age</span>: <span class="number">20</span>,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></div></figure>


        <h3 id="我们需要将他们作为setup-函数的返回值！让前端页面能引用到。"   >
          <a href="#我们需要将他们作为setup-函数的返回值！让前端页面能引用到。" class="heading-link"><i class="fas fa-link"></i></a><a href="#我们需要将他们作为setup-函数的返回值！让前端页面能引用到。" class="headerlink" title="我们需要将他们作为setup()函数的返回值！让前端页面能引用到。"></a><strong>我们需要将他们作为setup()函数的返回值！让前端页面能引用到。</strong></h3>
      <p><strong>Vue3.0 + TypeScript 完整demo代码是：</strong></p>
<p>Home.vue</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;home&quot;</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">      &#123;&#123; userInfo &#125;&#125;</span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span>&gt;</span><span class="javascript"></span></span></span><br><span class="line"><span class="javascript"><span class="xml"><span class="keyword">import</span> &#123; defineComponent, reactive, ref &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span></span></span><br><span class="line"><span class="javascript"><span class="xml"></span></span></span><br><span class="line"><span class="javascript"><span class="xml"><span class="keyword">export</span> <span class="keyword">default</span> defineComponent(&#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">  <span class="attr">name</span>: <span class="string">&quot;Home&quot;</span>,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">  <span class="attr">components</span>: &#123;&#125;,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">  <span class="function"><span class="title">setup</span>(<span class="params"></span>)</span> &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="comment">//ref以及reactive 用于定义响应式数据</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml"></span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="comment">// ref 定义string、number、boolean以及数组等基本类型</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="keyword">var</span> title:any = ref(<span class="string">&quot;我是一个标题&quot;</span>);</span></span></span><br><span class="line"><span class="javascript"><span class="xml"></span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="comment">//而reactive一般用于定义对象等组合型数据</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="keyword">var</span> userInfo:any = reactive(&#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">      <span class="attr">username</span>: <span class="string">&quot;vincent&quot;</span>,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">      <span class="attr">age</span>: <span class="number">20</span>,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    &#125;);</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    </span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="keyword">let</span> getUserInfo = <span class="function"><span class="keyword">function</span> (<span class="params">userInfo: any</span>): <span class="title">any</span> </span>&#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">      <span class="keyword">return</span> userInfo;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    &#125;;</span></span></span><br><span class="line"><span class="javascript"><span class="xml"></span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="keyword">return</span> &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">      title,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">      userInfo,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">      getUserInfo,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    &#125;;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">  &#125;,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">&#125;);</span></span></span><br><span class="line"><span class="javascript"><span class="xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br></pre></td></tr></table></div></figure>


        <h3 id="定义方法（箭头函数）"   >
          <a href="#定义方法（箭头函数）" class="heading-link"><i class="fas fa-link"></i></a><a href="#定义方法（箭头函数）" class="headerlink" title="定义方法（箭头函数）"></a>定义方法（箭头函数）</h3>
      <p><strong># 当不知道要不要返回值的时候，可以使用箭头函数，该写参数写参数，该返回就返回。</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> getUserInfoArrow = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> userInfo;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></div></figure>

<p>我们在定义了<strong>ref</strong>数据后，如果想要在setup()函数中的任意一个地方更改这个ref数据，必须通过：<code>user.value</code>，才能获得值。</p>

        <h3 id="响应式数据的双向绑定"   >
          <a href="#响应式数据的双向绑定" class="heading-link"><i class="fas fa-link"></i></a><a href="#响应式数据的双向绑定" class="headerlink" title="响应式数据的双向绑定"></a>响应式数据的双向绑定</h3>
      <p><mark>注意，如果不用ref或者reactive响应式数据。</mark></p>
<p><strong>普通的数据，普通的对象，是不能完成双向绑定即应用于实时刷新的。</strong></p>
<p>比如：</p>
<p><strong>1. let num:number = 0;<br>2. let obj:any = { username: “Vincent”, age: 19}</strong></p>
<p>而响应式数据的双向绑定代码是：</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;input type=<span class="string">&quot;text&quot;</span> v-model=<span class="string">&quot;title&quot;</span> /&gt;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">setup</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> title = ref(<span class="string">&quot;这是H1的标题~&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      title,</span><br><span class="line">    &#125;;</span><br></pre></td></tr></table></div></figure>

<p><img   src="https://img-blog.csdnimg.cn/20210614145727258.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzQzNDQ1MDY3,size_16,color_FFFFFF,t_70" style="width: image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,tepx;height: t_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzQzNDQ1MDY3,size_16,color_FFFFFF,t_70px;"  alt="在这里插入图片描述"></p>

        <h3 id="…toRefs-obj-解构响应式对象"   >
          <a href="#…toRefs-obj-解构响应式对象" class="heading-link"><i class="fas fa-link"></i></a><a href="#…toRefs-obj-解构响应式对象" class="headerlink" title="…toRefs(obj) 解构响应式对象"></a>…toRefs(obj) 解构响应式对象</h3>
      <p>默认情况下，我们定义了<code>reactive对象</code>并且return之后。在前端页面，是不能直接引用的，比如：</p>
<p><img   src="https://img-blog.csdnimg.cn/20210614150602632.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzQzNDQ1MDY3,size_16,color_FFFFFF,t_70" style="width: image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,tepx;height: t_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzQzNDQ1MDY3,size_16,color_FFFFFF,t_70px;"  alt="在这里插入图片描述"></p>
<p><img   src="https://img-blog.csdnimg.cn/20210614150626541.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzQzNDQ1MDY3,size_16,color_FFFFFF,t_70" style="width: image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,tepx;height: t_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzQzNDQ1MDY3,size_16,color_FFFFFF,t_70px;"  alt="在这里插入图片描述"><br><strong>title was accessed but is not defined</strong> 提示，我们想要获取这个title，但是他认为我们并没有去定义这个title，说明我们不能直接用reactive对象里面的某个属性，而应该<strong>首先让某个属性 变成ref自适应数据</strong>，即：</p>
<p><strong>Reactive对象的数据  -&gt;  Ref 自适应数据  -&gt; 前端页面引用</strong></p>
<p>因此，我们需要在<code>return</code>中加入:</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">setup</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> news = reactive(&#123;</span><br><span class="line">      <span class="attr">title</span>: <span class="string">&quot;新闻标题&quot;</span>,</span><br><span class="line">      <span class="attr">content</span>: <span class="string">&quot;这是新闻内容！&quot;</span>,</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      ...toRefs(news),</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></div></figure>

<p>这样我们前端页面，可以使用：</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;&#123; title &#125;&#125;</span><br></pre></td></tr></table></div></figure>
<p>进行直接引用。</p>
<p><img src="https://img-blog.csdnimg.cn/20210614151007379.png" alt="在这里插入图片描述"></p>

        <h3 id="computed-属性"   >
          <a href="#computed-属性" class="heading-link"><i class="fas fa-link"></i></a><a href="#computed-属性" class="headerlink" title="computed 属性"></a>computed 属性</h3>
      <p>我们可以利用<code>computed</code>属性来自动检测某些数据。并根据这些数据，满足我们的需求来处理。<strong>（官方说，任何复杂逻辑处理的代码都写在computed中）</strong></p>
<ol>
<li>现在我们有一个输入框，我们<strong>输入自适应对象user的成绩score</strong> </li>
<li>然后，通过<strong>computed来实时检测成绩</strong>，大于或者等于60分就算及格，否则不及格，要求<strong>及时弹出信息。</strong></li>
</ol>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;home&quot;</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>获取用户信息<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;score&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">        &#123;&#123; isPassedInfo &#125;&#125;</span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span>&gt;</span><span class="javascript"></span></span></span><br><span class="line"><span class="javascript"><span class="xml"><span class="keyword">import</span> &#123; </span></span></span><br><span class="line"><span class="javascript"><span class="xml">defineComponent, </span></span></span><br><span class="line"><span class="javascript"><span class="xml">reactive, </span></span></span><br><span class="line"><span class="javascript"><span class="xml">ref, </span></span></span><br><span class="line"><span class="javascript"><span class="xml">toRefs, </span></span></span><br><span class="line"><span class="javascript"><span class="xml">computed &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span></span></span><br><span class="line"><span class="javascript"><span class="xml"></span></span></span><br><span class="line"><span class="javascript"><span class="xml"><span class="keyword">export</span> <span class="keyword">default</span> defineComponent(&#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">  <span class="attr">name</span>: <span class="string">&quot;Home&quot;</span>,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">  <span class="attr">components</span>: &#123;&#125;,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">  <span class="function"><span class="title">setup</span>(<span class="params"></span>)</span> &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="keyword">let</span> user = reactive(&#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">      <span class="attr">score</span>: <span class="number">0</span>,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    &#125;);</span></span></span><br><span class="line"><span class="javascript"><span class="xml"></span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="keyword">let</span> isPassedInfo = computed(<span class="function">() =&gt;</span> &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">      <span class="keyword">if</span> (user.score &gt;= <span class="number">60</span>) &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        <span class="keyword">return</span> <span class="string">&quot;及格！&quot;</span>;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">      &#125; <span class="keyword">else</span> &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        <span class="keyword">return</span> <span class="string">&quot;不及格！&quot;</span>;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">      &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    &#125;);</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="keyword">return</span> &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">      ...toRefs(user),</span></span></span><br><span class="line"><span class="javascript"><span class="xml">      isPassedInfo,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    &#125;;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">  &#125;,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">&#125;);</span></span></span><br><span class="line"><span class="javascript"><span class="xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></div></figure>
<p><img   src="https://img-blog.csdnimg.cn/20210614153609790.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzQzNDQ1MDY3,size_16,color_FFFFFF,t_70" style="width: image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,tepx;height: t_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzQzNDQ1MDY3,size_16,color_FFFFFF,t_70px;"  alt="在这里插入图片描述"></p>

        <h3 id="watch与watchEffect"   >
          <a href="#watch与watchEffect" class="heading-link"><i class="fas fa-link"></i></a><a href="#watch与watchEffect" class="headerlink" title="watch与watchEffect"></a>watch与watchEffect</h3>
      
        <h4 id="watchEffect-监听"   >
          <a href="#watchEffect-监听" class="heading-link"><i class="fas fa-link"></i></a><a href="#watchEffect-监听" class="headerlink" title="watchEffect 监听"></a>watchEffect 监听</h4>
      <ul>
<li>响应式地<strong>跟踪</strong>其依赖项时，立即运行一个箭头函数，并在更改依赖项时，重新运行它。（这个依赖项是什么，具体要看箭头函数中所涉及到的变量。）</li>
</ul>
<p><strong>比如我们现在用控制台，在实时监视某输入框中内容的变化。</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;home&quot;</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;num&quot;</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span>&gt;</span><span class="javascript"></span></span></span><br><span class="line"><span class="javascript"><span class="xml"><span class="keyword">import</span> &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">  defineComponent,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">  reactive,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">  ref,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">  toRefs,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">  watchEffect,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">&#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span></span></span><br><span class="line"><span class="javascript"><span class="xml"></span></span></span><br><span class="line"><span class="javascript"><span class="xml"><span class="keyword">export</span> <span class="keyword">default</span> defineComponent(&#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">  <span class="attr">name</span>: <span class="string">&quot;Home&quot;</span>,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">  <span class="attr">components</span>: &#123;&#125;,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">  <span class="function"><span class="title">setup</span>(<span class="params"></span>)</span> &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="keyword">let</span> data = reactive(&#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">      <span class="attr">num</span>: <span class="number">0</span>,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    &#125;);</span></span></span><br><span class="line"><span class="javascript"><span class="xml"></span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="comment">//看箭头函数体中 所出现的就是依赖项！</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">    watchEffect(<span class="function">() =&gt;</span> &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">      </span></span></span><br><span class="line"><span class="javascript"><span class="xml">      <span class="comment">//当data.num发生改变时 就会运行该方法</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">      <span class="built_in">console</span>.log(<span class="string">`num...为<span class="subst">$&#123;data.num&#125;</span>`</span>);</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    &#125;);</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="keyword">return</span> &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">      ...toRefs(data),</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    &#125;;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">  &#125;,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">&#125;);</span></span></span><br><span class="line"><span class="javascript"><span class="xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br></pre></td></tr></table></div></figure>

<p><img   src="https://img-blog.csdnimg.cn/20210614154735313.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzQzNDQ1MDY3,size_16,color_FFFFFF,t_70" style="width: image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,tepx;height: t_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzQzNDQ1MDY3,size_16,color_FFFFFF,t_70px;"  alt="在这里插入图片描述"></p>
<ul>
<li>可以看到的是，如果我们页面刷新几次，尽管<strong>依赖项</strong>没有发生改变，还是0，但仍然会执行这个方法。打印<code>num...为0</code>这句话多次。</li>
</ul>
</div></div></article><article class="postlist-item post"><header class="post-header"><h1 class="post-title"><a class="post-title__link" href="/2021/06/11/TypeScript%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">TypeScript学习笔记</a></h1><div class="post-meta"><span class="post-meta-item post-meta-item--createtime"><span class="post-meta-item__icon"><i class="far fa-calendar-plus"></i></span><span class="post-meta-item__info">发表于</span><span class="post-meta-item__value">2021-06-11</span></span><span class="post-meta-item post-meta-item--updatetime"><span class="post-meta-item__icon"><i class="far fa-calendar-check"></i></span><span class="post-meta-item__info">更新于</span><span class="post-meta-item__value">2021-06-14</span></span><span class="post-meta-item post-meta-item--wordcount"><span class="post-meta-item__icon"><i class="far fa-file-word"></i></span><span class="post-meta-item__info">字数统计</span><span class="post-meta-item__value">3.5k</span></span><span class="post-meta-item post-meta-item--readtime"><span class="post-meta-item__icon"><i class="far fa-clock"></i></span><span class="post-meta-item__info">阅读时长</span><span class="post-meta-item__value">27分</span></span></div></header><div class="post-body"><div class="post-excerpt">
        <h1 id="TypeScript"   >
          <a href="#TypeScript" class="heading-link"><i class="fas fa-link"></i></a><a href="#TypeScript" class="headerlink" title="TypeScript"></a>TypeScript</h1>
      <p>TypeScript是微软开发的一款开源编程语言。</p>

        <h2 id="TypeScript的安装"   >
          <a href="#TypeScript的安装" class="heading-link"><i class="fas fa-link"></i></a><a href="#TypeScript的安装" class="headerlink" title="TypeScript的安装"></a>TypeScript的安装</h2>
      <figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g typescript</span><br></pre></td></tr></table></div></figure>

<p>验证是否安装完毕：</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tsc -v</span><br></pre></td></tr></table></div></figure>


        <h2 id="TypeScript的编译过程"   >
          <a href="#TypeScript的编译过程" class="heading-link"><i class="fas fa-link"></i></a><a href="#TypeScript的编译过程" class="headerlink" title="TypeScript的编译过程"></a>TypeScript的编译过程</h2>
      <ol>
<li>编写TypeScript的.ts文件</li>
<li>通过TypeScript Compiler编译器</li>
<li><strong>转化成JavaScript文件</strong></li>
</ol>

        <h2 id="VS-Code-编译"   >
          <a href="#VS-Code-编译" class="heading-link"><i class="fas fa-link"></i></a><a href="#VS-Code-编译" class="headerlink" title="VS Code 编译"></a>VS Code 编译</h2>
      <ol>
<li><p>创建.ts文件 <strong>typeScriptDemo.ts</strong></p>
<figure class="highlight ts"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> message: <span class="built_in">string</span> = <span class="string">&quot;Hello World!&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(message);</span><br></pre></td></tr></table></div></figure></li>
<li><p>利用<code>tsc</code>编译这个.ts文件，因为浏览器不支持。</p>
<figure class="highlight cmd"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tsc typeScriptDemo.ts</span><br></pre></td></tr></table></div></figure></li>
<li><p>会发现，在相同目录下，会生成对应的.js文件。</p>
</li>
</ol>
<p><img   src="https://img-blog.csdnimg.cn/20210611123420827.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzQzNDQ1MDY3,size_16,color_FFFFFF,t_70" style="width: image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,tepx;height: t_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzQzNDQ1MDY3,size_16,color_FFFFFF,t_70px;"  alt="在这里插入图片描述"><br>4. 然后使用<code>node</code>命令来执行.js文件</p>
<figure class="highlight cmd"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">node typeScriptDemo.js</span><br></pre></td></tr></table></div></figure>

<ul>
<li>每次都要在控制台中敲<code>tsc</code>来手动编译，如何热部署呢？</li>
</ul>
<ol>
<li><p>在当前目录创建<code>tsconfig.json</code></p>
<figure class="highlight cmd"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tsc --init</span><br></pre></td></tr></table></div></figure></li>
<li><p>在<code>tsconfig.json</code>中更改生成js的目标位置<br><img   src="https://img-blog.csdnimg.cn/20210611124010933.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzQzNDQ1MDY3,size_16,color_FFFFFF,t_70" style="width: image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,tepx;height: t_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzQzNDQ1MDY3,size_16,color_FFFFFF,t_70px;"  alt="在这里插入图片描述"></p>
</li>
</ol>
<p><strong>可以看到，将对应的js文件输出到当前的js这个目录下：</strong></p>
<ul>
<li><p>现在创建一个新的.ts文件，然后点击VS Code菜单栏中的<code>Terminal</code></p>
</li>
<li><p>点击<code>Run Task</code></p>
</li>
<li><p>点击typescript 再点击<code>tsc:watch</code></p>
</li>
</ul>
<p><img   src="https://img-blog.csdnimg.cn/20210611124842228.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzQzNDQ1MDY3,size_16,color_FFFFFF,t_70" style="width: image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,tepx;height: t_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzQzNDQ1MDY3,size_16,color_FFFFFF,t_70px;"  alt="在这里插入图片描述"></p>
<p>现在我们可以直接保存之后用<code>node .\js\demo.js</code>就可以运行js文件了。</p>
<ul>
<li>现在，我们写一个<code>.html</code>网页文件，来引用这个热部署的js文件。<br><img   src="https://img-blog.csdnimg.cn/20210611133515938.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzQzNDQ1MDY3,size_16,color_FFFFFF,t_70" style="width: image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,tepx;height: t_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzQzNDQ1MDY3,size_16,color_FFFFFF,t_70px;"  alt="在这里插入图片描述"><br>现在运行ts文件并实时刷新，浏览器控制台即可得到结果。</li>
</ul>
<p><img   src="https://img-blog.csdnimg.cn/20210611125748176.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzQzNDQ1MDY3,size_16,color_FFFFFF,t_70" style="width: image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,tepx;height: t_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzQzNDQ1MDY3,size_16,color_FFFFFF,t_70px;"  alt="在这里插入图片描述"></p>

        <h2 id="TypeScript的数据类型"   >
          <a href="#TypeScript的数据类型" class="heading-link"><i class="fas fa-link"></i></a><a href="#TypeScript的数据类型" class="headerlink" title="TypeScript的数据类型"></a>TypeScript的数据类型</h2>
      
        <h3 id="boolean类型"   >
          <a href="#boolean类型" class="heading-link"><i class="fas fa-link"></i></a><a href="#boolean类型" class="headerlink" title="boolean类型"></a>boolean类型</h3>
      <p><strong>TypeScript是强类型规范</strong>的，要求我们定义变量的同时，必须指定类型。</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> flag:boolean = <span class="literal">true</span>;</span><br></pre></td></tr></table></div></figure>

<p>如果现在我们将flag赋值为字符串或者数值类型，会报错的。</p>

        <h3 id="number类型"   >
          <a href="#number类型" class="heading-link"><i class="fas fa-link"></i></a><a href="#number类型" class="headerlink" title="number类型"></a>number类型</h3>
      <figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> num:number = <span class="number">123</span>;</span><br></pre></td></tr></table></div></figure>

<p>注意，TypeScript没有对<strong>整型</strong>或者<strong>浮点型</strong>做一个区分。</p>
<p>同理，赋其他类型的值也会报错。</p>

        <h3 id="string类型"   >
          <a href="#string类型" class="heading-link"><i class="fas fa-link"></i></a><a href="#string类型" class="headerlink" title="string类型"></a>string类型</h3>
      <figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> str:number = <span class="string">&quot;Hello World!&quot;</span>;</span><br><span class="line"><span class="built_in">console</span>.log(str);</span><br></pre></td></tr></table></div></figure>


        <h3 id="array类型"   >
          <a href="#array类型" class="heading-link"><i class="fas fa-link"></i></a><a href="#array类型" class="headerlink" title="array类型"></a>array类型</h3>
      <p>数组类型，在TypeScript中，我们<strong>建议指定类型</strong>的数组。</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1. 第一种方式</span></span><br><span class="line"><span class="keyword">let</span> arr:number[] = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]; <span class="comment">//指定类型为number的数组</span></span><br><span class="line"><span class="built_in">console</span>.log(arr);</span><br><span class="line"></span><br><span class="line"><span class="comment">//2. 第二种方式 泛型的方式</span></span><br><span class="line"><span class="keyword">let</span> arr:<span class="built_in">Array</span>&lt;number&gt; = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br></pre></td></tr></table></div></figure>


        <h3 id="tuple元组"   >
          <a href="#tuple元组" class="heading-link"><i class="fas fa-link"></i></a><a href="#tuple元组" class="headerlink" title="tuple元组"></a>tuple元组</h3>
      <p>元组是数组的其中一种，我们可以<strong>指定多个不同类型的值</strong>。</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr:[string, number] = [<span class="string">&quot;张三&quot;</span>, <span class="number">98</span>];</span><br></pre></td></tr></table></div></figure>

        <h3 id="枚举类型"   >
          <a href="#枚举类型" class="heading-link"><i class="fas fa-link"></i></a><a href="#枚举类型" class="headerlink" title="枚举类型"></a>枚举类型</h3>
      <p>枚举类型是<strong>用来解释说明某些符号的意义</strong>。</p>
<p>比如：pay_status状态码。<br>0 代表未支付<br>1 代表支付成功<br>2 代表交易中</p>
<p><strong>如果不赋值的话，如果上一个赋值了，就是上个值+1，否则为其在元组中的索引。</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">enum Flag &#123;success=<span class="number">1</span>, error=-<span class="number">1</span>&#125;</span><br><span class="line"><span class="keyword">let</span> f:Flag = Flag.success;</span><br><span class="line"><span class="built_in">console</span>.log(f) <span class="comment">//结果是1</span></span><br></pre></td></tr></table></div></figure>

<p><strong>这样下次我们看到相应的数字 就知道对应的含义！</strong></p>

        <h3 id="any类型"   >
          <a href="#any类型" class="heading-link"><i class="fas fa-link"></i></a><a href="#any类型" class="headerlink" title="any类型"></a>any类型</h3>
      <p>any代表任意一个类型，不指定类型，<strong>我们可以多次更改不同类型的值（类型不同也可以）。</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> num:any = <span class="number">123</span>;<span class="comment">//执行这句后 当前num变量的类型是number</span></span><br><span class="line"></span><br><span class="line">num = <span class="literal">true</span>; <span class="comment">//指定这句后，当前num变量的类型是boolean</span></span><br></pre></td></tr></table></div></figure>
<p>那么，any类型是什么应用呢？</p>
<p>我们在js文件中<strong>定位DOM对象</strong>，由于ts中<strong>不存在对应的Object类型</strong></p>
<p>因此我们可以赋为any</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> head:any = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;h1&#x27;</span>);</span><br><span class="line">head.style.color = <span class="string">&quot;red&quot;</span>;</span><br></pre></td></tr></table></div></figure>


        <h3 id="null与undefined类型"   >
          <a href="#null与undefined类型" class="heading-link"><i class="fas fa-link"></i></a><a href="#null与undefined类型" class="headerlink" title="null与undefined类型"></a>null与undefined类型</h3>
      <p>在JS中我们知道，当我们对变量进行了<strong>定义但没有赋值，默认为undefined。</strong></p>
<p><strong>根据TypeScript的强类型引用，我们必须赋值</strong>（我们也可以赋值number或者undefined）。</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> val:<span class="literal">undefined</span>; <span class="comment">//我们可以直接输出 结果为undefined</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//如果要赋值 要赋值为number类型 如果直接输出 就是undefined</span></span><br><span class="line"><span class="keyword">let</span> val:number | <span class="literal">undefined</span>; </span><br></pre></td></tr></table></div></figure>

<p>当一个元素可能是多个类型的时候，我们可以在定义的时候，指定。</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> num:number|<span class="literal">null</span>|<span class="literal">undefined</span>;</span><br></pre></td></tr></table></div></figure>


        <h3 id="void类型"   >
          <a href="#void类型" class="heading-link"><i class="fas fa-link"></i></a><a href="#void类型" class="headerlink" title="void类型"></a>void类型</h3>
      <p>如果方法没有返回值，我们就这么写：</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params"></span>): <span class="title">void</span> </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;这个方法没有任何返回值！&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">test();</span><br></pre></td></tr></table></div></figure>

<p><strong>否则，该方法返回什么，就写什么类型。</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getSum</span>(<span class="params">x: number, y: number</span>): <span class="title">number</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> x + y;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(getSum(<span class="number">1</span>, <span class="number">2</span>));</span><br></pre></td></tr></table></div></figure>

        <h3 id="never类型"   >
          <a href="#never类型" class="heading-link"><i class="fas fa-link"></i></a><a href="#never类型" class="headerlink" title="never类型"></a>never类型</h3>
      <p>never类型就代表undefined或者null，或者从不会出现的值。</p>
<p>基本不会用到：</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> n: never;</span><br><span class="line">n = (<span class="function">() =&gt;</span> &#123; </span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&#x27;error!&#x27;</span>);</span><br><span class="line">&#125;)();</span><br><span class="line"></span><br></pre></td></tr></table></div></figure>



        <h2 id="TypeScript的函数"   >
          <a href="#TypeScript的函数" class="heading-link"><i class="fas fa-link"></i></a><a href="#TypeScript的函数" class="headerlink" title="TypeScript的函数"></a>TypeScript的函数</h2>
      <ol>
<li><p>函数声明法</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getStringType</span>(<span class="params"></span>): <span class="title">string</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;Hello, World!&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure></li>
<li><p>匿名函数法</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> fun = <span class="function"><span class="keyword">function</span> (<span class="params"></span>): <span class="title">number</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">100</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure></li>
<li><p>定义函数传参</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">introduce</span>(<span class="params">name: string</span>): <span class="title">string</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;Hello, My name is: &quot;</span> + name;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(introduce(<span class="string">&quot;Vincent&quot;</span>));</span><br></pre></td></tr></table></div></figure></li>
</ol>
<ul>
<li>另外，我们可以通过`而不是字符串的拼接来引用我们的变量。<strong>这种方法更常用！</strong><br><img   src="https://img-blog.csdnimg.cn/20210611141518142.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzQzNDQ1MDY3,size_16,color_FFFFFF,t_70" style="width: image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,tepx;height: t_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzQzNDQ1MDY3,size_16,color_FFFFFF,t_70px;"  alt="在这里插入图片描述"></li>
</ul>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">introduce</span>(<span class="params">name: string</span>): <span class="title">string</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">`Hello, My name is <span class="subst">$&#123;name&#125;</span>`</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(introduce(<span class="string">&quot;Vincent&quot;</span>));</span><br></pre></td></tr></table></div></figure>

        <h3 id="可选参数（放在非可选参数的后面）"   >
          <a href="#可选参数（放在非可选参数的后面）" class="heading-link"><i class="fas fa-link"></i></a><a href="#可选参数（放在非可选参数的后面）" class="headerlink" title="可选参数（放在非可选参数的后面）"></a>可选参数（放在非可选参数的后面）</h3>
      <p><strong>对于，实参与形参如果不一样，必须指定可选参数。</strong></p>
<p>也就是说，如果传某个可选参数，和如果不传分别都要做处理。</p>
<p>我们在对应的参数后面紧跟一个<strong>问号即可</strong>。</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">introduce</span>(<span class="params">name:string, age?:number</span>):<span class="title">string</span></span>&#123;</span><br><span class="line">    <span class="comment">//如果调用的时候 提供age参数</span></span><br><span class="line">    <span class="keyword">if</span>(age)&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">`Hello, my name is: <span class="subst">$&#123;name&#125;</span>, and my age is : <span class="subst">$&#123;age&#125;</span>!`</span>;</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">`Hello, my name is: <span class="subst">$&#123;name&#125;</span>!`</span>;</span><br><span class="line">    &#125;   </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(introduce(<span class="string">&#x27;Vincent&#x27;</span>))</span><br><span class="line"><span class="built_in">console</span>.log(introduce(<span class="string">&#x27;Vincent&#x27;</span>,<span class="number">20</span>))</span><br></pre></td></tr></table></div></figure>
<ul>
<li>注意，<strong>可选参数必须配置到所有参数的最后面！</strong></li>
<li>
        <h3 id="默认参数"   >
          <a href="#默认参数" class="heading-link"><i class="fas fa-link"></i></a><a href="#默认参数" class="headerlink" title="默认参数"></a>默认参数</h3>
      <figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">introduce</span>(<span class="params">name: string, age: number = <span class="number">18</span></span>): <span class="title">string</span> </span>&#123;</span><br><span class="line">    <span class="comment">//如果调用的时候 提供age参数</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">`Hello, my name is: <span class="subst">$&#123;name&#125;</span>, and my age is : <span class="subst">$&#123;age&#125;</span>!`</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(introduce(<span class="string">&#x27;Vincent&#x27;</span>)) <span class="comment">//这里我们age 会打印出18</span></span><br><span class="line"><span class="built_in">console</span>.log(introduce(<span class="string">&#x27;Vincent&#x27;</span>, <span class="number">20</span>))</span><br></pre></td></tr></table></div></figure></li>
</ul>

        <h3 id="三点运算符"   >
          <a href="#三点运算符" class="heading-link"><i class="fas fa-link"></i></a><a href="#三点运算符" class="headerlink" title="三点运算符"></a>三点运算符</h3>
      <ul>
<li>三点运算符，用于接收传过来的不确定的值。</li>
</ul>
<p>有些时候，我们传过来的参数可能是<strong>三个数</strong>也可能是<strong>四个数</strong>，我们利用三点运算符，可以将<strong>不确定个数的这些数全部装进一个相同类型的数组中</strong>。从而进行相应的处理！</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sum</span>(<span class="params">...result: number[]</span>): <span class="title">number</span> </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> sum = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; result.length; i++) &#123;</span><br><span class="line">        sum += result[i];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> sum;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(sum(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)) <span class="comment">//我们将1,2,3都装进result中</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(sum(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>)) <span class="comment">//我们将1,2,3,4都装进result中</span></span><br><span class="line"></span><br></pre></td></tr></table></div></figure>


        <h3 id="函数重载"   >
          <a href="#函数重载" class="heading-link"><i class="fas fa-link"></i></a><a href="#函数重载" class="headerlink" title="函数重载"></a>函数重载</h3>
      <p><strong>重载是指，两个或者以上个同名函数，但是他们的参数不一样（包括参数个数相同但类型不同，或者参数个数不同）。</strong></p>
<p>TypeScript中的重载，与ES5或者Java中的重载不太相同。</p>

        <h4 id="参数个数相同，只是类型不同时"   >
          <a href="#参数个数相同，只是类型不同时" class="heading-link"><i class="fas fa-link"></i></a><a href="#参数个数相同，只是类型不同时" class="headerlink" title="参数个数相同，只是类型不同时"></a>参数个数相同，只是类型不同时</h4>
      <ol>
<li><p>我们首先定义所有的情况（包括列出不同的参数情况）</p>
</li>
<li><p>实现一个方法，但是要写出根据不同参数来实现不同的情况。</p>
</li>
</ol>
<ul>
<li><strong>关键代码是 if( typeof param === “” )</strong></li>
</ul>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//声明第一种情况</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getInfo</span>(<span class="params">myName: string</span>): <span class="title">string</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//声明第二种情况</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getInfo</span>(<span class="params">myAge: number</span>): <span class="title">number</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//写函数 写出重载结果</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getInfo</span>(<span class="params">param: any</span>): <span class="title">any</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> param === <span class="string">&quot;string&quot;</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">`我的名字是：<span class="subst">$&#123;param&#125;</span>`</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">`我的年龄是：<span class="subst">$&#123;param&#125;</span>`</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(getInfo(<span class="string">&#x27;Vincent&#x27;</span>));</span><br><span class="line"><span class="built_in">console</span>.log(getInfo(<span class="number">22</span>));</span><br></pre></td></tr></table></div></figure>


        <h4 id="当参数个数不同时"   >
          <a href="#当参数个数不同时" class="heading-link"><i class="fas fa-link"></i></a><a href="#当参数个数不同时" class="headerlink" title="当参数个数不同时"></a>当参数个数不同时</h4>
      <p>同样，也是首先声明所有情况。然后涉及到可选参数！</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getInfo</span>(<span class="params">myName: string</span>): <span class="title">string</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getInfo</span>(<span class="params">myName: string, age: number</span>): <span class="title">string</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//因为参数个数不同 所以需要声明可选参数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getInfo</span>(<span class="params">param1: any, param2?: any</span>): <span class="title">any</span> </span>&#123;</span><br><span class="line">    <span class="comment">//如果提供了可选参数</span></span><br><span class="line">    <span class="keyword">if</span> (param2) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">`Hello, my name is <span class="subst">$&#123;param1&#125;</span>, and my age is <span class="subst">$&#123;param2&#125;</span>`</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">`Hello, my name is <span class="subst">$&#123;param1&#125;</span>`</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(getInfo(<span class="string">&#x27;Vincent&#x27;</span>));</span><br><span class="line"><span class="built_in">console</span>.log(getInfo(<span class="string">&#x27;Vincent&#x27;</span>, <span class="number">22</span>));</span><br></pre></td></tr></table></div></figure>


        <h3 id="箭头函数"   >
          <a href="#箭头函数" class="heading-link"><i class="fas fa-link"></i></a><a href="#箭头函数" class="headerlink" title="箭头函数"></a>箭头函数</h3>
      <ul>
<li><strong>注意，箭头函数里面的this不是外面的this。</strong></li>
</ul>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> num: number = <span class="number">10</span>;</span><br><span class="line"><span class="keyword">let</span> _this: any = <span class="built_in">this</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// alert(`$&#123;num&#125;`);</span></span><br><span class="line">    alert(_this.num) </span><br><span class="line">	<span class="comment">//这两种方法都能打印出setTimeout方法外的变量</span></span><br><span class="line">&#125;, <span class="number">1000</span>)</span><br></pre></td></tr></table></div></figure>



        <h2 id="TypeScript的类"   >
          <a href="#TypeScript的类" class="heading-link"><i class="fas fa-link"></i></a><a href="#TypeScript的类" class="headerlink" title="TypeScript的类"></a>TypeScript的类</h2>
      
        <h3 id="（回顾）ES5-中的类与对象"   >
          <a href="#（回顾）ES5-中的类与对象" class="heading-link"><i class="fas fa-link"></i></a><a href="#（回顾）ES5-中的类与对象" class="headerlink" title="（回顾）ES5 中的类与对象"></a>（回顾）ES5 中的类与对象</h3>
      <figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//es5 中的类与对象以及方法</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">this</span>.name = <span class="string">&quot;张三&quot;</span>;</span><br><span class="line">    <span class="built_in">this</span>.age = <span class="number">20</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//原型链创造属性+方法</span></span><br><span class="line">Person.prototype.info = <span class="string">&quot;信息&quot;</span>;</span><br><span class="line">Person.prototype.work = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;我是&quot;</span> + <span class="built_in">this</span>.name + <span class="string">&quot;,&quot;</span> + <span class="string">&quot;我在工作！&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//静态方法</span></span><br><span class="line">Person.getInfo = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>.name);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//创造对象</span></span><br><span class="line"><span class="keyword">let</span> obj = <span class="keyword">new</span> Person();</span><br><span class="line"><span class="built_in">console</span>.log(obj.name + <span class="string">&quot;:&quot;</span> + obj.age);</span><br><span class="line"></span><br><span class="line"><span class="comment">//静态方法</span></span><br><span class="line">Person.getInfo();</span><br></pre></td></tr></table></div></figure>


        <h3 id="TypeScript中"   >
          <a href="#TypeScript中" class="heading-link"><i class="fas fa-link"></i></a><a href="#TypeScript中" class="headerlink" title="TypeScript中"></a>TypeScript中</h3>
      
        <h4 id="类以及对象的实例化"   >
          <a href="#类以及对象的实例化" class="heading-link"><i class="fas fa-link"></i></a><a href="#类以及对象的实例化" class="headerlink" title="类以及对象的实例化"></a>类以及对象的实例化</h4>
      <figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="comment">//属性</span></span><br><span class="line">    <span class="attr">myName</span>: string; <span class="comment">//前面省略了public关键词</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//构造函数</span></span><br><span class="line">    <span class="function"><span class="title">constructor</span>(<span class="params">myName: string</span>)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.myName = myName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    setMyName(myName: string): <span class="keyword">void</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.myName = myName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="title">getMyName</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.myName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    getInfo(): <span class="keyword">void</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">`您好，我是<span class="subst">$&#123;<span class="built_in">this</span>.myName&#125;</span>`</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//实例化对象</span></span><br><span class="line"><span class="keyword">let</span> p = <span class="keyword">new</span> Person(<span class="string">&quot;张三&quot;</span>);</span><br><span class="line">p.getInfo();</span><br><span class="line">p.setMyName(<span class="string">&quot;李四&quot;</span>);</span><br><span class="line">p.getInfo();</span><br></pre></td></tr></table></div></figure>

        <h4 id="继承"   >
          <a href="#继承" class="heading-link"><i class="fas fa-link"></i></a><a href="#继承" class="headerlink" title="继承"></a>继承</h4>
      <figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span> <span class="keyword">extends</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="title">constructor</span>(<span class="params">name: string</span>)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(name); </span><br><span class="line">        <span class="comment">//调用父类的构造函数 从而继承父类的属性与方法</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> stu = <span class="keyword">new</span> Student(<span class="string">&quot;学生&quot;</span>);</span><br><span class="line">stu.getInfo();</span><br></pre></td></tr></table></div></figure>

<p><strong>注意，当子类中的方法名与其父类相同，那么会执行子类的方法。</strong></p>

        <h4 id="类里面的修饰符"   >
          <a href="#类里面的修饰符" class="heading-link"><i class="fas fa-link"></i></a><a href="#类里面的修饰符" class="headerlink" title="类里面的修饰符"></a>类里面的修饰符</h4>
      <ol>
<li><p>public 公有：表示任何地方都能访问<strong>（类里外、子类）</strong></p>
</li>
<li><p>private 私有：表示<strong>类里面可以访问，而子类与类外部无法访问。</strong></p>
</li>
<li><p>protected 保护：表示在<strong>类里面以及子类里面才能访问，类外无法访问。</strong></p>
</li>
</ol>
<ul>
<li>注意，如果属性不加修饰符，默认为公有public。</li>
</ul>

        <h4 id="静态属性与方法"   >
          <a href="#静态属性与方法" class="heading-link"><i class="fas fa-link"></i></a><a href="#静态属性与方法" class="headerlink" title="静态属性与方法"></a>静态属性与方法</h4>
      <ul>
<li>注意，静态方法中，是不能调用静态属性的。</li>
</ul>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="comment">//属性</span></span><br><span class="line">    <span class="attr">myName</span>: string; <span class="comment">//前面省略了public关键词</span></span><br><span class="line">    myAge: number;</span><br><span class="line">    <span class="keyword">static</span> mySex: string = <span class="string">&quot;男&quot;</span>; <span class="comment">//静态方法</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//构造函数</span></span><br><span class="line">    <span class="function"><span class="title">constructor</span>(<span class="params">myName: string, myAge: number</span>)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.myName = myName;</span><br><span class="line">        <span class="built_in">this</span>.myAge = myAge;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//静态方法</span></span><br><span class="line">    <span class="keyword">static</span> getInfo(): <span class="keyword">void</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">`<span class="subst">$&#123;Person.mySex&#125;</span>`</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Person.getInfo();</span><br></pre></td></tr></table></div></figure>


        <h4 id="多态"   >
          <a href="#多态" class="heading-link"><i class="fas fa-link"></i></a><a href="#多态" class="headerlink" title="多态"></a>多态</h4>
      <ul>
<li>多态指的是，<strong>父类声明一个方法但不实现，让子类来实现，并且每个子类都有不同的实现方法。</strong></li>
</ul>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="comment">//属性</span></span><br><span class="line">    <span class="attr">myName</span>: string;</span><br><span class="line">    <span class="function"><span class="title">constructor</span>(<span class="params">myName: string</span>)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.myName = myName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="title">work</span>(<span class="params"></span>)</span> &#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span> <span class="keyword">extends</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="title">constructor</span>(<span class="params">name: string</span>)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(name);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="title">work</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&quot;我去上学！&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> p = <span class="keyword">new</span> Person(<span class="string">&quot;张三&quot;</span>);</span><br><span class="line">p.work();</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> stu = <span class="keyword">new</span> Student(<span class="string">&quot;李四&quot;</span>);</span><br><span class="line">stu.work();</span><br></pre></td></tr></table></div></figure>


        <h4 id="抽象类"   >
          <a href="#抽象类" class="heading-link"><i class="fas fa-link"></i></a><a href="#抽象类" class="headerlink" title="抽象类"></a>抽象类</h4>
      <ul>
<li>抽象类以及抽象函数，一般用于定义标准。<strong>其子类必须包含这些含有abstract的函数。</strong></li>
</ul>
<p><strong>抽象类是不能直接实例化的。</strong></p>
<p>当然，抽象类可以具有构造函数以及非抽象函数的。<strong>但是对于那些抽象函数，其子类是必须要实现的。</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//定义一个抽象类以及一个抽象方法</span></span><br><span class="line">abstract <span class="class"><span class="keyword">class</span> <span class="title">Animal</span> </span>&#123;</span><br><span class="line">    abstract eat(): <span class="keyword">void</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dog</span> <span class="keyword">extends</span> <span class="title">Animal</span> </span>&#123;</span><br><span class="line">    eat(): <span class="keyword">void</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&quot;这是狗，实现eat方法。&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Cat</span> <span class="keyword">extends</span> <span class="title">Animal</span> </span>&#123;</span><br><span class="line">    eat(): <span class="keyword">void</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&quot;这是猫，实现eat方法。&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> dog= <span class="keyword">new</span> Dog();</span><br><span class="line"><span class="keyword">let</span> cat= <span class="keyword">new</span> Cat();</span><br><span class="line"></span><br><span class="line">dog.eat();</span><br><span class="line">cat.eat();</span><br></pre></td></tr></table></div></figure>


        <h4 id="接口"   >
          <a href="#接口" class="heading-link"><i class="fas fa-link"></i></a><a href="#接口" class="headerlink" title="接口"></a>接口</h4>
      <p><strong>函数型接口：</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">//定义一个接口 以及相应的规范</span></span><br><span class="line">interface encrypt &#123;</span><br><span class="line">    (key: string, <span class="attr">value</span>: string): string;</span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line"><span class="comment">//实现这个接口 必须要符合规范</span></span><br><span class="line"><span class="keyword">var</span> md5: encrypt = <span class="function"><span class="keyword">function</span> (<span class="params">key: string, value: string</span>): <span class="title">string</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> key + value;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//使用这个接口</span></span><br><span class="line"><span class="built_in">console</span>.log(md5(<span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27;zhangsan&#x27;</span>))</span><br></pre></td></tr></table></div></figure>


        <h3 id="TypeScript中的泛型"   >
          <a href="#TypeScript中的泛型" class="heading-link"><i class="fas fa-link"></i></a><a href="#TypeScript中的泛型" class="headerlink" title="TypeScript中的泛型"></a>TypeScript中的泛型</h3>
      <ul>
<li>泛型，即泛指的值，不具体固定的值，<strong>你传入什么类型，我就用什么类型来处理。</strong></li>
</ul>
<p>如果简单的话，可以使用<code>any</code>类型来处理。但是也存在一个隐患，就是<strong>any代表任意类型，它不强制类型。</strong> </p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getData</span>&lt;<span class="title">T</span>&gt;(<span class="params">value: T</span>): <span class="title">T</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> value;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(getData&lt;string&gt;(<span class="string">&#x27;Hello, World!&#x27;</span>))</span><br><span class="line"><span class="built_in">console</span>.log(getData&lt;number&gt;(<span class="number">100</span>));</span><br></pre></td></tr></table></div></figure>


        <h4 id="泛型类"   >
          <a href="#泛型类" class="heading-link"><i class="fas fa-link"></i></a><a href="#泛型类" class="headerlink" title="泛型类"></a>泛型类</h4>
      <figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ClassGetFirstItem</span>&lt;<span class="title">T</span>&gt;</span>&#123;</span><br><span class="line">    public list: T[] = [];</span><br><span class="line"></span><br><span class="line">    add(value: T): <span class="keyword">void</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.list.push(value);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    getFirstItem(): T &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.list[<span class="number">0</span>];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    getList(): string &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">`数组是<span class="subst">$&#123;<span class="built_in">this</span>.list&#125;</span>`</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> cla = <span class="keyword">new</span> ClassGetFirstItem&lt;number&gt;();</span><br><span class="line">cla.add(<span class="number">1</span>);</span><br><span class="line">cla.add(<span class="number">1</span>);</span><br><span class="line">cla.add(<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(cla.getList());</span><br><span class="line"><span class="built_in">console</span>.log(cla.getFirstItem());</span><br></pre></td></tr></table></div></figure>

<p>当然，我们也可以<code>let cla = new ClassGetFirstItem&lt;string&gt;();</code>从而声明类型为string类型。</p>

        <h3 id="TypeScript中的模块"   >
          <a href="#TypeScript中的模块" class="heading-link"><i class="fas fa-link"></i></a><a href="#TypeScript中的模块" class="headerlink" title="TypeScript中的模块"></a>TypeScript中的模块</h3>
      <p><img   src="https://img-blog.csdnimg.cn/20210612162829210.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzQzNDQ1MDY3,size_16,color_FFFFFF,t_70" style="width: image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,tepx;height: t_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzQzNDQ1MDY3,size_16,color_FFFFFF,t_70px;"  alt="在这里插入图片描述"></p>
<ul>
<li>也就是说，我们首先export导出某些变量、函数甚至类，然后在想用的地方去import这个模块，从而能够获取到想要的变量、函数甚至类。</li>
</ul>
<p><strong>由于浏览器不能直接获取Js文件中的export。我们用node来看看。</strong></p>
<ol>
<li><p>demo.ts中export导出数据</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">getDataInfo</span>(<span class="params"></span>): <span class="title">any</span>[] </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> [</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">username</span>: <span class="string">&quot;root&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">password</span>: <span class="string">&quot;123456&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">    ];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure></li>
<li><p>main.ts中import这个function以及数据</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; getDataInfo &#125; <span class="keyword">from</span> <span class="string">&#x27;./demo&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(getDataInfo());</span><br></pre></td></tr></table></div></figure></li>
<li><p>使用<code>node</code>来运行对应的main.js文件查看</p>
<figure class="highlight cmd"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> js </span><br><span class="line"></span><br><span class="line">node main.js</span><br></pre></td></tr></table></div></figure>
<p><img src="https://img-blog.csdnimg.cn/20210612163738401.png" alt="在这里插入图片描述"></p>
</li>
</ol>
<p>export default 指的是默认导出，只能有一个默认导出。</p>
<p>比如</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//文件末尾</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> getData;</span><br><span class="line"></span><br><span class="line"><span class="comment">//另一个想要引入getData的文件</span></span><br><span class="line"><span class="keyword">import</span> getData <span class="keyword">from</span> <span class="string">&#x27;.../&#x27;</span>;</span><br></pre></td></tr></table></div></figure>


        <h1 id="装饰器"   >
          <a href="#装饰器" class="heading-link"><i class="fas fa-link"></i></a><a href="#装饰器" class="headerlink" title="装饰器"></a>装饰器</h1>
      <ul>
<li>装饰器就是一个方法，可以<strong>为某个类动态注入。</strong></li>
</ul>

        <h2 id="类装饰器"   >
          <a href="#类装饰器" class="heading-link"><i class="fas fa-link"></i></a><a href="#类装饰器" class="headerlink" title="类装饰器"></a>类装饰器</h2>
      <p><strong>类装饰器应用于类的构造函数，可以用来监视，修改或者替换类的定义，传入一个参数。</strong></p>

        <h3 id="普通装饰器"   >
          <a href="#普通装饰器" class="heading-link"><i class="fas fa-link"></i></a><a href="#普通装饰器" class="headerlink" title="普通装饰器"></a>普通装饰器</h3>
      <p>不修改类的前提下，动态修改类的属性与方法：</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//装饰器</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">logClass</span>(<span class="params">params: any</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//params 就是当前类（我们就可以扩展这个类了）</span></span><br><span class="line">    <span class="built_in">console</span>.log(params);</span><br><span class="line"></span><br><span class="line">    params.prototype.apiUrl = <span class="string">&quot;xxx&quot;</span>;</span><br><span class="line">    params.prototype.run = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&#x27;我是run方法！&#x27;</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@logClass</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">HttpClient</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="title">constructor</span>(<span class="params"></span>)</span> &#123; &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> http: any = <span class="keyword">new</span> HttpClient();</span><br><span class="line"><span class="built_in">console</span>.log(http.apiUrl); <span class="comment">//打印动态扩展的属性</span></span><br></pre></td></tr></table></div></figure>


        <h3 id="装饰器工厂"   >
          <a href="#装饰器工厂" class="heading-link"><i class="fas fa-link"></i></a><a href="#装饰器工厂" class="headerlink" title="装饰器工厂"></a>装饰器工厂</h3>
      <ul>
<li>装饰器工厂，可以在使用某个装饰器的同时，传入参数进去。<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//装饰器</span></span><br><span class="line"><span class="comment">//工厂装饰器 可以接收传过来的参数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">logClass</span>(<span class="params">params: string</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params">target: any</span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&quot;target:&quot;</span> + target);</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&quot;params:&quot;</span> + params);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//这个地方 把string类型的hello变量赋给了params </span></span><br><span class="line"><span class="comment">//而target则代表当前的类</span></span><br><span class="line">@logClass(<span class="string">&#x27;hello&#x27;</span>)</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">HttpClient</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="title">constructor</span>(<span class="params"></span>)</span> &#123; &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//我们实例化的同时 就会执行装饰器中的return中的方法体</span></span><br><span class="line"><span class="keyword">let</span> http: any = <span class="keyword">new</span> HttpClient();</span><br></pre></td></tr></table></div></figure></li>
</ul>

        <h2 id="属性装饰器"   >
          <a href="#属性装饰器" class="heading-link"><i class="fas fa-link"></i></a><a href="#属性装饰器" class="headerlink" title="属性装饰器"></a>属性装饰器</h2>
      <figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">logProperty</span>(<span class="params">params: any</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params">target: any, attr: any</span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(attr);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//target相当于this 修改attr为传过来的参数</span></span><br><span class="line">        target[attr] = params;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">HttpClient</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    @logProperty(<span class="string">&quot;new Attr&quot;</span>)</span><br><span class="line">    public url: any | <span class="literal">undefined</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="title">constructor</span>(<span class="params"></span>)</span> &#123; &#125;</span><br><span class="line"></span><br><span class="line">    getData(): <span class="keyword">void</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="built_in">this</span>.url);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> http = <span class="keyword">new</span> HttpClient();</span><br><span class="line">http.getData();</span><br><span class="line"></span><br></pre></td></tr></table></div></figure>


        <h2 id="方法装饰器"   >
          <a href="#方法装饰器" class="heading-link"><i class="fas fa-link"></i></a><a href="#方法装饰器" class="headerlink" title="方法装饰器"></a>方法装饰器</h2>
      <figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">logMethod</span>(<span class="params">params: any</span>) </span>&#123;</span><br><span class="line">    <span class="comment">//target代表当前实例对象 methodName代表方法名</span></span><br><span class="line">    <span class="comment">//desc 代表方法的描述</span></span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params">target: any, methodName: any, desc: any</span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(target);</span><br><span class="line">        <span class="built_in">console</span>.log(methodName);</span><br><span class="line">        <span class="built_in">console</span>.log(desc);</span><br><span class="line">        target.getData = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">&#x27;修改！&#x27;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        target.getData();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">HttpClient</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="title">constructor</span>(<span class="params"></span>)</span> &#123; &#125;</span><br><span class="line"></span><br><span class="line">    @logMethod(<span class="string">&quot;www.baidu.com&quot;</span>) <span class="comment">//传入参数</span></span><br><span class="line">    getData(): <span class="keyword">void</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&#x27;getData&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> http = <span class="keyword">new</span> HttpClient();</span><br></pre></td></tr></table></div></figure></div></div></article><article class="postlist-item post"><header class="post-header"><h1 class="post-title"><a class="post-title__link" href="/2021/06/10/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E5%AD%A6%E4%B9%A0-%E6%8A%BD%E8%B1%A1%E5%B7%A5%E5%8E%82/">设计模式学习_抽象工厂</a></h1><div class="post-meta"><span class="post-meta-item post-meta-item--createtime"><span class="post-meta-item__icon"><i class="far fa-calendar-plus"></i></span><span class="post-meta-item__info">发表于</span><span class="post-meta-item__value">2021-06-10</span></span><span class="post-meta-item post-meta-item--updatetime"><span class="post-meta-item__icon"><i class="far fa-calendar-check"></i></span><span class="post-meta-item__info">更新于</span><span class="post-meta-item__value">2021-06-10</span></span><span class="post-meta-item post-meta-item--wordcount"><span class="post-meta-item__icon"><i class="far fa-file-word"></i></span><span class="post-meta-item__info">字数统计</span><span class="post-meta-item__value">740</span></span><span class="post-meta-item post-meta-item--readtime"><span class="post-meta-item__icon"><i class="far fa-clock"></i></span><span class="post-meta-item__info">阅读时长</span><span class="post-meta-item__value">5分</span></span></div></header><div class="post-body"><div class="post-excerpt">
        <h1 id="抽象工厂设计模式"   >
          <a href="#抽象工厂设计模式" class="heading-link"><i class="fas fa-link"></i></a><a href="#抽象工厂设计模式" class="headerlink" title="抽象工厂设计模式"></a>抽象工厂设计模式</h1>
      <iframe width="560" height="315" src="https://www.youtube.com/embed/v-GiuMmsXj4" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

<p><strong>抽象工厂模式是与工厂模式相联系的。</strong></p>
<p>前面提到，<strong>工厂模式提供了一种更好创造某个对象</strong>的方式，让子类来决定创造哪一个对象以及怎样创造这些对象。</p>
<p>而本章的<mark>抽象工厂设计模式</mark>是指，在工厂模式的基础上，提供的是：<strong>更好地创造多个对象</strong>。</p>

        <h2 id="业务场景"   >
          <a href="#业务场景" class="heading-link"><i class="fas fa-link"></i></a><a href="#业务场景" class="headerlink" title="业务场景"></a>业务场景</h2>
      <p>比如，现在我们要设计两套不同操作系统（Windows操作系统与MacOS操作系统）的UI组件，分别是：表单（Form）与按钮（Button），规则是：<strong>所有的UI组件都不能跨操作系统展示。</strong> 也就是说，当使用Windows操作系统时，使用的是WindowsForm与WindowsButton（MacOS同理）。</p>
<p>图解如下：<br><img   src="https://img-blog.csdnimg.cn/20210610183912847.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzQzNDQ1MDY3,size_16,color_FFFFFF,t_70" style="width: image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,tepx;height: t_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzQzNDQ1MDY3,size_16,color_FFFFFF,t_70px;"  alt="在这里插入图片描述"></p>
<p><mark>还是那个逻辑：工厂负责创造对象。</mark></p>
<p>也就是说，我们现在想要更好地创造<strong>Form与Button对象</strong>（<strong>条件是同处于同一个操作系统下</strong>）。</p>
<ul>
<li><strong>我们可以通过指定在对应的操作系统下，只<code>return</code>对应操作系统下的UI组件。</strong></li>
</ul>
<p>当然，依照不同的业务场景，如果<strong>你需要若干个对象捆绑在同一个工厂中</strong>，也可以通过这种方式。</p>
<p>下面，我们以代码的形式，来实现。</p>
<ul>
<li>项目结构图如下：<br><img   src="https://img-blog.csdnimg.cn/20210610184304276.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzQzNDQ1MDY3,size_16,color_FFFFFF,t_70" style="width: image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,tepx;height: t_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzQzNDQ1MDY3,size_16,color_FFFFFF,t_70px;"  alt="在这里插入图片描述"></li>
</ul>

        <h2 id="代码实现"   >
          <a href="#代码实现" class="heading-link"><i class="fas fa-link"></i></a><a href="#代码实现" class="headerlink" title="代码实现"></a>代码实现</h2>
      
        <h3 id="工厂"   >
          <a href="#工厂" class="heading-link"><i class="fas fa-link"></i></a><a href="#工厂" class="headerlink" title="工厂"></a>工厂</h3>
      
        <h4 id="抽象类-操作系统-OperatingSystem-java"   >
          <a href="#抽象类-操作系统-OperatingSystem-java" class="heading-link"><i class="fas fa-link"></i></a><a href="#抽象类-操作系统-OperatingSystem-java" class="headerlink" title="抽象类 操作系统 OperatingSystem.java"></a>抽象类 操作系统 OperatingSystem.java</h4>
      <figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">OperatingSystem</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> Form <span class="title">getForm</span><span class="params">()</span></span>;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> Button <span class="title">getButton</span><span class="params">()</span> </span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>


        <h4 id="WindowsFactory-java"   >
          <a href="#WindowsFactory-java" class="heading-link"><i class="fas fa-link"></i></a><a href="#WindowsFactory-java" class="headerlink" title="WindowsFactory.java"></a>WindowsFactory.java</h4>
      <figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WindowsFactory</span> <span class="keyword">extends</span> <span class="title">OperatingSystem</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Form <span class="title">getForm</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> WindowsForm();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Button <span class="title">getButton</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> WindowsButton();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>


        <h4 id="MacOSFactory-java"   >
          <a href="#MacOSFactory-java" class="heading-link"><i class="fas fa-link"></i></a><a href="#MacOSFactory-java" class="headerlink" title="MacOSFactory.java"></a>MacOSFactory.java</h4>
      <figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MacOSFactory</span> <span class="keyword">extends</span> <span class="title">OperatingSystem</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Form <span class="title">getForm</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> MacOSForm();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Button <span class="title">getButton</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> MacOSButton();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>


        <h3 id="产品"   >
          <a href="#产品" class="heading-link"><i class="fas fa-link"></i></a><a href="#产品" class="headerlink" title="产品"></a>产品</h3>
      
        <h4 id="接口-按钮-Button-java"   >
          <a href="#接口-按钮-Button-java" class="heading-link"><i class="fas fa-link"></i></a><a href="#接口-按钮-Button-java" class="headerlink" title="接口 按钮 Button.java"></a>接口 按钮 Button.java</h4>
      <figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Button</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">desc</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>


        <h4 id="接口-表单-Form-java"   >
          <a href="#接口-表单-Form-java" class="heading-link"><i class="fas fa-link"></i></a><a href="#接口-表单-Form-java" class="headerlink" title="接口 表单 Form.java"></a>接口 表单 Form.java</h4>
      <figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Form</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">desc</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>


        <h4 id="实现类-WindowsForm-java"   >
          <a href="#实现类-WindowsForm-java" class="heading-link"><i class="fas fa-link"></i></a><a href="#实现类-WindowsForm-java" class="headerlink" title="实现类 WindowsForm.java"></a>实现类 WindowsForm.java</h4>
      <figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WindowsForm</span> <span class="keyword">implements</span> <span class="title">Form</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">desc</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;当前正使用Windows操作系统下的表单Form！&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>


        <h4 id="实现类-WindowsButton-java"   >
          <a href="#实现类-WindowsButton-java" class="heading-link"><i class="fas fa-link"></i></a><a href="#实现类-WindowsButton-java" class="headerlink" title="实现类 WindowsButton.java"></a>实现类 WindowsButton.java</h4>
      <figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WindowsButton</span> <span class="keyword">implements</span> <span class="title">Button</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">desc</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;当前正使用Windows操作系统下的按钮Button！&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></div></figure>


        <h4 id="实现类-MacOSForm-java"   >
          <a href="#实现类-MacOSForm-java" class="heading-link"><i class="fas fa-link"></i></a><a href="#实现类-MacOSForm-java" class="headerlink" title="实现类 MacOSForm.java"></a>实现类 MacOSForm.java</h4>
      <figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MacOSForm</span> <span class="keyword">implements</span> <span class="title">Form</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">desc</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;当前正使用MacOS操作系统下的表单Form！&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>


        <h4 id="实现类-MacOSButton-java"   >
          <a href="#实现类-MacOSButton-java" class="heading-link"><i class="fas fa-link"></i></a><a href="#实现类-MacOSButton-java" class="headerlink" title="实现类 MacOSButton.java"></a>实现类 MacOSButton.java</h4>
      <figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MacOSButton</span> <span class="keyword">implements</span> <span class="title">Button</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">desc</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;当前正使用MacOS操作系统下的按钮Button！&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>


        <h3 id="主函数-AbstractFactoryPatternDemo-java"   >
          <a href="#主函数-AbstractFactoryPatternDemo-java" class="heading-link"><i class="fas fa-link"></i></a><a href="#主函数-AbstractFactoryPatternDemo-java" class="headerlink" title="主函数 AbstractFactoryPatternDemo.java"></a>主函数 AbstractFactoryPatternDemo.java</h3>
      <figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AbstractFactoryPatternDemo</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//以下是以Windows与MacOS为例 创造多个（Form与Button）存在依赖式的对象</span></span><br><span class="line">        WindowsFactory windowsFactory = <span class="keyword">new</span> WindowsFactory();</span><br><span class="line">        System.out.println(<span class="string">&quot;Windows下的一套UI组件信息为：&quot;</span>);</span><br><span class="line">        windowsFactory.getForm().desc();</span><br><span class="line">        windowsFactory.getButton().desc();</span><br><span class="line"></span><br><span class="line">        MacOSFactory macOSFactory = <span class="keyword">new</span> MacOSFactory();</span><br><span class="line">        System.out.println(<span class="string">&quot;MacOS下的一套UI组件信息为：&quot;</span>);</span><br><span class="line">        macOSFactory.getForm().desc();</span><br><span class="line">        macOSFactory.getButton().desc();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>


        <h3 id="效果图"   >
          <a href="#效果图" class="heading-link"><i class="fas fa-link"></i></a><a href="#效果图" class="headerlink" title="效果图"></a>效果图</h3>
      <p><img   src="https://img-blog.csdnimg.cn/20210610185134239.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzQzNDQ1MDY3,size_16,color_FFFFFF,t_70" style="width: image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,tepx;height: t_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzQzNDQ1MDY3,size_16,color_FFFFFF,t_70px;"  alt="在这里插入图片描述"></p>
<ul>
<li>当然，也可以像《工厂模式》那样，不细分多个操作系统，而是直接新建一个FormFactory以及ButtonFactory。然后，将Windows与MacOS作为参数传递进去，从而来判断return WindowsForm还是 return MacOSForm。</li>
</ul>
</div></div></article><article class="postlist-item post"><header class="post-header"><h1 class="post-title"><a class="post-title__link" href="/2021/06/04/VUE%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95%E5%8F%8A%E7%9B%B8%E5%BA%94%E5%BA%94%E7%94%A8-4/">VUE2.0学习笔记-基础语法及其应用-4-VUE小技巧</a></h1><div class="post-meta"><span class="post-meta-item post-meta-item--createtime"><span class="post-meta-item__icon"><i class="far fa-calendar-plus"></i></span><span class="post-meta-item__info">发表于</span><span class="post-meta-item__value">2021-06-04</span></span><span class="post-meta-item post-meta-item--updatetime"><span class="post-meta-item__icon"><i class="far fa-calendar-check"></i></span><span class="post-meta-item__info">更新于</span><span class="post-meta-item__value">2021-06-14</span></span><span class="post-meta-item post-meta-item--wordcount"><span class="post-meta-item__icon"><i class="far fa-file-word"></i></span><span class="post-meta-item__info">字数统计</span><span class="post-meta-item__value">7.3k</span></span><span class="post-meta-item post-meta-item--readtime"><span class="post-meta-item__icon"><i class="far fa-clock"></i></span><span class="post-meta-item__info">阅读时长</span><span class="post-meta-item__value">60分</span></span></div></header><div class="post-body"><div class="post-excerpt">
        <h1 id="Vue-table数据满足条件才显示按钮"   >
          <a href="#Vue-table数据满足条件才显示按钮" class="heading-link"><i class="fas fa-link"></i></a><a href="#Vue-table数据满足条件才显示按钮" class="headerlink" title="Vue table数据满足条件才显示按钮"></a>Vue table数据满足条件才显示按钮</h1>
      <ul>
<li>比如，当某一个数据项中的“状态”列为“已审核”时，才显示下架按钮！</li>
</ul>
<p>图解为：</p>
<p><img   src="https://img-blog.csdnimg.cn/2021060713351698.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzQzNDQ1MDY3,size_16,color_FFFFFF,t_70" style="width: image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,tepx;height: t_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzQzNDQ1MDY3,size_16,color_FFFFFF,t_70px;"  alt="在这里插入图片描述"></p>
<p>当然，首先需要查看<strong>每一行有哪些数据：</strong></p>
<p><img   src="https://img-blog.csdnimg.cn/20210607133849447.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzQzNDQ1MDY3,size_16,color_FFFFFF,t_70" style="width: image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,tepx;height: t_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzQzNDQ1MDY3,size_16,color_FFFFFF,t_70px;"  alt="在这里插入图片描述"></p>

        <h2 id="代码："   >
          <a href="#代码：" class="heading-link"><i class="fas fa-link"></i></a><a href="#代码：" class="headerlink" title="代码："></a>代码：</h2>
      <figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-table-column label=<span class="string">&quot;操作&quot;</span> width=<span class="string">&quot;150&quot;</span>&gt;</span><br><span class="line">  &lt;template slot-scope=<span class="string">&quot;scope&quot;</span>&gt;</span><br><span class="line">	&lt;el-button v-<span class="keyword">if</span>=<span class="string">&quot;(scope.row.checkflag === &#x27;已审核&#x27;)&quot;</span> type=<span class="string">&quot;success&quot;</span>&gt;</span><br><span class="line">	  下架&lt;/el-button</span><br><span class="line">	&gt;</span><br><span class="line">  &lt;/template&gt;</span><br><span class="line">&lt;/el-table-column&gt;</span><br></pre></td></tr></table></div></figure>

<p><strong># 注意若有多个Button，写在一个template中即可。</strong></p>

        <h1 id="Vue中ElementUI中el-table当某列元素prop为数组"   >
          <a href="#Vue中ElementUI中el-table当某列元素prop为数组" class="heading-link"><i class="fas fa-link"></i></a><a href="#Vue中ElementUI中el-table当某列元素prop为数组" class="headerlink" title="Vue中ElementUI中el-table当某列元素prop为数组"></a>Vue中ElementUI中el-table当某列元素prop为数组</h1>
      <ul>
<li>比如有个玩家el-table，我们每个玩家有<strong>多个擅长英雄</strong>而如果我们从后台传到前台的是一个List数据，我们就要想办法解析出多条数据prop。（如果直接赋值会显示Undefined）</li>
</ul>
<div class="table-container"><table>
<thead>
<tr>
<th>玩家名</th>
<th>擅长英雄</th>
</tr>
</thead>
<tbody><tr>
<td>张三</td>
<td>李元芳，后羿</td>
</tr>
<tr>
<td>李四</td>
<td>赵信，李白</td>
</tr>
</tbody></table></div>
<ul>
<li><p>控制台图解如下：<br><img   src="https://img-blog.csdnimg.cn/20210604202009240.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzQzNDQ1MDY3,size_16,color_FFFFFF,t_70" style="width: image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,tepx;height: t_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzQzNDQ1MDY3,size_16,color_FFFFFF,t_70px;"  alt="在这里插入图片描述"><br>也就是说，<code>el-table</code>中的某一列，仍然是一个<code>List数组</code>。</p>
</li>
<li><p>后台图解<br><img   src="https://img-blog.csdnimg.cn/20210604202850746.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzQzNDQ1MDY3,size_16,color_FFFFFF,t_70" style="width: image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,tepx;height: t_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzQzNDQ1MDY3,size_16,color_FFFFFF,t_70px;"  alt="在这里插入图片描述"></p>
</li>
<li><p><em>从上图中，我们可以看到，List中套了一个List。</em>*</p>
</li>
</ul>

        <h2 id="前端重要代码"   >
          <a href="#前端重要代码" class="heading-link"><i class="fas fa-link"></i></a><a href="#前端重要代码" class="headerlink" title="前端重要代码"></a>前端重要代码</h2>
      <p><strong>1. 展示所有的数据（不做任何处理）</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">takeMeeting</span>(<span class="params">row</span>)</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> meetingid = row.meetingid;</span><br><span class="line">  <span class="keyword">let</span> teacherId = <span class="built_in">this</span>.user.userId;</span><br><span class="line">  <span class="keyword">let</span> _this = <span class="built_in">this</span>;</span><br><span class="line">  takeMeeting(meetingid, teacherId)</span><br><span class="line">    .then(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">let</span> msgType = <span class="string">&quot;success&quot;</span>;</span><br><span class="line">      <span class="keyword">if</span> (res.data === <span class="number">2</span>) &#123;</span><br><span class="line">        msgType = <span class="string">&quot;warning&quot;</span>;</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (res.data == <span class="number">0</span>) &#123;</span><br><span class="line">        msgType = <span class="string">&quot;error&quot;</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      _this.$sendMessage(res.message, msgType);</span><br><span class="line">    &#125;)</span><br><span class="line">    .catch(<span class="function">(<span class="params">error</span>) =&gt;</span> &#123;&#125;);</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></div></figure>

<p><strong>2. 对具体含数组的prop做处理</strong></p>
<figure class="highlight html"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">el-table-column</span></span></span><br><span class="line"><span class="tag">  <span class="attr">:formatter</span>=<span class="string">&quot;takeMeetingListFormatter&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">prop</span>=<span class="string">&quot;takeMeetingList&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">label</span>=<span class="string">&quot;参加人员&quot;</span>&gt;</span></span><br><span class="line">  </span><br><span class="line"><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br></pre></td></tr></table></div></figure>

<ul>
<li>核心就是，给对应的<code>el-table-column</code>绑定:formatter</li>
</ul>
<p><strong>3. 对应的处理方法（放在methods中）</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">takeMeetingListFormatter</span>(<span class="params">row</span>)</span> &#123;</span><br><span class="line">      <span class="keyword">let</span> arr = []</span><br><span class="line">      row.takeMeetingList.forEach(<span class="function">(<span class="params">item, index</span>) =&gt;</span> &#123;</span><br><span class="line">        arr.push(item.teacherId)</span><br><span class="line">      &#125;);</span><br><span class="line">      <span class="comment">//将每个需要的（这里是teacherId）放入新数组中，并用逗号隔开。</span></span><br><span class="line">      <span class="keyword">return</span> arr.join(<span class="string">&#x27;,&#x27;</span>)</span><br><span class="line">    &#125;,</span><br></pre></td></tr></table></div></figure>


        <h2 id="效果图"   >
          <a href="#效果图" class="heading-link"><i class="fas fa-link"></i></a><a href="#效果图" class="headerlink" title="效果图"></a>效果图</h2>
      <p><img   src="https://img-blog.csdnimg.cn/2021060420431531.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzQzNDQ1MDY3,size_16,color_FFFFFF,t_70" style="width: image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,tepx;height: t_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzQzNDQ1MDY3,size_16,color_FFFFFF,t_70px;"  alt="在这里插入图片描述"></p>

        <h1 id="axios封装后的request-js请求-注意导入时的路径问题"   >
          <a href="#axios封装后的request-js请求-注意导入时的路径问题" class="heading-link"><i class="fas fa-link"></i></a><a href="#axios封装后的request-js请求-注意导入时的路径问题" class="headerlink" title="axios封装后的request.js请求. (注意导入时的路径问题)"></a>axios封装后的request.js请求. (注意导入时的路径问题)</h1>
      
        <h2 id="request-js"   >
          <a href="#request-js" class="heading-link"><i class="fas fa-link"></i></a><a href="#request-js" class="headerlink" title="request.js"></a>request.js</h2>
      <figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; Message, MessageBox &#125; <span class="keyword">from</span> <span class="string">&#x27;element-ui&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; getToken, setToken &#125; <span class="keyword">from</span> <span class="string">&#x27;../assets/js/utils&#x27;</span> <span class="comment">//从localstorage中</span></span><br><span class="line"><span class="keyword">const</span> debug = process.env.NODE_ENV !== <span class="string">&#x27;production&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// create an axios instance</span></span><br><span class="line"><span class="keyword">const</span> service = axios.create(&#123;</span><br><span class="line">  <span class="attr">baseURL</span>: <span class="string">&quot;http://192.168.1.106:8181&quot;</span>, <span class="comment">//请求的基础根路径</span></span><br><span class="line">  <span class="attr">withCredentials</span>: <span class="literal">false</span>,<span class="comment">//如果遇到网络问题 就置为false</span></span><br><span class="line">  <span class="attr">timeout</span>: <span class="number">10000</span> <span class="comment">// 请求超时10秒</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// request interceptor</span></span><br><span class="line">service.interceptors.request.use(</span><br><span class="line">  <span class="function"><span class="params">config</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">//如果token为空 说明第一次登录本系统 则不管</span></span><br><span class="line">    <span class="comment">//如果token不为空 则带着这个给header</span></span><br><span class="line">    <span class="keyword">if</span> (getToken() !== <span class="literal">null</span>) &#123;</span><br><span class="line">      config.headers[<span class="string">&#x27;token&#x27;</span>] = getToken()</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (debug) &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(config)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> config</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="params">error</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// Do something with request error</span></span><br><span class="line">    <span class="built_in">console</span>.log(error) <span class="comment">// for debug</span></span><br><span class="line">    <span class="built_in">Promise</span>.reject(error)</span><br><span class="line">  &#125;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">// response interceptor</span></span><br><span class="line">service.interceptors.response.use(</span><br><span class="line">  <span class="function"><span class="params">response</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> res = response.data</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//可能要配置相关的返回码200 404 500等等</span></span><br><span class="line">    <span class="keyword">if</span> (res.code === <span class="number">10010</span>) &#123; </span><br><span class="line">      MessageBox.confirm(res.message, <span class="string">&#x27;提示&#x27;</span>, &#123;</span><br><span class="line">        <span class="attr">confirmButtonText</span>: <span class="string">&#x27;确定&#x27;</span>,</span><br><span class="line">        <span class="attr">cancelButtonText</span>: <span class="string">&#x27;取消&#x27;</span>,</span><br><span class="line">        <span class="attr">type</span>: <span class="string">&#x27;warning&#x27;</span></span><br><span class="line">      &#125;).then(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">window</span>.location.href = <span class="string">&quot;/&quot;</span></span><br><span class="line">      &#125;).catch(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">window</span>.location.href = <span class="string">&quot;/&quot;</span></span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 请求成功</span></span><br><span class="line">    <span class="keyword">else</span>&#123;</span><br><span class="line">      <span class="keyword">return</span> response.data</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="params">error</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;err&#x27;</span> + error) <span class="comment">// for debug</span></span><br><span class="line">    Message(&#123;</span><br><span class="line">      <span class="attr">message</span>: error.message,</span><br><span class="line">      <span class="attr">type</span>: <span class="string">&#x27;error&#x27;</span>,</span><br><span class="line">      <span class="attr">duration</span>: <span class="number">5</span> * <span class="number">1000</span></span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(error)</span><br><span class="line">  &#125;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> service</span><br></pre></td></tr></table></div></figure>


        <h2 id="需要配置axios单个请求参数的文件群-user-js"   >
          <a href="#需要配置axios单个请求参数的文件群-user-js" class="heading-link"><i class="fas fa-link"></i></a><a href="#需要配置axios单个请求参数的文件群-user-js" class="headerlink" title="需要配置axios单个请求参数的文件群 user.js"></a>需要配置axios单个请求参数的文件群 user.js</h2>
      <figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">&quot;../plugins/request&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//Get方法</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">takeMeeting</span>(<span class="params">meetingid, teacherId</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> request(&#123;</span><br><span class="line">        <span class="attr">url</span>: <span class="string">&#x27;/takeMeeting&#x27;</span>,</span><br><span class="line">        <span class="attr">method</span>: <span class="string">&#x27;get&#x27;</span>,</span><br><span class="line">        <span class="attr">params</span>: &#123;</span><br><span class="line">            meetingid, teacherId</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//POST方法</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">updatePassword</span>(<span class="params">updateForm</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> request(&#123;</span><br><span class="line">        <span class="attr">url</span>: <span class="string">&#x27;/updatePassword&#x27;</span>,</span><br><span class="line">        <span class="attr">method</span>: <span class="string">&#x27;post&#x27;</span>,</span><br><span class="line">        <span class="attr">data</span>: updateForm</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>


        <h2 id="具体使用代码-注意路径问题"   >
          <a href="#具体使用代码-注意路径问题" class="heading-link"><i class="fas fa-link"></i></a><a href="#具体使用代码-注意路径问题" class="headerlink" title="具体使用代码(注意路径问题)"></a>具体使用代码(注意路径问题)</h2>
      <figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;updatePassword&#125; <span class="keyword">from</span> <span class="string">&#x27;../../api/user&#x27;</span></span><br><span class="line"></span><br><span class="line">updatePassword(<span class="built_in">this</span>.updateForm)</span><br><span class="line">.then( <span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">	</span><br><span class="line">&#125;).catch( <span class="function">(<span class="params">error</span>) =&gt;</span> &#123;</span><br><span class="line">	<span class="built_in">console</span>.log(error)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>


        <h1 id="axios请求-包括Get请求与Post请求（注意是异步）"   >
          <a href="#axios请求-包括Get请求与Post请求（注意是异步）" class="heading-link"><i class="fas fa-link"></i></a><a href="#axios请求-包括Get请求与Post请求（注意是异步）" class="headerlink" title="axios请求 包括Get请求与Post请求（注意是异步）"></a>axios请求 包括Get请求与Post请求（注意是异步）</h1>
      <p>因为该方法是异步，<strong>因此无法准确知道元素的执行顺序。</strong></p>
<p>有可能axios方法后面的方法会提前执行，也有可能会延后执行。</p>

        <h2 id="Get方法"   >
          <a href="#Get方法" class="heading-link"><i class="fas fa-link"></i></a><a href="#Get方法" class="headerlink" title="Get方法"></a>Get方法</h2>
      <figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> _this = <span class="built_in">this</span></span><br><span class="line"><span class="keyword">var</span> _data = <span class="built_in">this</span>.$data</span><br><span class="line">axios.get(main.requestAddress + <span class="string">&#x27;/book/showAllBooks&#x27;</span>, &#123;</span><br><span class="line">		<span class="attr">params</span>: &#123;<span class="string">&#x27;pn&#x27;</span>: _data.queryParams.currentPageNum&#125;</span><br><span class="line">	&#125;).then(<span class="function"><span class="keyword">function</span> (<span class="params">response</span>) </span>&#123;</span><br><span class="line">		<span class="comment">//从后端返回给前端的内容(code、message、data...等等)</span></span><br><span class="line">	&#125;).catch(<span class="function"><span class="keyword">function</span> (<span class="params">error</span>) </span>&#123;</span><br><span class="line">		</span><br><span class="line">	&#125;);</span><br></pre></td></tr></table></div></figure>

<p><strong>params:{ ‘data’: data}</strong> 是指以键值对的方式 往后台传输数据</p>
<p><strong>因此，后台需要用@RequestParam()标签</strong></p>
<p><strong>注意，在main.js中定义一个变量 var requestAddress=”192.xxx.xxx.xxx”</strong></p>
<p>同时<strong>导出这个main.js</strong></p>
<p>最后使用的时候<strong>记得 import main from ‘main.js的路径’</strong></p>

        <h3 id="请务必注意！"   >
          <a href="#请务必注意！" class="heading-link"><i class="fas fa-link"></i></a><a href="#请务必注意！" class="headerlink" title="请务必注意！"></a>请务必注意！</h3>
      <p><strong>使用axios请求时，如果需要用到在回调函数中用到该网页的内容。</strong></p>
<p><strong>必须在axios.get/post方法外 定义一个</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> _this = <span class="built_in">this</span></span><br></pre></td></tr></table></div></figure>

<p>注意外面的this与回调函数的this不一样！！！</p>

        <h2 id="Post方法"   >
          <a href="#Post方法" class="heading-link"><i class="fas fa-link"></i></a><a href="#Post方法" class="headerlink" title="Post方法"></a>Post方法</h2>
      <p>POST方法比较复杂，涉及到<strong>数据绑定</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-form :rules=<span class="string">&quot;loginFormRules&quot;</span> ref=<span class="string">&quot;loginForm&quot;</span> </span><br><span class="line">		:model=<span class="string">&quot;loginForm&quot;</span> label-position=<span class="string">&quot;right&quot;</span> </span><br><span class="line">		label-width=<span class="string">&quot;auto&quot;</span> show-message&gt;</span><br><span class="line">		</span><br><span class="line">	<span class="xml"><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;login-title&quot;</span>&gt;</span>欢迎登录<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line">	<span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;margin-top: 5px&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">		</span><br><span class="line">	<span class="xml"><span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;用户名&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;username&quot;</span>&gt;</span></span></span><br><span class="line"><span class="xml">		<span class="tag">&lt;<span class="name">el-col</span> <span class="attr">:span</span>=<span class="string">&quot;22&quot;</span>&gt;</span></span></span><br><span class="line"><span class="xml">			<span class="tag">&lt;<span class="name">el-input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;loginForm.username&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span></span><br><span class="line"><span class="xml">		<span class="tag">&lt;/<span class="name">el-col</span>&gt;</span></span></span><br><span class="line"><span class="xml">	<span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span></span><br><span class="line">	</span><br><span class="line">	<span class="xml"><span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;密码&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;password&quot;</span>&gt;</span></span></span><br><span class="line"><span class="xml">		<span class="tag">&lt;<span class="name">el-col</span> <span class="attr">:span</span>=<span class="string">&quot;22&quot;</span>&gt;</span></span></span><br><span class="line"><span class="xml">			<span class="tag">&lt;<span class="name">el-input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;loginForm.password&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span></span><br><span class="line"><span class="xml">		<span class="tag">&lt;/<span class="name">el-col</span>&gt;</span></span></span><br><span class="line"><span class="xml">	<span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span></span><br><span class="line">	</span><br><span class="line">	<span class="xml"><span class="tag">&lt;<span class="name">el-form-item</span>&gt;</span></span></span><br><span class="line"><span class="xml">		<span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;loginSubmit(&#x27;loginForm&#x27;)&quot;</span>&gt;</span>登录<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span></span><br><span class="line"><span class="xml">		<span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;dialogVisible=true&quot;</span>&gt;</span>注册<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span></span><br><span class="line"><span class="xml">	<span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span></span><br><span class="line">			</span><br><span class="line">&lt;/el-form&gt;</span><br><span class="line"></span><br></pre></td></tr></table></div></figure>

<p><strong>ref=”loginForm” 与 :model=”loginForm” 都是指绑定data中的loginForm</strong></p>
<p><strong>rules=”loginFormRules” 指的是绑定自定义规则</strong></p>
<p><strong>v-model=”loginForm.username”指的是 该值双向绑定loginForm里面的username属性</strong>因此，一定记得<strong>prop=loginForm.prop</strong></p>
<p>点击登录按钮时，<strong>loginForm</strong>作为参数传进去！</p>
<p><strong>1. loginForm里面的参数-&gt;对应的所有prop</strong></p>
<p>写在<strong>return</strong>里面即可：</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">loginForm: &#123;</span><br><span class="line">    <span class="attr">username</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    <span class="attr">password</span>: <span class="string">&#x27;&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p><strong>2. loginForm对应的规则，也写在return里面</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">loginFormRules: &#123;</span><br><span class="line">    <span class="attr">username</span>:[</span><br><span class="line">                &#123;<span class="attr">required</span>: <span class="literal">true</span>, <span class="attr">message</span>: <span class="string">&#x27;账号不可为空&#x27;</span>, <span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span>&#125;</span><br><span class="line">            ],</span><br><span class="line">    <span class="attr">password</span>: [</span><br><span class="line">                &#123;<span class="attr">required</span>: <span class="literal">true</span>, <span class="attr">message</span>: <span class="string">&#x27;密码不可为空&#x27;</span>, <span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span>&#125;</span><br><span class="line">            ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p><strong>require表示必须填，触发blur后，会提示message！</strong></p>
<p>这样，在JS中，可以将该表单<strong>loginForm</strong>与它对应的<strong>参数输入规则</strong>绑定在一起验证！</p>
<p>同时也可以自定义验证规则！<br><strong>在data(){这里} 中写</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> validateUserName = <span class="function">(<span class="params">rule, value, callback</span>) =&gt;</span> &#123;</span><br><span class="line">	<span class="keyword">if</span>(value === <span class="number">0</span>)&#123;</span><br><span class="line">		callback(<span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&#x27;这里是错误提示&#x27;</span>))	</span><br><span class="line">	&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">		callback() <span class="comment">//验证成功，通过自定义规则！</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>
<p>其中value是对应输入框的值！</p>
<p>callback用来回调</p>
<p><strong>提示对方错误信息</strong> </p>
<p>还是 </p>
<p><strong>让对方通过</strong></p>
<p>这样的话，可以在规则中，<strong>声明走自定义的规则方法：</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">loginFormRules: &#123;</span><br><span class="line">    <span class="attr">username</span>:[</span><br><span class="line">                &#123;<span class="attr">required</span>: <span class="literal">true</span>, <span class="attr">validator</span>: validateUserName,, trigger: <span class="string">&#x27;blur&#x27;</span>&#125;</span><br><span class="line">            ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p><strong>其他自定义规则 看官方文档</strong></p>
<p>具体登录+验证方法如下：</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">loginSubmit</span>(<span class="params">formName</span>)</span> &#123;</span><br><span class="line">	<span class="keyword">let</span> _this = <span class="built_in">this</span></span><br><span class="line">	<span class="comment">// 为表单绑定验证功能</span></span><br><span class="line">	<span class="built_in">this</span>.$refs[formName].validate(<span class="function">(<span class="params">valid</span>) =&gt;</span> &#123;</span><br><span class="line">		<span class="keyword">if</span> (valid) &#123;</span><br><span class="line">			<span class="comment">// 使用 vue-router 路由到指定页面，该方式称之为编程式导航</span></span><br><span class="line">			<span class="built_in">this</span>.$axios.post(main.requestAddress + <span class="string">`/user/login`</span>, _this.loginForm)</span><br><span class="line">				.then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">					_this.$data.message = res.data.message</span><br><span class="line">						<span class="comment">//若数据库查询失败 则返回重新登录信息</span></span><br><span class="line">						<span class="keyword">if</span> (res.data.data === <span class="literal">null</span>) &#123;</span><br><span class="line">							_this.openLoginFailMessage();</span><br><span class="line">							<span class="keyword">return</span>;</span><br><span class="line">						&#125;</span><br><span class="line">						sessionStorage.setItem(<span class="string">&quot;token&quot;</span>, <span class="literal">true</span>);</span><br><span class="line">						sessionStorage.setItem(<span class="string">&quot;username&quot;</span>, res.data.data.username);</span><br><span class="line">						_this.$router.push(<span class="string">&quot;/index&quot;</span>);<span class="comment">//路由跳转至 path=&gt; /index 具体看自己的路由配置</span></span><br><span class="line">					&#125;)</span><br><span class="line">					.catch(<span class="function"><span class="params">Error</span> =&gt;</span> &#123;</span><br><span class="line">						<span class="built_in">console</span>.log(<span class="built_in">Error</span>)</span><br><span class="line">					&#125;)</span><br><span class="line">			&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">				<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;);</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></div></figure>



        <h1 id="全局路由配置（基于session的前端权限）"   >
          <a href="#全局路由配置（基于session的前端权限）" class="heading-link"><i class="fas fa-link"></i></a><a href="#全局路由配置（基于session的前端权限）" class="headerlink" title="全局路由配置（基于session的前端权限）"></a>全局路由配置（基于session的前端权限）</h1>
      <p>1.首先搞清楚，除了登录、404..页面，其他的涉及到<strong>必须要先登录的业务数据页面</strong>都是要授权认证的！</p>
<p>2.授权认证，必须要经过<strong>成功登录</strong></p>
<p>3.每次页面进行跳转都要经过权限认证过程！</p>

        <h2 id="配置路由，除了登录页面，其他都要认证"   >
          <a href="#配置路由，除了登录页面，其他都要认证" class="heading-link"><i class="fas fa-link"></i></a><a href="#配置路由，除了登录页面，其他都要认证" class="headerlink" title="配置路由，除了登录页面，其他都要认证"></a>配置路由，除了登录页面，其他都要认证</h2>
      <p><strong>我们给相应涉及业务数据的页面，比如主页面index，加上需要拦截的头信息：</strong></p>
<p><strong>注意！登录页面是不需要加的！</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">	<span class="attr">meta</span>: &#123;</span><br><span class="line">		<span class="attr">requireAuth</span>: <span class="literal">true</span> <span class="comment">//如果来该页面 需要验证</span></span><br><span class="line">	&#125;,</span><br><span class="line">	<span class="attr">path</span>: <span class="string">&#x27;/index&#x27;</span>,</span><br><span class="line">	<span class="attr">name</span>: <span class="string">&#x27;业务逻辑&#x27;</span>,</span><br><span class="line">	<span class="attr">component</span>: <span class="function">()=&gt;</span><span class="keyword">import</span>(<span class="string">&#x27;../views/ShowAll&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p>然后，在页面拦截时，我们需要判断<strong>要去的页面是否需要授权？</strong></p>
<p><strong>也就是requireAuth是否是’true’？</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//添加全局路由拦截</span></span><br><span class="line">router.beforeEach(<span class="function">(<span class="params">to, <span class="keyword">from</span>, next</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (to.meta.requireAuth) &#123;</span><br><span class="line">        <span class="comment">//如果去的页面需要认证 那么就开始认证</span></span><br><span class="line">        <span class="keyword">if</span> (sessionStorage.getItem(<span class="string">&quot;token&quot;</span>) == <span class="string">&#x27;true&#x27;</span>) &#123;</span><br><span class="line">            next(); <span class="comment">//放行</span></span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            alert(<span class="string">&#x27;请您登陆...&#x27;</span>);</span><br><span class="line">            <span class="comment">//否则下一步也放行 但放行到登录页面</span></span><br><span class="line">            next(&#123;</span><br><span class="line">                <span class="attr">path</span>: <span class="string">&#x27;/login&#x27;</span></span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123; <span class="comment">//如果不需要授权 比如直接去登录页面</span></span><br><span class="line">        <span class="keyword">if</span> (sessionStorage.getItem(<span class="string">&quot;token&quot;</span>) == <span class="string">&#x27;true&#x27;</span> &amp;&amp; to.path != <span class="string">&#x27;/login&#x27;</span>) &#123;</span><br><span class="line">            next(<span class="string">&#x27;/index&#x27;</span>)</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            next()</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>

<ol>
<li><p>注意这里的<strong>sessionStorage.getItem(“token”)<strong>取出来的值是</strong>字符串类型</strong></p>
</li>
<li><p><strong>这里的 &amp;&amp; to.path!=’/login’ 是用户从index主界面 到login登录页面 而不想已经验证但还是跳到index页面的情况</strong> </p>
</li>
<li><p>如果不指定</p>
</li>
</ol>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">next(&#123;<span class="attr">path</span>: <span class="string">&#x27;/login&#x27;</span>&#125;) </span><br></pre></td></tr></table></div></figure>

<p>即<strong>指定去登录页面（前提是登录页面的path是’/login’）</strong>，</p>
<p>那么next()就代表<strong>允许去想要去的页面</strong></p>
<ol start="4">
<li>因为每次我们要看<strong>sessionStorage.getItem(“token”)<strong>里面值是不是’true’。因此，我们需要在登录成功的时候！添加对应的</strong>token</strong>信息</li>
</ol>

        <h2 id="登录成功添加可“允许通过”的路由信息（Token，Session，Cookies均可）"   >
          <a href="#登录成功添加可“允许通过”的路由信息（Token，Session，Cookies均可）" class="heading-link"><i class="fas fa-link"></i></a><a href="#登录成功添加可“允许通过”的路由信息（Token，Session，Cookies均可）" class="headerlink" title="登录成功添加可“允许通过”的路由信息（Token，Session，Cookies均可）"></a>登录成功添加可“允许通过”的路由信息（Token，Session，Cookies均可）</h2>
      <figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sessionStorage.setItem(<span class="string">&quot;token&quot;</span>, <span class="literal">true</span>);</span><br></pre></td></tr></table></div></figure>


        <h2 id="过滤路由显示菜单"   >
          <a href="#过滤路由显示菜单" class="heading-link"><i class="fas fa-link"></i></a><a href="#过滤路由显示菜单" class="headerlink" title="过滤路由显示菜单"></a>过滤路由显示菜单</h2>
      <p><strong>如果在菜单中不想让某些通用模块出现（比如登录、注册、注销等功能）</strong></p>
<p><strong>可以在对应路由信息中，添加属性: <code>hidden: true</code></strong></p>
<ul>
<li>在页面中的el-submenu 以及el-submenu-item中 去for循环遍历时，加一个v-if=”!item.hidden” </li>
</ul>
<p><mark> 注意，v-if 与 v-for 是不能同时出现在属性中 可以将v-for 提前一个标签！</mark></p>

        <h1 id="Vue-项目中加入常用插件"   >
          <a href="#Vue-项目中加入常用插件" class="heading-link"><i class="fas fa-link"></i></a><a href="#Vue-项目中加入常用插件" class="headerlink" title="Vue 项目中加入常用插件"></a>Vue 项目中加入常用插件</h1>
      
        <h2 id="加入插件"   >
          <a href="#加入插件" class="heading-link"><i class="fas fa-link"></i></a><a href="#加入插件" class="headerlink" title="加入插件"></a>加入插件</h2>
      <p><strong>通常，我们通过vue/cli来创建相应的vue项目</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vue create vue_demo</span><br></pre></td></tr></table></div></figure>

<ul>
<li>注意，如果不想要VUE严格的eslint语法规则。</li>
</ul>
<p><strong>可以在创建的时候，取消勾选Fomatter。</strong></p>
<p><strong>若需要VUEX全局状态管理，可以勾选。</strong></p>
<p><strong>若需要路由router，则可以选择勾选。</strong></p>
<p>…在经过漫长的cmd后</p>
<p>不用关闭当前<strong>git bash</strong>或者<strong>命令行控制工具Command</strong></p>
<p>我们首先进入这个项目，直接利用npm配置一些插件。</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cd vue_demo</span><br><span class="line">vue add vuetify <span class="comment">//下载vuetify移动自适应插件</span></span><br><span class="line">vue add element <span class="comment">//引入elementUI 并且在接下来选择时Fully import还是按需引入</span></span><br><span class="line">vue add axios <span class="comment">//将ajax封装好的axios</span></span><br></pre></td></tr></table></div></figure>

<p><strong>不出意外的话，在具体的项目目录中，可以看到多出一个文件夹plugins。</strong></p>
<p><strong>这里装着我们安装进去的插件。</strong></p>
<p>在配置之后，我们可以用VS code来打开这个文件夹，并且</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm run serve</span><br></pre></td></tr></table></div></figure>

<p>运行项目</p>

        <h1 id="VUE中添加Echarts可视化图表"   >
          <a href="#VUE中添加Echarts可视化图表" class="heading-link"><i class="fas fa-link"></i></a><a href="#VUE中添加Echarts可视化图表" class="headerlink" title="VUE中添加Echarts可视化图表"></a>VUE中添加Echarts可视化图表</h1>
      
        <h2 id="npm-安装echarts插件"   >
          <a href="#npm-安装echarts插件" class="heading-link"><i class="fas fa-link"></i></a><a href="#npm-安装echarts插件" class="headerlink" title="npm 安装echarts插件"></a>npm 安装echarts插件</h2>
      <figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install echarts --save</span><br></pre></td></tr></table></div></figure>

<p><strong>如果npm的安装速度较慢，可以使用cnpm淘宝镜像</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">//安装淘宝镜像</span></span><br><span class="line">npm install -g cnpm --registry=https:<span class="comment">//registry.npm.taobao.org</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//从淘宝镜像下载</span></span><br><span class="line">cnpm install echarts -S</span><br></pre></td></tr></table></div></figure>

<p><strong>当完成npm安装后，echarts插件出现在 node_modules 目录下</strong></p>

        <h2 id="全局引入ECHARTS"   >
          <a href="#全局引入ECHARTS" class="heading-link"><i class="fas fa-link"></i></a><a href="#全局引入ECHARTS" class="headerlink" title="全局引入ECHARTS"></a>全局引入ECHARTS</h2>
      <p><strong>main.js 文件</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 引入echarts</span></span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> echarts <span class="keyword">from</span> <span class="string">&#x27;echarts&#x27;</span></span><br><span class="line"></span><br><span class="line">Vue.prototype.$echarts = echarts</span><br></pre></td></tr></table></div></figure>


        <h2 id="初始化图表"   >
          <a href="#初始化图表" class="heading-link"><i class="fas fa-link"></i></a><a href="#初始化图表" class="headerlink" title="初始化图表"></a>初始化图表</h2>
      <figure class="highlight html"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span>  <span class="attr">ref</span>=<span class="string">&quot;chartCircle&quot;</span> <span class="attr">:style</span>=<span class="string">&quot;&#123;width: &#x27;300px&#x27;, height: &#x27;300px&#x27;&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></div></figure>

<ol>
<li><p>ref属性是为了<strong>JS代码中能引用这个图表</strong></p>
</li>
<li><p><code>&lt;div&gt;</code>属性之间默认隔行 如果想要多个图表在同一行中显示 添加属性：<code>style=&quot;display: inline-block&quot;</code></p>
</li>
<li><p>如果想要动态改变 图表的高度与宽度 <strong>可以利用VUE的动态绑定</strong></p>
</li>
</ol>

        <h2 id="JS画图动态渲染（柱状图与饼状图）"   >
          <a href="#JS画图动态渲染（柱状图与饼状图）" class="heading-link"><i class="fas fa-link"></i></a><a href="#JS画图动态渲染（柱状图与饼状图）" class="headerlink" title="JS画图动态渲染（柱状图与饼状图）"></a>JS画图动态渲染（柱状图与饼状图）</h2>
      
        <h3 id="饼状图"   >
          <a href="#饼状图" class="heading-link"><i class="fas fa-link"></i></a><a href="#饼状图" class="headerlink" title="饼状图"></a>饼状图</h3>
      <p><strong>将画图抽象成一个函数 <code>drawLine()</code> 这个函数放在mounted() 生命周期函数中</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">this</span>.drawLine();</span><br></pre></td></tr></table></div></figure>

<p><strong>图标参数JSON数据 （定义在data中的return{}）</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">optionCircle:&#123;</span><br><span class="line">                    <span class="attr">title</span>: &#123;</span><br><span class="line">                        <span class="attr">text</span>: <span class="string">&#x27;实时热门图书&#x27;</span>,</span><br><span class="line">                        <span class="attr">subtext</span>: <span class="string">&#x27;站点动态统计&#x27;</span>,</span><br><span class="line">                        <span class="attr">left</span>: <span class="string">&#x27;center&#x27;</span></span><br><span class="line">                    &#125;,</span><br><span class="line">                    <span class="attr">tooltip</span>: &#123;</span><br><span class="line">                        <span class="attr">trigger</span>: <span class="string">&#x27;item&#x27;</span></span><br><span class="line">                    &#125;,</span><br><span class="line">                    <span class="attr">legend</span>: &#123;</span><br><span class="line">                        <span class="attr">orient</span>: <span class="string">&#x27;vertical&#x27;</span>,</span><br><span class="line">                        <span class="attr">left</span>: <span class="string">&#x27;left&#x27;</span>,</span><br><span class="line">                    &#125;,</span><br><span class="line">                    <span class="attr">series</span>: [</span><br><span class="line">                        &#123;</span><br><span class="line">                            <span class="attr">name</span>: <span class="string">&#x27;访问来源&#x27;</span>,</span><br><span class="line">                            <span class="attr">type</span>: <span class="string">&#x27;pie&#x27;</span>,</span><br><span class="line">                            <span class="attr">radius</span>: <span class="string">&#x27;50%&#x27;</span>,</span><br><span class="line">                            <span class="attr">data</span>: [],</span><br><span class="line">                            <span class="attr">emphasis</span>: &#123;</span><br><span class="line">                                <span class="attr">itemStyle</span>: &#123;</span><br><span class="line">                                    <span class="attr">shadowBlur</span>: <span class="number">10</span>,</span><br><span class="line">                                    <span class="attr">shadowOffsetX</span>: <span class="number">0</span>,</span><br><span class="line">                                    <span class="attr">shadowColor</span>: <span class="string">&#x27;rgba(0, 0, 0, 0.5)&#x27;</span></span><br><span class="line">                                &#125;</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;</span><br><span class="line">                    ]</span><br><span class="line">                &#125;</span><br></pre></td></tr></table></div></figure>

<p><strong>正常情况下，是看不到任何数据的 但是能看到你的饼状图标题</strong></p>
<p><strong>接下来，我们要在data中从后台动态添加数据</strong></p>
<p><strong>这里我选择 AXIOS 异步刷新数据</strong></p>
<p><strong>JS drawLine() 函数</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">drawLine</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">	 <span class="comment">// 基于准备好的dom，初始化echarts实例</span></span><br><span class="line">	 <span class="comment">//通过ref来找到图表</span></span><br><span class="line">	<span class="keyword">let</span> myChartCircle = <span class="built_in">this</span>.$echarts.init(<span class="built_in">this</span>.$refs.chartCircle);</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//如果这里this.$refs.chartCircle 无效 则给div加一个id为chartCircle </span></span><br><span class="line">	<span class="comment">//然后将this.$refs.chartCircle替换成document.getElementById(&#x27;chartCircle&#x27;)即可</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//动态从数据库中取数据</span></span><br><span class="line">	<span class="comment">//画饼图</span></span><br><span class="line">	<span class="keyword">const</span> _this = <span class="built_in">this</span></span><br><span class="line">	axios.get(</span><br><span class="line">		main.requestAddress +</span><br><span class="line">		<span class="string">&#x27;/book/showPopularBooks&#x27;</span>).then(<span class="function"><span class="keyword">function</span> (<span class="params">response</span>) </span>&#123;</span><br><span class="line">		<span class="keyword">let</span> list = response.data.data</span><br><span class="line">		<span class="keyword">let</span> data = _this.$data.optionCircle.series[<span class="number">0</span>].data</span><br><span class="line"></span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">let</span> i =<span class="number">0</span>; i&lt;list.length; i++)&#123;</span><br><span class="line">			data.push(&#123;</span><br><span class="line">				<span class="attr">name</span>: list[i].bookname,</span><br><span class="line">				<span class="attr">value</span>: list[i].borrowNum</span><br><span class="line">			&#125;)</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">//这一句很重要 加载到页面中</span></span><br><span class="line">		myChartCircle.setOption(_this.$data.optionCircle);</span><br><span class="line">	&#125;).catch(<span class="function"><span class="keyword">function</span> (<span class="params">error</span>) </span>&#123;</span><br><span class="line">		alert(error);</span><br><span class="line">	&#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p><strong>可以看到，其实真正的饼状图数据是：</strong></p>
<p><strong>“name”代表饼图的名称 “value”代表对应name的饼图数据</strong></p>
<p><strong>值得注意的是，这种push方法是加入新的JSON对象的方法</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">data.push(&#123;</span><br><span class="line">	<span class="attr">key1</span>: value1(可以来自后台),</span><br><span class="line">	<span class="attr">key2</span>: value2(可以来自后台),</span><br><span class="line">	...</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></div></figure>


<p><strong>效果图如下：</strong></p>
<p><img   src="https://img-blog.csdnimg.cn/20210416123833199.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzQzNDQ1MDY3,size_16,color_FFFFFF,t_70" style="width: image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,tepx;height: t_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzQzNDQ1MDY3,size_16,color_FFFFFF,t_70px;"  alt="在这里插入图片描述"></p>

        <h3 id="柱状图"   >
          <a href="#柱状图" class="heading-link"><i class="fas fa-link"></i></a><a href="#柱状图" class="headerlink" title="柱状图"></a>柱状图</h3>
      <p><strong>与饼状图相似，先是配置图标参数，渲染图表，最后是取数据</strong></p>

        <h4 id="配置图表参数"   >
          <a href="#配置图表参数" class="heading-link"><i class="fas fa-link"></i></a><a href="#配置图表参数" class="headerlink" title="配置图表参数"></a>配置图表参数</h4>
      <figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">optionColumn:&#123;</span><br><span class="line">		<span class="attr">title</span>: &#123;</span><br><span class="line">			<span class="attr">text</span>: <span class="string">&#x27;实时借书用户&#x27;</span></span><br><span class="line">		&#125;,</span><br><span class="line">		<span class="attr">tooltip</span>: &#123;</span><br><span class="line">		&#125;,</span><br><span class="line">		<span class="attr">legend</span>: &#123;</span><br><span class="line">		&#125;,</span><br><span class="line">		<span class="attr">xAxis</span>: &#123;</span><br><span class="line">			<span class="attr">data</span>: []</span><br><span class="line">		&#125;,</span><br><span class="line">		<span class="attr">yAxis</span>: &#123;&#125;,</span><br><span class="line">		<span class="attr">series</span>: [&#123;</span><br><span class="line">			<span class="attr">name</span>: <span class="string">&#x27;借阅次数&#x27;</span>,</span><br><span class="line">			<span class="attr">type</span>: <span class="string">&#x27;bar&#x27;</span>,</span><br><span class="line">			<span class="attr">data</span>: []</span><br><span class="line">		&#125;]</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></div></figure>


        <h4 id="渲染图表"   >
          <a href="#渲染图表" class="heading-link"><i class="fas fa-link"></i></a><a href="#渲染图表" class="headerlink" title="渲染图表"></a>渲染图表</h4>
      <figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> myChartColumn = <span class="built_in">this</span>.$echarts.init(<span class="built_in">this</span>.$refs.chartColumn)</span><br><span class="line">	<span class="comment">//使用刚指定的配置项和数据显示图表。</span></span><br><span class="line">	<span class="comment">//画柱状图</span></span><br><span class="line">	axios.get(</span><br><span class="line">		main.requestAddress +</span><br><span class="line">		<span class="string">&#x27;/book/showPopularUsers&#x27;</span>).then(<span class="function"><span class="keyword">function</span> (<span class="params">response</span>) </span>&#123;</span><br><span class="line">		<span class="keyword">let</span> list = response.data.data</span><br><span class="line">		<span class="keyword">let</span> nameArray = _this.$data.optionColumn.xAxis.data</span><br><span class="line">		<span class="keyword">let</span> numArray = _this.$data.optionColumn.series[<span class="number">0</span>].data</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">let</span> i=<span class="number">0</span>; i&lt;list.length; i++)&#123;</span><br><span class="line">			nameArray.push(list[i].username);</span><br><span class="line">			numArray.push(list[i].totalBorrowNum);</span><br><span class="line">		&#125;</span><br><span class="line">		myChartColumn.setOption(_this.$data.optionColumn);</span><br><span class="line"></span><br><span class="line">	&#125;).catch(<span class="function"><span class="keyword">function</span> (<span class="params">error</span>) </span>&#123;</span><br><span class="line">		alert(error);</span><br><span class="line">	&#125;);</span><br></pre></td></tr></table></div></figure>

<p><strong>可以看到，对于柱状图，我们要配置两个</strong></p>
<ol>
<li><p>xAxis 即X轴的数组中的数据</p>
</li>
<li><p>series[0]中的data数组 代表从左往右依次的 棱柱所代表的value</p>
</li>
</ol>
<p><strong>效果图如下</strong></p>
<p><img   src="https://img-blog.csdnimg.cn/2021041612451596.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzQzNDQ1MDY3,size_16,color_FFFFFF,t_70" style="width: image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,tepx;height: t_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzQzNDQ1MDY3,size_16,color_FFFFFF,t_70px;"  alt="在这里插入图片描述"></p>

        <h1 id="VUEX-存值与取值区域"   >
          <a href="#VUEX-存值与取值区域" class="heading-link"><i class="fas fa-link"></i></a><a href="#VUEX-存值与取值区域" class="headerlink" title="VUEX 存值与取值区域"></a>VUEX 存值与取值区域</h1>
      <p><strong>在VUE中，如果有些数据我们不太需要后台频繁的查询数据</strong></p>
<p>我们就可以将这些数据<strong>存放在VUEX中</strong></p>

        <h2 id="声明store的index-js"   >
          <a href="#声明store的index-js" class="heading-link"><i class="fas fa-link"></i></a><a href="#声明store的index-js" class="headerlink" title="声明store的index.js"></a>声明store的index.js</h2>
      <figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> Vuex <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line"></span><br><span class="line">Vue.use(Vuex)</span><br><span class="line"></span><br><span class="line"><span class="comment">//导出之后 外部可以使用</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> Vuex.Store(&#123;</span><br><span class="line">	<span class="attr">state</span>:&#123;</span><br><span class="line">		<span class="comment">//放全局变量 比如viewCounter是浏览量统计器</span></span><br><span class="line">		viewCounter = <span class="number">1</span></span><br><span class="line">	&#125;,</span><br><span class="line">	<span class="attr">mutations</span>:&#123;</span><br><span class="line">		<span class="comment">//setter方法区域</span></span><br><span class="line">		<span class="function"><span class="title">setViewCounter</span>(<span class="params">state, viewCounter</span>)</span>&#123;</span><br><span class="line">			state.viewCounter = viewCounter </span><br><span class="line">		&#125;</span><br><span class="line">	&#125;,</span><br><span class="line">	<span class="attr">getters</span>:&#123;</span><br><span class="line">		<span class="comment">//getter方法区域</span></span><br><span class="line">		<span class="attr">getViewCounter</span>: <span class="function"><span class="params">state</span> =&gt;</span> state.viewCounter</span><br><span class="line">	&#125;,</span><br><span class="line">	<span class="attr">action</span>:&#123;&#125;,</span><br><span class="line">	<span class="attr">modules</span>:&#123;&#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></div></figure>



        <h2 id="在需要存值、取值的地方-调用方法"   >
          <a href="#在需要存值、取值的地方-调用方法" class="heading-link"><i class="fas fa-link"></i></a><a href="#在需要存值、取值的地方-调用方法" class="headerlink" title="在需要存值、取值的地方 调用方法"></a>在需要存值、取值的地方 调用方法</h2>
      
        <h3 id="取值getViewCounter"   >
          <a href="#取值getViewCounter" class="heading-link"><i class="fas fa-link"></i></a><a href="#取值getViewCounter" class="headerlink" title="取值getViewCounter"></a>取值getViewCounter</h3>
      <figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">this</span>.$store.getters.getViewCounter</span><br></pre></td></tr></table></div></figure>


        <h3 id="存值setViewCounter方法"   >
          <a href="#存值setViewCounter方法" class="heading-link"><i class="fas fa-link"></i></a><a href="#存值setViewCounter方法" class="headerlink" title="存值setViewCounter方法"></a>存值setViewCounter方法</h3>
      <figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">this</span>.$store.commit(<span class="string">&#x27;setViewCounter&#x27;</span>, newValue);</span><br></pre></td></tr></table></div></figure>


        <h1 id="WEB项目实现文件下载与上传"   >
          <a href="#WEB项目实现文件下载与上传" class="heading-link"><i class="fas fa-link"></i></a><a href="#WEB项目实现文件下载与上传" class="headerlink" title="WEB项目实现文件下载与上传"></a>WEB项目实现文件下载与上传</h1>
      
        <h2 id="SSM项目-非MultipartFile类"   >
          <a href="#SSM项目-非MultipartFile类" class="heading-link"><i class="fas fa-link"></i></a><a href="#SSM项目-非MultipartFile类" class="headerlink" title="SSM项目+非MultipartFile类"></a>SSM项目+非MultipartFile类</h2>
      <ul>
<li>在这种类型的项目中，我们需要在相应的Spring MVC.xml配置文件中，去配置一个Bean</li>
</ul>
<p>代码如下：</p>
<figure class="highlight xml"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;multipartResolver&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.web.multipart.commons.CommonsMultipartResolver&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;maxUploadSize&quot;</span> <span class="attr">value</span>=<span class="string">&quot;104857600&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;maxInMemorySize&quot;</span> <span class="attr">value</span>=<span class="string">&quot;4096&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;defaultEncoding&quot;</span> <span class="attr">value</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></div></figure>

<p>这种，我们就可以在Controller层中，使用@RequestParam(“file”) MultipartFile file了。</p>
<p>如果前端是Form表单的话，则前端代码如下：</p>
<figure class="highlight html"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">class</span>=<span class="string">&quot;form-horizontal &quot;</span> <span class="attr">action</span>=<span class="string">&quot;/UploadServlet&quot;</span> <span class="attr">id</span>=<span class="string">&quot;upload&quot;</span> <span class="attr">enctype</span>=<span class="string">&quot;multipart/form-data&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">input</span> <span class="attr">class</span>=<span class="string">&quot;form-control&quot;</span> <span class="attr">type</span>=<span class="string">&quot;file&quot;</span>&gt;</span></span><br><span class="line">	 <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-success btn-sm&quot;</span>&gt;</span>上传<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">	 <span class="tag">&lt;<span class="name">div</span>&gt;</span> $&#123; message &#125; <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></div></figure>

<p><strong>这样，当我们点击上传后，即会跳转到对应的action，我们用@PostMapping来接收即可。</strong></p>
<p>后台代码如下：</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">	<span class="comment">// 上传文件存储目录</span></span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String UPLOAD_DIRECTORY = <span class="string">&quot;upload&quot;</span>;</span><br><span class="line"></span><br><span class="line">   <span class="comment">// 上传配置</span></span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> MEMORY_THRESHOLD = <span class="number">1024</span> * <span class="number">1024</span> * <span class="number">3</span>;  <span class="comment">// 3MB</span></span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> MAX_FILE_SIZE = <span class="number">1024</span> * <span class="number">1024</span> * <span class="number">40</span>; <span class="comment">// 40MB</span></span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> MAX_REQUEST_SIZE = <span class="number">1024</span> * <span class="number">1024</span> * <span class="number">50</span>; <span class="comment">// 50MB</span></span><br><span class="line">   </span><br><span class="line"><span class="meta">@RequestMapping(value = &quot;/UploadServlet&quot;, method = RequestMethod.POST)</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> String <span class="title">upload</span><span class="params">(</span></span></span><br><span class="line"><span class="params"><span class="function">           ModelAndView modelAndView,</span></span></span><br><span class="line"><span class="params"><span class="function">           HttpServletRequest request,</span></span></span><br><span class="line"><span class="params"><span class="function">           HttpServletResponse response)</span> <span class="keyword">throws</span> IOException, ServletException </span>&#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">       <span class="comment">// 配置上传参数</span></span><br><span class="line">       DiskFileItemFactory factory = <span class="keyword">new</span> DiskFileItemFactory();</span><br><span class="line">       <span class="comment">// 设置内存临界值 - 超过后将产生临时文件并存储于临时目录中</span></span><br><span class="line">       factory.setSizeThreshold(MEMORY_THRESHOLD);</span><br><span class="line">       <span class="comment">// 设置临时存储目录</span></span><br><span class="line">       factory.setRepository(<span class="keyword">new</span> File(System.getProperty(<span class="string">&quot;java.io.tmpdir&quot;</span>)));</span><br><span class="line"></span><br><span class="line">       ServletFileUpload upload = <span class="keyword">new</span> ServletFileUpload(factory);</span><br><span class="line"></span><br><span class="line">       <span class="comment">// 设置最大文件上传值</span></span><br><span class="line">       upload.setFileSizeMax(MAX_FILE_SIZE);</span><br><span class="line"></span><br><span class="line">       <span class="comment">// 设置最大请求值 (包含文件和表单数据)</span></span><br><span class="line">       upload.setSizeMax(MAX_REQUEST_SIZE);</span><br><span class="line"></span><br><span class="line">       <span class="comment">// 中文处理</span></span><br><span class="line">       upload.setHeaderEncoding(<span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line"></span><br><span class="line">       <span class="comment">// 构造临时路径来存储上传的文件</span></span><br><span class="line">       <span class="comment">// 这个路径相对当前应用的目录</span></span><br><span class="line">       String uploadPath = request.getServletContext().getRealPath(<span class="string">&quot;./&quot;</span>) + File.separator + UPLOAD_DIRECTORY;</span><br><span class="line"></span><br><span class="line">       <span class="comment">// 如果目录不存在则创建</span></span><br><span class="line">       File uploadDir = <span class="keyword">new</span> File(uploadPath);</span><br><span class="line">       <span class="keyword">if</span> (!uploadDir.exists()) &#123;</span><br><span class="line">           uploadDir.mkdir();</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       <span class="keyword">try</span> &#123;</span><br><span class="line">           List&lt;FileItem&gt; formItems = upload.parseRequest(request);</span><br><span class="line">           <span class="keyword">if</span> (formItems != <span class="keyword">null</span> &amp;&amp; formItems.size() &gt; <span class="number">0</span>) &#123;</span><br><span class="line">               <span class="comment">// 迭代表单数据</span></span><br><span class="line">               <span class="keyword">for</span> (FileItem item : formItems) &#123;</span><br><span class="line">                   <span class="comment">// 处理不在表单中的字段</span></span><br><span class="line">                   <span class="keyword">if</span> (!item.isFormField()) &#123;</span><br><span class="line">                       String fileName = <span class="keyword">new</span> File(item.getName()).getName();</span><br><span class="line">                       String filePath = uploadPath + File.separator + fileName;</span><br><span class="line">                       File storeFile = <span class="keyword">new</span> File(filePath);</span><br><span class="line"></span><br><span class="line">                       <span class="comment">// 在控制台输出文件的上传路径</span></span><br><span class="line">                       String filePathSaved = uploadPath + File.separator;</span><br><span class="line"></span><br><span class="line">                       <span class="comment">// 保存文件到硬盘</span></span><br><span class="line">                       item.write(storeFile);</span><br><span class="line">                       teacherServer.saveFilePath(filePathSaved, fileName);</span><br><span class="line">                       request.setAttribute(<span class="string">&quot;message&quot;</span>, formItems.get(<span class="number">0</span>).getName() + <span class="string">&quot;文件上传成功!&quot;</span>);</span><br><span class="line">                   &#125;</span><br><span class="line">               &#125;</span><br><span class="line">           &#125;</span><br><span class="line">       &#125; <span class="keyword">catch</span> (Exception ex) &#123;</span><br><span class="line">           request.setAttribute(<span class="string">&quot;message&quot;</span>, <span class="string">&quot;错误信息: &quot;</span> + <span class="string">&quot;文件上传失败，请检查是否文件为空！&quot;</span>);</span><br><span class="line"></span><br><span class="line">       &#125;</span><br><span class="line">       <span class="keyword">return</span> <span class="string">&quot;/teacher/tea_add_paper&quot;</span>;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></div></figure>

<p><strong>注意到return这里，我们需要配置相应的视图解析器，不然我们不知道return哪个地方去显示。</strong></p>
<figure class="highlight xml"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--配置试图解析--&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span> = <span class="string">&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;prefix&quot;</span> <span class="attr">value</span>=<span class="string">&quot;/&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;suffix&quot;</span> <span class="attr">value</span>=<span class="string">&quot;.jsp&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></div></figure>

<p><img   src="https://img-blog.csdnimg.cn/20210514102019792.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzQzNDQ1MDY3,size_16,color_FFFFFF,t_70" style="width: image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,tepx;height: t_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzQzNDQ1MDY3,size_16,color_FFFFFF,t_70px;"  alt="在这里插入图片描述"><br><strong>注意：webapp 就是我们配置的根目录，并且配置的视图后缀为.jsp</strong></p>
<ul>
<li>这样我们就能在，相应的视图中，看到message的内容了</li>
</ul>

        <h2 id="SpringBoot项目-JSP-MultipartFile（非AJAX异步）"   >
          <a href="#SpringBoot项目-JSP-MultipartFile（非AJAX异步）" class="heading-link"><i class="fas fa-link"></i></a><a href="#SpringBoot项目-JSP-MultipartFile（非AJAX异步）" class="headerlink" title="SpringBoot项目+JSP+MultipartFile（非AJAX异步）"></a>SpringBoot项目+JSP+MultipartFile（非AJAX异步）</h2>
      <p><strong>首先，我们需要在SpringBoot的配置文件application.yml或者application.properties中配置：</strong></p>
<p><strong>application.properties</strong></p>
<figure class="highlight yml"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">spring.servlet.multipart.max-request-size=10MB</span></span><br><span class="line"></span><br><span class="line"><span class="string">spring.servlet.multipart.max-file-size=10MB</span></span><br></pre></td></tr></table></div></figure>

<p><strong>然后我们，在controller中写相应语句：</strong></p>
<ul>
<li>我们仍然需要配置视图解析器ViewResolver：</li>
</ul>
<p><strong>在application.properties中：</strong></p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">spring.mvc.view.prefix=/</span><br><span class="line"></span><br><span class="line">spring.mvc.view.suffix=.jsp</span><br></pre></td></tr></table></div></figure>
<p>仍与上方图片中的项目结构图一致！</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String UPLOAD_DIRECTORY = <span class="string">&quot;upload&quot;</span>;</span><br><span class="line">   </span><br><span class="line"><span class="meta">@PostMapping(&quot;/upload&quot;)</span></span><br><span class="line">   <span class="meta">@ResponseBody</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> String <span class="title">upload</span><span class="params">(<span class="meta">@RequestParam(&quot;file&quot;)</span> MultipartFile file, HttpServletRequest request)</span> </span>&#123;</span><br><span class="line">       <span class="keyword">if</span> (file.isEmpty()) &#123;</span><br><span class="line">       	request.setAttribute(<span class="string">&quot;message&quot;</span>, <span class="string">&quot;对不起，检测到文件为空！&quot;</span>);</span><br><span class="line">           <span class="keyword">return</span> <span class="string">&quot;/teacher/tea_add_paper&quot;</span>;</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       String fileName = file.getOriginalFilename();</span><br><span class="line">       String templatePath = request.getServletContext().getRealPath(<span class="string">&quot;./&quot;</span>) + File.separator + UPLOAD_DIRECTORY;</span><br><span class="line"></span><br><span class="line">       File dest = <span class="keyword">new</span> File(filePath + fileName);</span><br><span class="line">       <span class="keyword">try</span> &#123;</span><br><span class="line">           file.transferTo(dest);</span><br><span class="line">           request.setAttribute(<span class="string">&quot;message&quot;</span>, <span class="string">&quot;文件上传成功！&quot;</span>);</span><br><span class="line">           <span class="keyword">return</span> <span class="string">&quot;/teacher/tea_add_paper&quot;</span>;</span><br><span class="line">       &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">       	System.out.println(e)</span><br><span class="line">       &#125;</span><br><span class="line">       </span><br><span class="line">       request.setAttribute(<span class="string">&quot;message&quot;</span>, <span class="string">&quot;文件上传失败！&quot;</span>);</span><br><span class="line">       <span class="keyword">return</span> <span class="string">&quot;/teacher/tea_add_paper&quot;</span>;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></div></figure>

<p><strong>接下来，就准备写前端页面请求：</strong></p>
<figure class="highlight html"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span> <span class="attr">action</span>=<span class="string">&quot;/uploading&quot;</span> <span class="attr">enctype</span>=<span class="string">&quot;multipart/form-data&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;file&quot;</span> <span class="attr">name</span>=<span class="string">&quot;file&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;提交给服务器&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    	$&#123;message&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></div></figure>


        <h2 id="SpringBoot-VUE-ElementUI前后端分离"   >
          <a href="#SpringBoot-VUE-ElementUI前后端分离" class="heading-link"><i class="fas fa-link"></i></a><a href="#SpringBoot-VUE-ElementUI前后端分离" class="headerlink" title="SpringBoot+VUE+ElementUI前后端分离"></a>SpringBoot+VUE+ElementUI前后端分离</h2>
      <p><strong>前提是解决跨域问题，并且直接通过IP地址访问，将这个访问的ip地址存在VUEX中或者Main.js中即可。</strong></p>
<p><strong>1. VUE前端页面</strong></p>
<figure class="highlight html"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">el-upload</span></span></span><br><span class="line"><span class="tag">            <span class="attr">class</span>=<span class="string">&quot;uploadDemo&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">ref</span>=<span class="string">&quot;upload&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">accept</span>=<span class="string">&quot;.doc&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">action</span>=<span class="string">&quot;https://jsonplaceholder.typicode.com/posts/&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">:on-preview</span>=<span class="string">&quot;handlePreview&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">:on-remove</span>=<span class="string">&quot;handleRemove&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">:http-request</span>=<span class="string">&quot;httpRequest&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">:auto-upload</span>=<span class="string">&quot;false&quot;</span></span></span><br><span class="line"><span class="tag">          &gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">slot</span>=<span class="string">&quot;trigger&quot;</span> <span class="attr">size</span>=<span class="string">&quot;small&quot;</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span></span></span><br><span class="line"><span class="tag">              &gt;</span>选取文件&lt;/el-button</span><br><span class="line">            &gt;</span><br><span class="line">            <span class="tag">&lt;<span class="name">el-button</span></span></span><br><span class="line"><span class="tag">              <span class="attr">style</span>=<span class="string">&quot;margin-left: 10px&quot;</span></span></span><br><span class="line"><span class="tag">              <span class="attr">size</span>=<span class="string">&quot;small&quot;</span></span></span><br><span class="line"><span class="tag">              <span class="attr">type</span>=<span class="string">&quot;success&quot;</span></span></span><br><span class="line"><span class="tag">              @<span class="attr">click</span>=<span class="string">&quot;submitUpload&quot;</span></span></span><br><span class="line"><span class="tag">              &gt;</span>上传到服务器&lt;/el-button</span><br><span class="line">            &gt;</span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">slot</span>=<span class="string">&quot;tip&quot;</span> <span class="attr">class</span>=<span class="string">&quot;el-upload__tip&quot;</span>&gt;</span></span><br><span class="line">              只能上传.doc后缀文件，且不超过40MB</span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">el-upload</span>&gt;</span></span><br></pre></td></tr></table></div></figure>

<ol start="2">
<li>写两个函数</li>
</ol>
<p><strong>一个是按钮点击函数，另一个是上传文件的表单具体提交（axios请求）的函数</strong></p>
<ul>
<li>提交按钮函数<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">submitUpload</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">      <span class="built_in">this</span>.$refs.upload.submit(); <span class="comment">//我们通过el-upload的引用来找到 并让他提交</span></span><br><span class="line">    &#125;,</span><br></pre></td></tr></table></div></figure></li>
</ul>
<p><strong>注意，我们这里看到他的action位置，并不是我们的后台地址。</strong></p>
<p><strong>也就是说，我们通过先把自己的文件传给他的action，再由他的action服务器地址，传给我们的后台服务器。</strong></p>
<p><strong>最后，提交表单后，会走绑定属性httpRequest的方法，即：</strong></p>
<ul>
<li>表单提交函数<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//最后上传走这个方法！</span></span><br><span class="line">    <span class="function"><span class="title">httpRequest</span>(<span class="params">param</span>)</span> &#123;</span><br><span class="line">      <span class="keyword">let</span> fileObj = param.file; <span class="comment">// 相当于input里取得的files</span></span><br><span class="line">      <span class="keyword">let</span> data = <span class="keyword">new</span> FormData(); <span class="comment">// FormData 对象</span></span><br><span class="line">      data.append(<span class="string">&quot;file&quot;</span>, fileObj); <span class="comment">// 文件对象 后台用@RequestParam来接收</span></span><br><span class="line">      <span class="keyword">const</span> config = &#123; <span class="attr">headers</span>: &#123; <span class="string">&quot;Content-Type&quot;</span>: <span class="string">&quot;multipart/form-data&quot;</span> &#125; &#125;;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">var</span> _this = <span class="built_in">this</span>;</span><br><span class="line">	  <span class="comment">//在这里我将后台的服务器地址 存进了VUEX中</span></span><br><span class="line">	  <span class="comment">//并通过相应的getters 来获取</span></span><br><span class="line">      <span class="built_in">this</span>.$axios</span><br><span class="line">        .post(</span><br><span class="line">          <span class="built_in">this</span>.$store.getters.getRequestAddress + <span class="string">`/uploading`</span>,</span><br><span class="line">          data,</span><br><span class="line">          config</span><br><span class="line">        )</span><br><span class="line">        .then(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">let</span> data = res.data;</span><br><span class="line">          <span class="built_in">console</span>.log(data);</span><br><span class="line">          <span class="keyword">if</span> (data.data === <span class="number">1</span>) &#123;</span><br><span class="line">            _this.sendMessage(data.message, <span class="string">&quot;success&quot;</span>);</span><br><span class="line">          &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            _this.sendMessage(data.message, <span class="string">&quot;error&quot;</span>);</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">        .catch(<span class="function">(<span class="params"><span class="built_in">Error</span></span>) =&gt;</span> &#123;</span><br><span class="line">          _this.sendMessage(<span class="string">&quot;请求失败！&quot;</span>, <span class="string">&quot;error&quot;</span>);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;,</span><br></pre></td></tr></table></div></figure></li>
</ul>
<p><strong>发送消息的方法，记得引入ElementUI</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//弹窗发送消息 以传入的参数而定</span></span><br><span class="line">    <span class="function"><span class="title">sendMessage</span>(<span class="params">messageContent, messageType</span>)</span> &#123;</span><br><span class="line">      <span class="built_in">this</span>.$message(&#123;</span><br><span class="line">        <span class="attr">message</span>: messageContent,</span><br><span class="line">        <span class="attr">type</span>: messageType,</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;,</span><br></pre></td></tr></table></div></figure>

<p><strong>然后就是后台接收（如果是SSM项目，在SpringMVC配置文件中配置Bean</strong></p>
<p><strong>如果是SpringBoot项目，记得在application.properties中配置：</strong></p>
<p><mark> 见上方内容 </mark></p>
<p><strong>接下来，我们写后台的具体上传方法。</strong></p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//elementUI 上传方法</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String UPLOAD_DIRECTORY = <span class="string">&quot;upload&quot;</span>;</span><br><span class="line">	</span><br><span class="line">    <span class="meta">@PostMapping(value = &quot;/uploading&quot;)</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> TSMResult <span class="title">uploadFile</span><span class="params">(<span class="meta">@RequestParam(&quot;file&quot;)</span> MultipartFile file, HttpServletRequest request, TSMResult tsmResult)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (file.isEmpty()) &#123;</span><br><span class="line">            tsmResult.setData(<span class="number">0</span>);</span><br><span class="line">            tsmResult.setMessage(<span class="string">&quot;文件不可为空！&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span> tsmResult;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 获取文件全名a.py</span></span><br><span class="line">        String fileName = file.getOriginalFilename();</span><br><span class="line">        <span class="comment">// 文件上传路径&lt;br&gt;        String templatePath = &quot;E:/file/template/&quot;</span></span><br><span class="line">        String templatePath = request.getServletContext().getRealPath(<span class="string">&quot;./&quot;</span>) + File.separator + UPLOAD_DIRECTORY;</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;文件路径：&quot;</span> + templatePath);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 获取文件的后缀名</span></span><br><span class="line">        String suffixName = fileName.substring(fileName.lastIndexOf(<span class="string">&quot;.&quot;</span>));</span><br><span class="line"></span><br><span class="line">        <span class="comment">//获取文件名</span></span><br><span class="line">        String prefixName = fileName.substring(<span class="number">0</span>, fileName.lastIndexOf(<span class="string">&quot;.&quot;</span>));</span><br><span class="line">        <span class="comment">// 解决中文问题,liunx 下中文路径,图片显示问题</span></span><br><span class="line">        <span class="comment">//fileName = UUID.randomUUID() + suffixName;</span></span><br><span class="line">        File dest0 = <span class="keyword">new</span> File(templatePath);</span><br><span class="line">        <span class="comment">//prefixName + File.separator +</span></span><br><span class="line">        File dest = <span class="keyword">new</span> File(dest0, fileName);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//文件上传-覆盖</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// 检测是否存在目录</span></span><br><span class="line">            <span class="keyword">if</span> (!dest0.getParentFile().exists()) &#123;</span><br><span class="line">                dest0.getParentFile().mkdirs();</span><br><span class="line">                <span class="comment">//检测文件是否存在</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (!dest.exists()) &#123;</span><br><span class="line">                dest.mkdirs();</span><br><span class="line">            &#125;</span><br><span class="line">            file.transferTo(dest);</span><br><span class="line"></span><br><span class="line">            <span class="comment">//上传成功后 将上传路径上传到数据库中</span></span><br><span class="line">            String filePathSaved = templatePath + File.separator;</span><br><span class="line">            teacherServer.saveFilePath(filePathSaved, fileName);</span><br><span class="line"></span><br><span class="line">            tsmResult.setData(<span class="number">1</span>);</span><br><span class="line">            tsmResult.setMessage(<span class="string">&quot;文件上传成功！&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span> tsmResult;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            tsmResult.setData(<span class="number">0</span>);</span><br><span class="line">            tsmResult.setMessage(<span class="string">&quot;服务器错误，请稍后再试！&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span> tsmResult;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></div></figure>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">teacherServer.saveFilePath(filePathSaved, fileName);</span><br></pre></td></tr></table></div></figure>

<p>这个代表，我们<strong>将这个上传的文件名字，以及对应的上传路径，写进数据库中</strong>。</p>
<p>对应服务层代码：</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">saveFilePath</span><span class="params">(String filePathSaved, String fileName)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> sourceMapper.saveFilePath(filePathSaved, fileName);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></div></figure>

<p>对应mapper代码：</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Insert(&quot;insert into source(source, papername) values (#&#123;filePath&#125;,#&#123;fileName&#125;)&quot;)</span></span><br><span class="line">   <span class="function"><span class="keyword">int</span> <span class="title">saveFilePath</span><span class="params">(<span class="meta">@Param(&quot;filePath&quot;)</span> String filePath, <span class="meta">@Param(&quot;fileName&quot;)</span> String fileName)</span></span>;</span><br><span class="line"></span><br></pre></td></tr></table></div></figure>

<p>可以建立一个Source实体类，引入Lombok</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> Integer id;</span><br><span class="line"><span class="keyword">private</span> String filePath;</span><br><span class="line"><span class="keyword">private</span> String fileName;</span><br></pre></td></tr></table></div></figure>

<p><strong>并且数据库也建立一个source表，其中字段名与这个Source实体类的属性名一模一样（避免Mybatis的字段映射ResultMap）</strong></p>

        <h1 id="实现文件下载"   >
          <a href="#实现文件下载" class="heading-link"><i class="fas fa-link"></i></a><a href="#实现文件下载" class="headerlink" title="实现文件下载"></a>实现文件下载</h1>
      <p><strong># 在实现文件的上传后，我们肯定会有相应的下载功能。</strong></p>
<p><em>即从上传目录中的文件中，去下载对应的文件。</em></p>
<ul>
<li><p>需求：我们将文件的信息以及路径，存进数据库了，也就代表：</p>
</li>
<li><p>我们“只能下载那些已经保存在数据库中的文件”</p>
</li>
</ul>

        <h2 id="JSP实现文件下载（且动态检测文件是否可下载）"   >
          <a href="#JSP实现文件下载（且动态检测文件是否可下载）" class="heading-link"><i class="fas fa-link"></i></a><a href="#JSP实现文件下载（且动态检测文件是否可下载）" class="headerlink" title="JSP实现文件下载（且动态检测文件是否可下载）"></a>JSP实现文件下载（且动态检测文件是否可下载）</h2>
      <ol>
<li>前端页面动态生成一个锚点（Bootstrap可加上按钮样式类）<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. 利用Ajax异步获取到分好页的论文（PageHelper插件）</span></span><br><span class="line"><span class="keyword">var</span> list = result.data.list</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. 利用$.each来遍历这些数据 对每个数据进行筛选</span></span><br><span class="line">$.each(list, <span class="function"><span class="keyword">function</span> (<span class="params">index, item</span>) </span>&#123;	</span><br><span class="line">	<span class="comment">//3. 首先获取到即将下载的论文名(鉴于我们上传时 是将论文的文件名存进数据库的)</span></span><br><span class="line">	<span class="keyword">var</span> papername = item.papername  </span><br><span class="line">	</span><br><span class="line">	<span class="comment">//4. 为每一项“模拟按钮” 动态加上类 方便我们后期动态remove掉</span></span><br><span class="line">	<span class="keyword">var</span> download = $(<span class="string">&quot;&lt;a&gt;&lt;/a&gt;&quot;</span>).addClass(papername + <span class="string">&quot; btn btn-danger btn-sm&quot;</span>).append($(<span class="string">&quot;&lt;span&gt;&lt;/span&gt;&quot;</span>).addClass(<span class="string">&quot;glyphicon glyphicon-download&quot;</span>)).append(<span class="string">&quot;下载&quot;</span>).attr(<span class="string">&quot;href&quot;</span>, <span class="string">&quot;/DownloadServlet?paperName=&quot;</span> + item.papername);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></div></figure></li>
</ol>
<p><strong>注意到，我们这里的路径是：/DownloadServlet?paperName=xxx</strong></p>
<p>因此，我们肯定是以<code>get</code>的请求方式</p>
<ol start="2">
<li>后台controller层代码<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String UPLOAD_DIRECTORY = <span class="string">&quot;upload&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RequestMapping(value = &quot;/DownloadServlet&quot;)</span></span><br><span class="line">   <span class="keyword">public</span> ResponseEntity&lt;<span class="keyword">byte</span>[]&gt; fileDownload(</span><br><span class="line">           HttpServletRequest request,</span><br><span class="line">           <span class="meta">@RequestParam(&quot;paperName&quot;)</span> String fileName,</span><br><span class="line">           Model model) <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">       fileName = <span class="keyword">new</span> String(fileName.getBytes(<span class="string">&quot;ISO-8859-1&quot;</span>), <span class="string">&quot;UTF-8&quot;</span>); <span class="comment">//后台接受中文数据编码</span></span><br><span class="line">       fileName = fileName + <span class="string">&quot;.doc&quot;</span>;</span><br><span class="line"></span><br><span class="line">       String filePath = request.getServletContext().getRealPath(<span class="string">&quot;./&quot;</span>) + File.separator + UPLOAD_DIRECTORY + <span class="string">&quot;\\&quot;</span> + fileName;</span><br><span class="line">       File file = <span class="keyword">new</span> File(filePath);</span><br><span class="line">       HttpHeaders headers = <span class="keyword">new</span> HttpHeaders();</span><br><span class="line">       String downloadFile = <span class="keyword">new</span> String(fileName.getBytes(<span class="string">&quot;utf-8&quot;</span>), <span class="string">&quot;iso-8859-1&quot;</span>);</span><br><span class="line">       headers.setContentDispositionFormData(<span class="string">&quot;attachment&quot;</span>, downloadFile);</span><br><span class="line">       headers.setContentType(MediaType.APPLICATION_OCTET_STREAM);</span><br><span class="line">       <span class="keyword">return</span> <span class="keyword">new</span> ResponseEntity&lt;<span class="keyword">byte</span>[]&gt;(FileUtils.readFileToByteArray(file), headers, HttpStatus.CREATED);</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></div></figure></li>
</ol>
<p><strong>其实，上述代码是不够完整的，因为如果数据库中没有这个以.doc为后缀（后缀写死了）的文件，就会报错。</strong></p>
<p><strong>因此，我们需要在前端下载之前就进行一次查询：</strong></p>
<p><strong>如果该文件的文件名存到数据库里了，才给予下载（即才动态添加下载的锚点样式）</strong></p>
<ul>
<li>完整代码：写在$.each遍历中：<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// 1. 利用Ajax异步获取到分好页的论文（PageHelper插件）</span></span><br><span class="line"><span class="keyword">var</span> list = result.data.list</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. 利用$.each来遍历这些数据 对每个数据进行筛选</span></span><br><span class="line">$.each(list, <span class="function"><span class="keyword">function</span> (<span class="params">index, item</span>) </span>&#123;	</span><br><span class="line">	<span class="comment">//3. 首先获取到即将下载的论文名(鉴于我们上传时 是将论文的文件名存进数据库的)</span></span><br><span class="line">	<span class="keyword">var</span> papername = item.papername  </span><br><span class="line">	</span><br><span class="line">	<span class="comment">//4. 为每一项“模拟按钮” 动态加上类 方便我们后期动态remove掉</span></span><br><span class="line">	<span class="keyword">var</span> download = $(<span class="string">&quot;&lt;a&gt;&lt;/a&gt;&quot;</span>).addClass(papername + <span class="string">&quot; btn btn-danger btn-sm&quot;</span>).append($(<span class="string">&quot;&lt;span&gt;&lt;/span&gt;&quot;</span>).addClass(<span class="string">&quot;glyphicon glyphicon-download&quot;</span>)).append(<span class="string">&quot;下载&quot;</span>).attr(<span class="string">&quot;href&quot;</span>, <span class="string">&quot;/DownloadServlet?paperName=&quot;</span> + item.papername);</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//5. 查询该文件是否可下载</span></span><br><span class="line">	$.ajax(&#123;</span><br><span class="line">		<span class="attr">url</span>: <span class="string">&quot;isExistsFilename&quot;</span>,</span><br><span class="line">		<span class="attr">data</span>: &#123;<span class="string">&quot;paperName&quot;</span>: item.papername&#125;,</span><br><span class="line">		<span class="attr">type</span>: <span class="string">&quot;GET&quot;</span>,</span><br><span class="line">		<span class="attr">dataType</span>: <span class="string">&quot;JSON&quot;</span>,</span><br><span class="line">		<span class="attr">success</span>: <span class="function"><span class="keyword">function</span> (<span class="params">result</span>) </span>&#123;</span><br><span class="line">			<span class="comment">//数据库存储了文件信息的论文 才可以下载</span></span><br><span class="line">			<span class="comment">//如果为false表示不可下载 则根据对应的papername来remove样式</span></span><br><span class="line">			<span class="keyword">if</span>(result.data == <span class="literal">false</span>)&#123;</span><br><span class="line">				$(<span class="string">&quot;.&quot;</span> + item.papername).remove();</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;,</span><br><span class="line">		<span class="attr">error</span>: <span class="function"><span class="keyword">function</span> (<span class="params">error</span>) </span>&#123;</span><br><span class="line">			<span class="built_in">console</span>.log(error)</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></div></figure></li>
</ul>
<p><strong>查询的控制层代码：</strong></p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(value = &quot;/isExistsFilename&quot;, method = RequestMethod.GET)</span></span><br><span class="line">   <span class="meta">@ResponseBody</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> TSMResult <span class="title">isExistsFilename</span><span class="params">(</span></span></span><br><span class="line"><span class="params"><span class="function">           <span class="meta">@RequestParam(&quot;paperName&quot;)</span> String paperName)</span> </span>&#123;</span><br><span class="line">       <span class="comment">//处理中文</span></span><br><span class="line">       Boolean isExists = <span class="keyword">false</span>;</span><br><span class="line">       <span class="keyword">try</span> &#123;</span><br><span class="line">           paperName = <span class="keyword">new</span> String(paperName.getBytes(<span class="string">&quot;ISO-8859-1&quot;</span>), <span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">           paperName = paperName + <span class="string">&quot;.doc&quot;</span>;</span><br><span class="line">           Source source = adminServer.isExistsPaperFile(paperName);</span><br><span class="line">           isExists = (source == <span class="keyword">null</span>) ? <span class="keyword">false</span> : <span class="keyword">true</span>;</span><br><span class="line">       &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">           System.out.println(<span class="string">&quot;检测到异常！&quot;</span>);</span><br><span class="line">           e.printStackTrace();</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="keyword">return</span> <span class="keyword">new</span> TSMResult(<span class="number">200</span>, <span class="string">&quot;查询成功&quot;</span>, isExists);</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></div></figure>

<p>从代码中的三目运算符可以看出：</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">isExists = (source == <span class="keyword">null</span>) ? <span class="keyword">false</span> : <span class="keyword">true</span>;</span><br></pre></td></tr></table></div></figure>

<ul>
<li><p>如果这个文件为空则会true，否则为false</p>
</li>
<li><p>也就是说，如果文件不为空，则为false，表示不可下载</p>
</li>
</ul>
<p><strong>服务层代码：</strong></p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> Source <span class="title">isExistsPaperFile</span><span class="params">(String paperName)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> sourceMapper.selectPaperFile(paperName);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></div></figure>

<p><strong>具体Source类看上方代码即可。</strong></p>
<p><strong>Mapper代码：</strong></p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Select(&quot;select* from source where papername = #&#123;paperName&#125;&quot;)</span></span><br><span class="line"><span class="function">Source <span class="title">selectPaperFile</span><span class="params">(<span class="meta">@Param(&quot;paperName&quot;)</span> String paperName)</span></span>;</span><br></pre></td></tr></table></div></figure>


        <h1 id="实现通用JS代码全局引用"   >
          <a href="#实现通用JS代码全局引用" class="heading-link"><i class="fas fa-link"></i></a><a href="#实现通用JS代码全局引用" class="headerlink" title="实现通用JS代码全局引用"></a>实现通用JS代码全局引用</h1>
      
        <h2 id="ElementUI的Message消息提示、Notify通知等等"   >
          <a href="#ElementUI的Message消息提示、Notify通知等等" class="heading-link"><i class="fas fa-link"></i></a><a href="#ElementUI的Message消息提示、Notify通知等等" class="headerlink" title="ElementUI的Message消息提示、Notify通知等等"></a>ElementUI的Message消息提示、Notify通知等等</h2>
      <p><strong>我们希望在弹出消息或者通知（Notify）时</strong></p>
<ul>
<li>根据我们自定义的参数，来相应提示用户</li>
</ul>
<ol>
<li><p>提示用户更改信息成功</p>
</li>
<li><p>这个提示类型是success类型</p>
</li>
</ol>
<p>只需调用：</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">this</span>.$sendMessage(<span class="string">&#x27;这是消息内容&#x27;</span>, <span class="string">&#x27;info/success/error/warning&#x27;</span>)</span><br></pre></td></tr></table></div></figure>

<p><em>info 是灰色 success是绿色 error是红色 warning是黄色</em></p>

        <h3 id="创建通用功能的utils-js"   >
          <a href="#创建通用功能的utils-js" class="heading-link"><i class="fas fa-link"></i></a><a href="#创建通用功能的utils-js" class="headerlink" title="创建通用功能的utils.js"></a>创建通用功能的utils.js</h3>
      <ul>
<li>定义多个function 最后导出即可</li>
</ul>
<p><em>注意，这里有一个知识点：对于默认导出的函数，使用时函数名外不需要{xxx}</em></p>
<p><em>即直接： import XXX from ‘xxx/xxx’</em></p>
<p><strong>而如果有多个函数，想要按需引入的话，需要加上{}</strong></p>
<p>按需引入（包括默认导出函数）：</p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; fun1, fun2 &#125; <span class="keyword">from</span> <span class="string">&#x27;xxx/xxx&#x27;</span></span><br></pre></td></tr></table></div></figure>

<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//弹窗发送消息 以传入的参数而定</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">sendMessage</span>(<span class="params">messageContent, messageType</span>) </span>&#123;</span><br><span class="line">	<span class="built_in">this</span>.$message(&#123;</span><br><span class="line">		<span class="attr">message</span>: messageContent,</span><br><span class="line">		<span class="attr">type</span>: messageType,</span><br><span class="line">	&#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">alertTest</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">	alert(<span class="string">&#x27;这是测试方法！&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> sendMessage</span><br></pre></td></tr></table></div></figure>


        <h3 id="main-js中引入并使用"   >
          <a href="#main-js中引入并使用" class="heading-link"><i class="fas fa-link"></i></a><a href="#main-js中引入并使用" class="headerlink" title="main.js中引入并使用"></a>main.js中引入并使用</h3>
      <figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; sendMessage,loadingAnimation &#125; <span class="keyword">from</span> <span class="string">&#x27;./assets/js/utils&#x27;</span></span><br><span class="line">Vue.prototype.$sendMessage = sendMessage </span><br><span class="line">Vue.prototype.$alertTest = alertTest </span><br></pre></td></tr></table></div></figure>

<p>这样我们就可以，直接在vue项目中：使用<code>this.$sendMessage</code>来使用相应方法了。</p>

        <h1 id="HTML中引入VUE并使用ElementUI样式"   >
          <a href="#HTML中引入VUE并使用ElementUI样式" class="heading-link"><i class="fas fa-link"></i></a><a href="#HTML中引入VUE并使用ElementUI样式" class="headerlink" title="HTML中引入VUE并使用ElementUI样式"></a>HTML中引入VUE并使用ElementUI样式</h1>
      
        <h2 id="head标签引入ElementUI的CSS、JS以及VUE的JS"   >
          <a href="#head标签引入ElementUI的CSS、JS以及VUE的JS" class="heading-link"><i class="fas fa-link"></i></a><a href="#head标签引入ElementUI的CSS、JS以及VUE的JS" class="headerlink" title="head标签引入ElementUI的CSS、JS以及VUE的JS"></a>head标签引入ElementUI的CSS、JS以及VUE的JS</h2>
      <figure class="highlight html"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;https://unpkg.com/element-ui/lib/theme-chalk/index.css&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://unpkg.com/vue/dist/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://unpkg.com/element-ui/lib/index.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></div></figure>


        <h2 id="初始VUE（2-0版本）"   >
          <a href="#初始VUE（2-0版本）" class="heading-link"><i class="fas fa-link"></i></a><a href="#初始VUE（2-0版本）" class="headerlink" title="初始VUE（2.0版本）"></a>初始VUE（2.0版本）</h2>
      <ol>
<li>页面非body标签 标记</li>
</ol>
<figure class="highlight html"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span> </span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></div></figure>
<ol start="2">
<li>vue挂载上去（可以<strong>使用template写HTML页面 如果已经有内容了就去掉template</strong>）<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">      <span class="attr">el</span>: <span class="string">&#x27;#app&#x27;</span>,</span><br><span class="line">      <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">      	<span class="keyword">return</span> &#123;</span><br><span class="line">      			</span><br><span class="line">      	&#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">methods</span>: &#123;</span><br><span class="line">      	</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="function"><span class="title">created</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">	  </span><br><span class="line">	  &#125;,</span><br><span class="line">	  <span class="function"><span class="title">mounted</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">			</span><br><span class="line">	  &#125;</span><br><span class="line">    &#125;)</span><br></pre></td></tr></table></div></figure></li>
</ol>
</div></div></article><article class="postlist-item post"><header class="post-header"><h1 class="post-title"><a class="post-title__link" href="/2021/06/01/Gitee-%E4%B8%8A%E4%BC%A0%E9%A1%B9%E7%9B%AE/">Gitee_上传项目</a></h1><div class="post-meta"><span class="post-meta-item post-meta-item--createtime"><span class="post-meta-item__icon"><i class="far fa-calendar-plus"></i></span><span class="post-meta-item__info">发表于</span><span class="post-meta-item__value">2021-06-01</span></span><span class="post-meta-item post-meta-item--updatetime"><span class="post-meta-item__icon"><i class="far fa-calendar-check"></i></span><span class="post-meta-item__info">更新于</span><span class="post-meta-item__value">2021-06-01</span></span><span class="post-meta-item post-meta-item--wordcount"><span class="post-meta-item__icon"><i class="far fa-file-word"></i></span><span class="post-meta-item__info">字数统计</span><span class="post-meta-item__value">154</span></span><span class="post-meta-item post-meta-item--readtime"><span class="post-meta-item__icon"><i class="far fa-clock"></i></span><span class="post-meta-item__info">阅读时长</span><span class="post-meta-item__value">1分</span></span></div></header><div class="post-body"><div class="post-excerpt">
        <h1 id="Gitee上传项目"   >
          <a href="#Gitee上传项目" class="heading-link"><i class="fas fa-link"></i></a><a href="#Gitee上传项目" class="headerlink" title="Gitee上传项目"></a>Gitee上传项目</h1>
      
        <h2 id="1-创建一个仓库（要用到git地址）"   >
          <a href="#1-创建一个仓库（要用到git地址）" class="heading-link"><i class="fas fa-link"></i></a><a href="#1-创建一个仓库（要用到git地址）" class="headerlink" title="1. 创建一个仓库（要用到git地址）"></a>1. 创建一个仓库（要用到git地址）</h2>
      <p><img   src="https://img-blog.csdnimg.cn/20210601232408867.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzQzNDQ1MDY3,size_16,color_FFFFFF,t_70" style="width: image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,tepx;height: t_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzQzNDQ1MDY3,size_16,color_FFFFFF,t_70px;"  alt="在这里插入图片描述"></p>

        <h3 id="配置Git-config"   >
          <a href="#配置Git-config" class="heading-link"><i class="fas fa-link"></i></a><a href="#配置Git-config" class="headerlink" title="配置Git.config"></a>配置Git.config</h3>
      <figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config --global user.name <span class="string">&quot;vincent990413&quot;</span></span><br><span class="line">git config --global user.email <span class="string">&quot;370216714@qq.com&quot;</span></span><br></pre></td></tr></table></div></figure>

<p><mark>#点击初始化readme文件</mark></p>

        <h2 id="2-克隆git地址"   >
          <a href="#2-克隆git地址" class="heading-link"><i class="fas fa-link"></i></a><a href="#2-克隆git地址" class="headerlink" title="2. 克隆git地址"></a>2. 克隆git地址</h2>
      <p><img   src="https://img-blog.csdnimg.cn/20210601232702181.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzQzNDQ1MDY3,size_16,color_FFFFFF,t_70" style="width: image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,tepx;height: t_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzQzNDQ1MDY3,size_16,color_FFFFFF,t_70px;"  alt="在这里插入图片描述"><br>随便创建一个文件夹，<strong>Git Bash</strong>中进入这个文件夹</p>
<p><mark>（这个文件夹的名字无所谓）</mark>，</p>
<p>输入代码：</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone xxxxx.git</span><br></pre></td></tr></table></div></figure>

<p><mark>然后将目标文件夹里面的内容（不包括文件夹）直接复制过来。</mark></p>
<p>然后输入代码：</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git add .</span><br></pre></td></tr></table></div></figure>

<p>然后输入代码：备注：</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git commit -m <span class="string">&quot;备注&quot;</span></span><br></pre></td></tr></table></div></figure>

<p>然后依次输入：</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git pull origin master</span><br><span class="line"></span><br><span class="line">git push -u origin master</span><br></pre></td></tr></table></div></figure>

</div></div></article><article class="postlist-item post"><header class="post-header"><h1 class="post-title"><a class="post-title__link" href="/2021/05/25/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E5%AD%A6%E4%B9%A0-%E5%B7%A5%E5%8E%82%E6%96%B9%E6%B3%95%E6%A8%A1%E5%BC%8F/">设计模式学习_工厂方法模式</a></h1><div class="post-meta"><span class="post-meta-item post-meta-item--createtime"><span class="post-meta-item__icon"><i class="far fa-calendar-plus"></i></span><span class="post-meta-item__info">发表于</span><span class="post-meta-item__value">2021-05-25</span></span><span class="post-meta-item post-meta-item--updatetime"><span class="post-meta-item__icon"><i class="far fa-calendar-check"></i></span><span class="post-meta-item__info">更新于</span><span class="post-meta-item__value">2021-06-10</span></span><span class="post-meta-item post-meta-item--wordcount"><span class="post-meta-item__icon"><i class="far fa-file-word"></i></span><span class="post-meta-item__info">字数统计</span><span class="post-meta-item__value">613</span></span><span class="post-meta-item post-meta-item--readtime"><span class="post-meta-item__icon"><i class="far fa-clock"></i></span><span class="post-meta-item__info">阅读时长</span><span class="post-meta-item__value">4分</span></span></div></header><div class="post-body"><div class="post-excerpt">
        <h1 id="工厂方法设计模式-Factory-Pattern"   >
          <a href="#工厂方法设计模式-Factory-Pattern" class="heading-link"><i class="fas fa-link"></i></a><a href="#工厂方法设计模式-Factory-Pattern" class="headerlink" title="工厂方法设计模式 Factory Pattern"></a>工厂方法设计模式 Factory Pattern</h1>
      <iframe width="560" height="315" src="https://www.youtube.com/embed/EcFVTgRHJLM" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>


        <h2 id="定义以及抽象层面"   >
          <a href="#定义以及抽象层面" class="heading-link"><i class="fas fa-link"></i></a><a href="#定义以及抽象层面" class="headerlink" title="定义以及抽象层面"></a>定义以及抽象层面</h2>
      <ul>
<li><strong>工厂方法定义了一种更好地创造对象的方式。但是它让工厂子类来决定怎么创造以及创造哪一个对象。也就是说，工厂模式将创造对象的过程延迟给子类来进行。</strong></li>
</ul>
<p><strong>它以这两种东西组成：</strong></p>
<p><strong>1. 我们想要创造的对象。</strong></p>
<p><strong>2.我们用来创造这些对象的工厂。</strong></p>
<p>抽象层面的图所示：</p>
<p><img   src="https://img-blog.csdnimg.cn/2021052520590059.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzQzNDQ1MDY3,size_16,color_FFFFFF,t_70" style="width: image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,tepx;height: t_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzQzNDQ1MDY3,size_16,color_FFFFFF,t_70px;"  alt="在这里插入图片描述"><br><strong># 我们可以看到：</strong></p>
<p><strong>1. 左边代表的是各个我们需要创建的对象。</strong></p>
<p><strong>2. 右边代表的是我们用什么（工厂）来创建，当然了，根据什么规则来创建这些对象，我们也可以写在工厂中。</strong></p>

        <h2 id="具体案例层面以及代码实现"   >
          <a href="#具体案例层面以及代码实现" class="heading-link"><i class="fas fa-link"></i></a><a href="#具体案例层面以及代码实现" class="headerlink" title="具体案例层面以及代码实现"></a>具体案例层面以及代码实现</h2>
      <p><strong># 现在，我们用可以实现的代码形式来说明：</strong></p>
<p>重要的图如下：</p>
<p><img   src="https://img-blog.csdnimg.cn/20210525210510585.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzQzNDQ1MDY3,size_16,color_FFFFFF,t_70" style="width: image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,tepx;height: t_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzQzNDQ1MDY3,size_16,color_FFFFFF,t_70px;"  alt="在这里插入图片描述"></p>
<ul>
<li>也就是说，业务场景如下：我们需要创造一个可以画出形状的图形：可以是画出长方形，正方形或者圆形。我们利用工厂类来有逻辑地创造这些类。</li>
</ul>
<ol>
<li><p>接口 形状 Shape.java</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.company.inter;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Shape</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">draw</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure></li>
<li><p>具体的实现子类.java</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.company.impl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.company.inter.Shape;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Circle</span> <span class="keyword">implements</span> <span class="title">Shape</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">draw</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;画出来的是圆形图案...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure></li>
</ol>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.company.impl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.company.inter.Shape;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Rectangle</span> <span class="keyword">implements</span> <span class="title">Shape</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">draw</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;画出来的是长方形图案...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.company.impl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.company.inter.Shape;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Square</span> <span class="keyword">implements</span> <span class="title">Shape</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">draw</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;画出来的是正方形图案...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<ol start="3">
<li><p>创造指定对象的工厂.java</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.company.factory;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.company.impl.Circle;</span><br><span class="line"><span class="keyword">import</span> com.company.impl.Rectangle;</span><br><span class="line"><span class="keyword">import</span> com.company.impl.Square;</span><br><span class="line"><span class="keyword">import</span> com.company.inter.Shape;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ShapeFactory</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Shape <span class="title">getShape</span><span class="params">(String specificShapeName)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//定义如何生成对象的逻辑</span></span><br><span class="line">        <span class="keyword">if</span> (specificShapeName.equals(<span class="string">&quot;Rectangle&quot;</span>)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> Rectangle();</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (specificShapeName.equals(<span class="string">&quot;Square&quot;</span>)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> Square();</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span> (specificShapeName.equals(<span class="string">&quot;Circle&quot;</span>)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> Circle();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure></li>
<li><p>测试的主函数Main.java</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.company;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.company.factory.ShapeFactory;</span><br><span class="line"><span class="keyword">import</span> com.company.inter.Shape;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        ShapeFactory shapeFactory = <span class="keyword">new</span> ShapeFactory();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//通过指定不同的名字 来创造不同的对象（依照具体的业务场景来定义不同的对象创建规则）</span></span><br><span class="line">        Shape s1 = shapeFactory.getShape(<span class="string">&quot;Circle&quot;</span>);</span><br><span class="line">        s1.draw();</span><br><span class="line"></span><br><span class="line">        Shape s2 = shapeFactory.getShape(<span class="string">&quot;Square&quot;</span>);</span><br><span class="line">        s2.draw();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure></li>
</ol>

        <h2 id="效果图"   >
          <a href="#效果图" class="heading-link"><i class="fas fa-link"></i></a><a href="#效果图" class="headerlink" title="效果图"></a>效果图</h2>
      <p><img   src="https://img-blog.csdnimg.cn/20210525211649951.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzQzNDQ1MDY3,size_16,color_FFFFFF,t_70" style="width: image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,tepx;height: t_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzQzNDQ1MDY3,size_16,color_FFFFFF,t_70px;"  alt="在这里插入图片描述"></p>
</div></div></article><article class="postlist-item post"><header class="post-header"><h1 class="post-title"><a class="post-title__link" href="/2021/05/23/Java%E6%8A%80%E5%B7%A7-%E9%85%8D%E7%BD%AE%E8%A7%86%E5%9B%BE%E8%A7%A3%E6%9E%90%E5%99%A8/">Java技巧_配置视图解析器</a></h1><div class="post-meta"><span class="post-meta-item post-meta-item--createtime"><span class="post-meta-item__icon"><i class="far fa-calendar-plus"></i></span><span class="post-meta-item__info">发表于</span><span class="post-meta-item__value">2021-05-23</span></span><span class="post-meta-item post-meta-item--updatetime"><span class="post-meta-item__icon"><i class="far fa-calendar-check"></i></span><span class="post-meta-item__info">更新于</span><span class="post-meta-item__value">2021-05-23</span></span><span class="post-meta-item post-meta-item--wordcount"><span class="post-meta-item__icon"><i class="far fa-file-word"></i></span><span class="post-meta-item__info">字数统计</span><span class="post-meta-item__value">105</span></span><span class="post-meta-item post-meta-item--readtime"><span class="post-meta-item__icon"><i class="far fa-clock"></i></span><span class="post-meta-item__info">阅读时长</span><span class="post-meta-item__value">1分</span></span></div></header><div class="post-body"><div class="post-excerpt">
        <h1 id="SpringBoot配置MVC视图解析"   >
          <a href="#SpringBoot配置MVC视图解析" class="heading-link"><i class="fas fa-link"></i></a><a href="#SpringBoot配置MVC视图解析" class="headerlink" title="SpringBoot配置MVC视图解析"></a>SpringBoot配置MVC视图解析</h1>
      <ul>
<li><strong>首先确保自己创建的是SpringBoot项目</strong></li>
</ul>
<p><strong>项目结构图如下：</strong><br><img   src="https://img-blog.csdnimg.cn/20210523113008103.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzQzNDQ1MDY3,size_16,color_FFFFFF,t_70" style="width: image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,tepx;height: t_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzQzNDQ1MDY3,size_16,color_FFFFFF,t_70px;"  alt="在这里插入图片描述"><br>接下来正式开始配置：</p>

        <h2 id="1-在SpringBoot的配置文件中"   >
          <a href="#1-在SpringBoot的配置文件中" class="heading-link"><i class="fas fa-link"></i></a><a href="#1-在SpringBoot的配置文件中" class="headerlink" title="1. 在SpringBoot的配置文件中"></a>1. 在SpringBoot的配置文件中</h2>
      <figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">spring.mvc.view.prefix=classpath:/<span class="keyword">static</span>/</span><br><span class="line">spring.mvc.view.suffix=.html</span><br></pre></td></tr></table></div></figure>
<p><mark>（主要看图配置！）</mark></p>

        <h2 id="2-Controller层写代码跳转即可"   >
          <a href="#2-Controller层写代码跳转即可" class="heading-link"><i class="fas fa-link"></i></a><a href="#2-Controller层写代码跳转即可" class="headerlink" title="2. Controller层写代码跳转即可"></a>2. Controller层写代码跳转即可</h2>
      <figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/user&quot;)</span></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span></span>&#123;</span><br><span class="line">	<span class="meta">@GetMapping(&quot;/index&quot;)</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">toIndex</span><span class="params">()</span></span>&#123;</span><br><span class="line">	    <span class="keyword">return</span> <span class="string">&quot;index&quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p><strong>注意，这里不能用@RestController注解</strong></p>
</div></div></article><article class="postlist-item post"><header class="post-header"><h1 class="post-title"><a class="post-title__link" href="/2021/05/22/SpringSecurity%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">Spring Security学习笔记</a></h1><div class="post-meta"><span class="post-meta-item post-meta-item--createtime"><span class="post-meta-item__icon"><i class="far fa-calendar-plus"></i></span><span class="post-meta-item__info">发表于</span><span class="post-meta-item__value">2021-05-22</span></span><span class="post-meta-item post-meta-item--updatetime"><span class="post-meta-item__icon"><i class="far fa-calendar-check"></i></span><span class="post-meta-item__info">更新于</span><span class="post-meta-item__value">2021-05-26</span></span><span class="post-meta-item post-meta-item--wordcount"><span class="post-meta-item__icon"><i class="far fa-file-word"></i></span><span class="post-meta-item__info">字数统计</span><span class="post-meta-item__value">5k</span></span><span class="post-meta-item post-meta-item--readtime"><span class="post-meta-item__icon"><i class="far fa-clock"></i></span><span class="post-meta-item__info">阅读时长</span><span class="post-meta-item__value">38分</span></span></div></header><div class="post-body"><div class="post-excerpt">
        <h1 id="安全保证框架"   >
          <a href="#安全保证框架" class="heading-link"><i class="fas fa-link"></i></a><a href="#安全保证框架" class="headerlink" title="安全保证框架"></a>安全保证框架</h1>
      <p>Shiro与Spring security</p>
<p><strong>他们之间很像，除了名字、类名不一样。</strong></p>

        <h2 id="Spring-Security"   >
          <a href="#Spring-Security" class="heading-link"><i class="fas fa-link"></i></a><a href="#Spring-Security" class="headerlink" title="Spring Security"></a>Spring Security</h2>
      <p><img   src="https://img-blog.csdnimg.cn/20210505205603112.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzQzNDQ1MDY3,size_16,color_FFFFFF,t_70" style="width: image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,tepx;height: t_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzQzNDQ1MDY3,size_16,color_FFFFFF,t_70px;"  alt="在这里插入图片描述"></p>
<ol>
<li><p>可以实现定制化身份认证 Authentication</p>
</li>
<li><p>权限控制 Access of Control</p>
</li>
</ol>
<p>权限：</p>
<ul>
<li><p>功能权限</p>
</li>
<li><p>访问权限</p>
</li>
<li><p>菜单权限</p>
</li>
</ul>
<p><strong>Spring Security 用于简化过滤器&amp;拦截器</strong></p>
<p><img   src="https://img-blog.csdnimg.cn/20210505210813433.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzQzNDQ1MDY3,size_16,color_FFFFFF,t_70" style="width: image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,tepx;height: t_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzQzNDQ1MDY3,size_16,color_FFFFFF,t_70px;"  alt="在这里插入图片描述"></p>
<ul>
<li><p>WebSecurityConfigurerAdapter：自定义Security策略（适配器模式）</p>
</li>
<li><p>AuthenticationManagerBuilder：自定义认证策略（建造者模式）</p>
</li>
</ul>

        <h2 id="AOP概念"   >
          <a href="#AOP概念" class="heading-link"><i class="fas fa-link"></i></a><a href="#AOP概念" class="headerlink" title="AOP概念"></a>AOP概念</h2>
      <p>我们不用改变原来项目的业务代码，而是在项目中加入<code>config</code>。帮我们去做一些事情</p>

        <h1 id="入门案例"   >
          <a href="#入门案例" class="heading-link"><i class="fas fa-link"></i></a><a href="#入门案例" class="headerlink" title="入门案例"></a>入门案例</h1>
      <ul>
<li><p>使用工具idea，新建一个Spring initize项目（只勾选一个web即可）</p>
</li>
<li><p>使用SpringBoot 2.2.1版本来使用: pom.xml文件中修改</p>
</li>
<li><p>添加springboot-security依赖</p>
</li>
</ul>

        <h2 id="修改controller-体验security"   >
          <a href="#修改controller-体验security" class="heading-link"><i class="fas fa-link"></i></a><a href="#修改controller-体验security" class="headerlink" title="修改controller 体验security"></a>修改controller 体验security</h2>
      <p>在controller包下新增TestController.java</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.GetMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/test&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/hello&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">add</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Hello, Spring Security!&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>


        <h2 id="修改默认端口（避免占用）"   >
          <a href="#修改默认端口（避免占用）" class="heading-link"><i class="fas fa-link"></i></a><a href="#修改默认端口（避免占用）" class="headerlink" title="修改默认端口（避免占用）"></a>修改默认端口（避免占用）</h2>
      <p>在application.properties中</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">server.port = <span class="number">8181</span></span><br></pre></td></tr></table></div></figure>


        <h2 id="启动项目并测试"   >
          <a href="#启动项目并测试" class="heading-link"><i class="fas fa-link"></i></a><a href="#启动项目并测试" class="headerlink" title="启动项目并测试"></a>启动项目并测试</h2>
      <figure class="highlight html"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">localhost:8181/test/hello</span><br></pre></td></tr></table></div></figure>

<p>系统会出现这个界面：<br><img   src="https://img-blog.csdnimg.cn/20210506150610548.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzQzNDQ1MDY3,size_16,color_FFFFFF,t_70" style="width: image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,tepx;height: t_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzQzNDQ1MDY3,size_16,color_FFFFFF,t_70px;"  alt="在这里插入图片描述"><br>Spring Security会强制让我们先登录。<br><img   src="https://img-blog.csdnimg.cn/2021050615072796.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzQzNDQ1MDY3,size_16,color_FFFFFF,t_70" style="width: image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,tepx;height: t_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzQzNDQ1MDY3,size_16,color_FFFFFF,t_70px;"  alt="在这里插入图片描述"></p>
<ol>
<li><p>默认的用户名：<code>user</code></p>
</li>
<li><p>控制台（如图）会出现我们的默认密码<code>Using generated security password</code></p>
</li>
</ol>
<p><strong>在正确输入后，会出现下图效果：</strong><br><img   src="https://img-blog.csdnimg.cn/20210506150809240.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzQzNDQ1MDY3,size_16,color_FFFFFF,t_70" style="width: image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,tepx;height: t_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzQzNDQ1MDY3,size_16,color_FFFFFF,t_70px;"  alt="在这里插入图片描述"></p>

        <h1 id="SpringSecurity-基本原理（过滤链）"   >
          <a href="#SpringSecurity-基本原理（过滤链）" class="heading-link"><i class="fas fa-link"></i></a><a href="#SpringSecurity-基本原理（过滤链）" class="headerlink" title="SpringSecurity 基本原理（过滤链）"></a>SpringSecurity 基本原理（过滤链）</h1>
      <p>Spring Security框架本质上就是<strong>一套的过滤器链 FilterChain</strong></p>
<p>也就是说，有很多的过滤器Filter，执行到具体方法时，就会进入过滤器，只有过滤器对其进行过滤放行，才能进入到下一个过滤器。</p>

        <h2 id="常见三个过滤器"   >
          <a href="#常见三个过滤器" class="heading-link"><i class="fas fa-link"></i></a><a href="#常见三个过滤器" class="headerlink" title="常见三个过滤器"></a>常见三个过滤器</h2>
      
        <h3 id="FilterSecurityInterceptor"   >
          <a href="#FilterSecurityInterceptor" class="heading-link"><i class="fas fa-link"></i></a><a href="#FilterSecurityInterceptor" class="headerlink" title="FilterSecurityInterceptor"></a>FilterSecurityInterceptor</h3>
      <p>FilterSecurityInterceptor是一个方法级的权限过滤器，具体有doFilter方法。</p>
<p>首先看之前的过滤器是否执行，如果执行，才执行自己的过滤器。</p>

        <h3 id="ExceptionTranslationFilter"   >
          <a href="#ExceptionTranslationFilter" class="heading-link"><i class="fas fa-link"></i></a><a href="#ExceptionTranslationFilter" class="headerlink" title="ExceptionTranslationFilter"></a>ExceptionTranslationFilter</h3>
      <p>ExceptionTranslationFilter是一个处理权限过程中，出现的异常问题的过滤器。依据每个不同的异常，做不同的处理。</p>

        <h3 id="UsernamePasswordAuthenticationFilter"   >
          <a href="#UsernamePasswordAuthenticationFilter" class="heading-link"><i class="fas fa-link"></i></a><a href="#UsernamePasswordAuthenticationFilter" class="headerlink" title="UsernamePasswordAuthenticationFilter"></a>UsernamePasswordAuthenticationFilter</h3>
      <p>对<code>/login</code>且使用POST请求过来的表单做一个用户名密码校验。</p>

        <h1 id="SpringSecurity-过滤器的加载过程"   >
          <a href="#SpringSecurity-过滤器的加载过程" class="heading-link"><i class="fas fa-link"></i></a><a href="#SpringSecurity-过滤器的加载过程" class="headerlink" title="SpringSecurity 过滤器的加载过程"></a>SpringSecurity 过滤器的加载过程</h1>
      
        <h2 id="使用Spring-Security配置过滤器"   >
          <a href="#使用Spring-Security配置过滤器" class="heading-link"><i class="fas fa-link"></i></a><a href="#使用Spring-Security配置过滤器" class="headerlink" title="使用Spring Security配置过滤器"></a>使用Spring Security配置过滤器</h2>
      <p>如果使用SpringBoot项目的话，自动帮我们集成以下的这些代码。</p>
<ul>
<li>如果不用SpringBoot项目集成SpringSecurity的话，需要写一个DelegationFilterProxy过滤器。</li>
</ul>
<p>而这个DelegationFilterProxy的doFilter方法中，有一个init初始化方法，这个初始化方法中，用于获得FilterChainProxy，这个Proxy中有一个doFilterInternal方法，这个方法中有一个<code>List&lt;Filter&gt;</code>很多个过滤器，并通过迭代的方式<code>getFilters</code>获得这些所有的过滤器。</p>

        <h1 id="SpringSecurity-中重要的接口"   >
          <a href="#SpringSecurity-中重要的接口" class="heading-link"><i class="fas fa-link"></i></a><a href="#SpringSecurity-中重要的接口" class="headerlink" title="SpringSecurity 中重要的接口"></a>SpringSecurity 中重要的接口</h1>
      
        <h2 id="UserDetailsService-用户细节信息接口"   >
          <a href="#UserDetailsService-用户细节信息接口" class="heading-link"><i class="fas fa-link"></i></a><a href="#UserDetailsService-用户细节信息接口" class="headerlink" title="UserDetailsService 用户细节信息接口"></a>UserDetailsService 用户细节信息接口</h2>
      <p>在实际开发中，我们的账号和密码，并不是Spring Security所默认的user和默认生成密码。</p>
<p>而都是从数据库中查询出来的。</p>
<p>因此，这个接口很方便我们进行自定义逻辑业务开发。</p>
<p><strong>实现这个UserDetailsService接口即可，在这个实现方法中，写查数据库的方法。</strong></p>
<ol>
<li><p>创建一个类，继承UsernamePasswordAuthenticationFilter过滤器（重写三个方法）</p>
</li>
<li><p> 创建一个类，重新UserDetailsService接口，编写查询数据过程，并返回User对象（这个对象由Security提供）</p>
</li>
</ol>

        <h2 id="PasswordEncoder-密码加密接口"   >
          <a href="#PasswordEncoder-密码加密接口" class="heading-link"><i class="fas fa-link"></i></a><a href="#PasswordEncoder-密码加密接口" class="headerlink" title="PasswordEncoder 密码加密接口"></a>PasswordEncoder 密码加密接口</h2>
      <p>在上一个<strong>UserDetailsService</strong>中我们<strong>需要返回一个Spring Security框架中的User对象，在这个对象中的密码，必须是要返回加密后的密码。而不能是明文。</strong></p>

        <h1 id="Web项目中-认证-amp-授权-思路"   >
          <a href="#Web项目中-认证-amp-授权-思路" class="heading-link"><i class="fas fa-link"></i></a><a href="#Web项目中-认证-amp-授权-思路" class="headerlink" title="Web项目中 认证&amp;授权 思路"></a>Web项目中 认证&amp;授权 思路</h1>
      <p><strong>认证 Authentication</strong>： 就是用户在登录Web中，利用自己的用户名与密码，进行用户认证。</p>

        <h2 id="设置登录的用户名与密码"   >
          <a href="#设置登录的用户名与密码" class="heading-link"><i class="fas fa-link"></i></a><a href="#设置登录的用户名与密码" class="headerlink" title="设置登录的用户名与密码"></a>设置登录的用户名与密码</h2>
      <ol>
<li><p>通过 application.properties 配置文件进行配置</p>
</li>
<li><p>通过配置类</p>
</li>
<li><p>通过自定义编写实现类，实现UserDetialsService，返回这个User对象即可</p>
</li>
</ol>

        <h3 id="1-通过配置文件"   >
          <a href="#1-通过配置文件" class="heading-link"><i class="fas fa-link"></i></a><a href="#1-通过配置文件" class="headerlink" title="1. 通过配置文件"></a>1. 通过配置文件</h3>
      <p><img   src="https://img-blog.csdnimg.cn/20210506154818396.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzQzNDQ1MDY3,size_16,color_FFFFFF,t_70" style="width: image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,tepx;height: t_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzQzNDQ1MDY3,size_16,color_FFFFFF,t_70px;"  alt="在这里插入图片描述"><br>配置代码如下：</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">spring.security.user.name = user</span><br><span class="line">spring.security.user.password = <span class="number">123456</span></span><br></pre></td></tr></table></div></figure>



        <h2 id="2-通过自定义配置类"   >
          <a href="#2-通过自定义配置类" class="heading-link"><i class="fas fa-link"></i></a><a href="#2-通过自定义配置类" class="headerlink" title="2. 通过自定义配置类"></a>2. 通过自定义配置类</h2>
      <ol>
<li><p>添加注解@configuration</p>
</li>
<li><p>继承WebSecurityConfigurerAdapter类</p>
</li>
<li><p>重写这个类的方法（如下图）<br><img   src="https://img-blog.csdnimg.cn/20210506155540523.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzQzNDQ1MDY3,size_16,color_FFFFFF,t_70" style="width: image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,tepx;height: t_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzQzNDQ1MDY3,size_16,color_FFFFFF,t_70px;"  alt="在这里插入图片描述"></p>
</li>
</ol>
<p><strong>在重写这个方法时，我们利用auth来配置用户信息，对于密码需要加密。</strong></p>
<p>而且，<strong>要记得加一个@bean注解用于验证PasswordEncoder映射</strong>，否则会报错。</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.config.annotation.authentication.builders.AuthenticationManagerBuilder;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.config.annotation.web.configuration.WebSecurityConfigurerAdapter;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.crypto.password.PasswordEncoder;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SecurityConfig</span>  <span class="keyword">extends</span> <span class="title">WebSecurityConfigurerAdapter</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">configure</span><span class="params">(AuthenticationManagerBuilder auth)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="comment">//利用这个auth来设置登录的用户信息</span></span><br><span class="line">        <span class="comment">// 密码需要加密</span></span><br><span class="line">        BCryptPasswordEncoder bCryptPasswordEncoder = <span class="keyword">new</span> BCryptPasswordEncoder();</span><br><span class="line">        String  passwordEncoded =  bCryptPasswordEncoder.encode(<span class="string">&quot;123456&quot;</span>);</span><br><span class="line">        auth.inMemoryAuthentication().withUser(<span class="string">&quot;user&quot;</span>).password(passwordEncoded).roles(<span class="string">&quot;admin&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function">PasswordEncoder <span class="title">passwordEncoder</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> BCryptPasswordEncoder();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p>现在我们可以用这个<strong>用户名user 密码123456</strong>去登录了。而这个user用户，具有的角色是：<strong>admin</strong></p>

        <h2 id="3-利用UserDetailsService接口配置（开发经常用）"   >
          <a href="#3-利用UserDetailsService接口配置（开发经常用）" class="heading-link"><i class="fas fa-link"></i></a><a href="#3-利用UserDetailsService接口配置（开发经常用）" class="headerlink" title="3. 利用UserDetailsService接口配置（开发经常用）"></a>3. 利用UserDetailsService接口配置（开发经常用）</h2>
      <ol>
<li><p>创建配置类，auth使用UserDetailsService(注入一个UserDetailsService类)</p>
</li>
<li><p>编写实现类，<strong>返回User对象，这个对象由用户名、密码以及权限</strong></p>
</li>
</ol>

        <h3 id="创建配置类SecurityUserServiceConfig"   >
          <a href="#创建配置类SecurityUserServiceConfig" class="heading-link"><i class="fas fa-link"></i></a><a href="#创建配置类SecurityUserServiceConfig" class="headerlink" title="创建配置类SecurityUserServiceConfig"></a>创建配置类SecurityUserServiceConfig</h3>
      <figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.vincent.securitydemo.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.config.annotation.authentication.builders.AuthenticationManagerBuilder;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.config.annotation.web.configuration.WebSecurityConfigurerAdapter;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.core.userdetails.UserDetailsService;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.crypto.password.PasswordEncoder;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SecurityUserServiceConfig</span> <span class="keyword">extends</span> <span class="title">WebSecurityConfigurerAdapter</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserDetailsService userDetailsService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">configure</span><span class="params">(AuthenticationManagerBuilder auth)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        auth</span><br><span class="line">                .userDetailsService(userDetailsService)</span><br><span class="line">                .passwordEncoder(passwordEncoder());</span><br><span class="line">                <span class="comment">//1. 使用UserDetailsService</span></span><br><span class="line">                <span class="comment">//2. 使用返回的PasswordEncoder @Bean加密</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function">PasswordEncoder <span class="title">passwordEncoder</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> BCryptPasswordEncoder();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>


        <h3 id="编写实现类MyUserDetailsService"   >
          <a href="#编写实现类MyUserDetailsService" class="heading-link"><i class="fas fa-link"></i></a><a href="#编写实现类MyUserDetailsService" class="headerlink" title="编写实现类MyUserDetailsService"></a>编写实现类MyUserDetailsService</h3>
      <p>编写一个实现类MyUserDetailsService去实现UserDetailsService（我们的配置类需要），重写这个loadUserByUsername方法加载用户信息。</p>
<p>注意：@Service(“userDetailsService”)</p>
<p>这个参数要与配置类中，@Autowire自动装配的名字一样。不然找不到。</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.vincent.securitydemo.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.security.core.GrantedAuthority;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.core.authority.AuthorityUtils;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.core.userdetails.User;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.core.userdetails.UserDetails;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.core.userdetails.UserDetailsService;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.core.userdetails.UsernameNotFoundException;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Service(&quot;userDetailsService&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyUserDetailsService</span> <span class="keyword">implements</span> <span class="title">UserDetailsService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> UserDetails <span class="title">loadUserByUsername</span><span class="params">(String s)</span> <span class="keyword">throws</span> UsernameNotFoundException </span>&#123;</span><br><span class="line">        <span class="comment">// 手动代替查询数据库操作</span></span><br><span class="line">        List&lt;GrantedAuthority&gt; authorityList = AuthorityUtils.commaSeparatedStringToAuthorityList(<span class="string">&quot;role&quot;</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> User(<span class="string">&quot;user&quot;</span>, <span class="keyword">new</span> BCryptPasswordEncoder().encode(<span class="string">&quot;123456&quot;</span>), authorityList);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<ul>
<li>注意，我们返回的User对象有三个参数：用户名，加密后的密码以及一个Collection表示具有的权限集合</li>
</ul>

        <h2 id="加入数据库操作-到MyUserDetailsService实现类中"   >
          <a href="#加入数据库操作-到MyUserDetailsService实现类中" class="heading-link"><i class="fas fa-link"></i></a><a href="#加入数据库操作-到MyUserDetailsService实现类中" class="headerlink" title="加入数据库操作 到MyUserDetailsService实现类中"></a>加入数据库操作 到MyUserDetailsService实现类中</h2>
      <p><strong>整合MybatisPlus进入到这一步，实现具体的数据库操作。</strong></p>

        <h3 id="引入相关依赖"   >
          <a href="#引入相关依赖" class="heading-link"><i class="fas fa-link"></i></a><a href="#引入相关依赖" class="headerlink" title="引入相关依赖"></a>引入相关依赖</h3>
      <ol>
<li><p>引入MybatisPlus依赖</p>
</li>
<li><p>引入MySQL依赖</p>
</li>
<li><p>引入工具类Lombok 方便实体类注解</p>
</li>
</ol>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--web项目依赖--&gt;</span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;</span><br><span class="line">        &lt;/dependency&gt;</span><br><span class="line"></span><br><span class="line">        &lt;!--security依赖--&gt;</span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;</span><br><span class="line">        &lt;/dependency&gt;</span><br><span class="line"></span><br><span class="line">        &lt;!--pojo注解生成get、set方法--&gt;</span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;lombok&lt;/artifactId&gt;</span><br><span class="line">        &lt;/dependency&gt;</span><br><span class="line"></span><br><span class="line">        &lt;!--mybatis依赖--&gt;</span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;com.baomidou&lt;/groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;mybatis-plus-boot-starter&lt;/artifactId&gt;</span><br><span class="line">            &lt;version&gt;<span class="number">3.1</span><span class="number">.1</span>&lt;/version&gt;</span><br><span class="line">        &lt;/dependency&gt;</span><br><span class="line"></span><br><span class="line">        &lt;!--MySQL依赖--&gt;</span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;mysql&lt;/groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;</span><br><span class="line">        &lt;/dependency&gt;</span><br><span class="line"></span><br><span class="line">        &lt;!--测试依赖--&gt;</span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;</span><br><span class="line">            &lt;scope&gt;test&lt;/scope&gt;</span><br><span class="line">            &lt;exclusions&gt;</span><br><span class="line">                &lt;exclusion&gt;</span><br><span class="line">                    &lt;groupId&gt;org.junit.vintage&lt;/groupId&gt;</span><br><span class="line">                    &lt;artifactId&gt;junit-vintage-engine&lt;/artifactId&gt;</span><br><span class="line">                &lt;/exclusion&gt;</span><br><span class="line">            &lt;/exclusions&gt;</span><br><span class="line">        &lt;/dependency&gt;</span><br></pre></td></tr></table></div></figure>


        <h3 id="处理数据库中的User表"   >
          <a href="#处理数据库中的User表" class="heading-link"><i class="fas fa-link"></i></a><a href="#处理数据库中的User表" class="headerlink" title="处理数据库中的User表"></a>处理数据库中的User表</h3>
      <ol>
<li><p>id 自增数字主键</p>
</li>
<li><p>username varchar类型</p>
</li>
<li><p>password varchar类型</p>
</li>
</ol>

        <h3 id="处理Mapper-继承Mybatis-给我们写好的基本Mapper即可"   >
          <a href="#处理Mapper-继承Mybatis-给我们写好的基本Mapper即可" class="heading-link"><i class="fas fa-link"></i></a><a href="#处理Mapper-继承Mybatis-给我们写好的基本Mapper即可" class="headerlink" title="处理Mapper 继承Mybatis+ 给我们写好的基本Mapper即可"></a>处理Mapper 继承Mybatis+ 给我们写好的基本Mapper即可</h3>
      <ol>
<li>创建mapper包 UserMapper接口 extends BaseMapper<T> 泛型</li>
</ol>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.vincent.securitydemo.mapper;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.core.mapper.BaseMapper;</span><br><span class="line"><span class="keyword">import</span> com.vincent.securitydemo.entity.User;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Repository</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserMapper</span> <span class="keyword">extends</span> <span class="title">BaseMapper</span>&lt;<span class="title">User</span>&gt; </span>&#123;</span><br><span class="line">	</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></div></figure>


        <h3 id="重写之前MyUserDetailsService实现类中的方法-通过数据库查询"   >
          <a href="#重写之前MyUserDetailsService实现类中的方法-通过数据库查询" class="heading-link"><i class="fas fa-link"></i></a><a href="#重写之前MyUserDetailsService实现类中的方法-通过数据库查询" class="headerlink" title="重写之前MyUserDetailsService实现类中的方法 通过数据库查询"></a>重写之前MyUserDetailsService实现类中的方法 通过数据库查询</h3>
      <ol>
<li>Service实现类中 注入UserMapper对象</li>
</ol>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service(&quot;userDetailsService&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyUserDetailsService</span> <span class="keyword">implements</span> <span class="title">UserDetailsService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserMapper userMapper;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> UserDetails <span class="title">loadUserByUsername</span><span class="params">(String s)</span> <span class="keyword">throws</span> UsernameNotFoundException </span>&#123;</span><br><span class="line">        </span><br><span class="line">		<span class="comment">// 数据库查询语句 用于认证用户</span></span><br><span class="line">        <span class="comment">//并最终返回Security框架中的User对象</span></span><br><span class="line">		<span class="keyword">return</span> ...;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<ol start="2">
<li><p>利用Mybatis-plus中的QueryWrapper帮我们规定查询满足的条件 并通过UserMapper中的查询方法，注意判断<strong>根据用户名查询出来的User对象（我们定义的Entity）是否为空</strong></p>
</li>
<li><p>最终<strong>返回Spring Security框架自己的User对象</strong></p>
</li>
</ol>
<p><mark>注意看代码中的注释内容！！！</mark></p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.vincent.securitydemo.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.core.conditions.query.QueryWrapper;</span><br><span class="line"><span class="keyword">import</span> com.vincent.securitydemo.entity.User;</span><br><span class="line"><span class="keyword">import</span> com.vincent.securitydemo.mapper.UserMapper;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.core.GrantedAuthority;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.core.authority.AuthorityUtils;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.core.userdetails.UserDetails;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.core.userdetails.UserDetailsService;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.core.userdetails.UsernameNotFoundException;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.crypto.password.PasswordEncoder;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Service(&quot;userDetailsService&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyUserDetailsService</span> <span class="keyword">implements</span> <span class="title">UserDetailsService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserMapper userMapper;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> UserDetails <span class="title">loadUserByUsername</span><span class="params">(String username)</span> <span class="keyword">throws</span> UsernameNotFoundException </span>&#123;</span><br><span class="line">        <span class="comment">//数据库查询语句 用于认证用户</span></span><br><span class="line">        <span class="comment">//参数中的s 即代表用户提交表单中的用户名</span></span><br><span class="line">        <span class="comment">//现在我们要根据用户名 去查询对应的数据库中是否存在这个数据</span></span><br><span class="line"></span><br><span class="line">        QueryWrapper&lt;User&gt; wrapper = <span class="keyword">new</span> QueryWrapper&lt;&gt;(); <span class="comment">//条件构造器 通过这个构造器去做查询 类似UserExample</span></span><br><span class="line">        wrapper.eq(<span class="string">&quot;username&quot;</span>, username);</span><br><span class="line">        User user = userMapper.selectOne(wrapper);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (user == <span class="keyword">null</span>) &#123; <span class="comment">//认证失败 没有存在的用户</span></span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> UsernameNotFoundException(<span class="string">&quot;用户名不存在&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//注意我们返回的不是自己的实体类User</span></span><br><span class="line">        <span class="comment">//而是security框架给我们提供的User类</span></span><br><span class="line">        List&lt;GrantedAuthority&gt; authorityList = AuthorityUtils.commaSeparatedStringToAuthorityList(<span class="string">&quot;role&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> org.springframework.security.core.userdetails.User(user.getUsername(), <span class="keyword">new</span> BCryptPasswordEncoder().encode(user.getPassword()), authorityList);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<ol start="4">
<li><strong>这一步很关键</strong> 我们要<strong>在SpringBoot启动类中 加一个注解@MapperScan 启动Mapper 不然的话无法识别我们的Mapper</strong></li>
</ol>
<p>SecuritydemoApplication.java</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.vincent.securitydemo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.mybatis.spring.annotation.MapperScan;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@MapperScan(&quot;com.vincent.securitydemo.mapper&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SecuritydemoApplication</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SpringApplication.run(SecuritydemoApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<ol start="5">
<li>application.properties 配置文件中 配置数据库信息</li>
</ol>
<p>对于本SpringSecurity测试的SpringBoot版本是SpringBoot 2.2.1 Release</p>
<p>因此，<strong>在引入数据库驱动时，如果使用的是MySQL8.0驱动且加入时区</strong></p>
<p>引入时，应使用：<code>com.mysql.cj.jdbc.Driver </code></p>
<figure class="highlight yml"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">server.port</span> <span class="string">=</span> <span class="number">8181</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#可直接通过配置文件 来配置用户信息</span></span><br><span class="line"><span class="comment">#spring.security.user.name=user</span></span><br><span class="line"><span class="comment">#spring.security.user.password=123456</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#数据库连接</span></span><br><span class="line"><span class="string">spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver</span></span><br><span class="line"><span class="string">spring.datasource.url</span> <span class="string">=</span> <span class="string">jdbc:mysql://localhost:3306/securitydemo?characterEncoding=utf-8&amp;serverTimezone=GMT%2B8</span></span><br><span class="line"><span class="string">spring.datasource.username</span> <span class="string">=</span> <span class="string">root</span></span><br><span class="line"><span class="string">spring.datasource.password</span> <span class="string">=</span> <span class="number">123456</span></span><br><span class="line"></span><br><span class="line"><span class="string">spring.jpa.show-sql</span> <span class="string">=</span> <span class="literal">true</span> </span><br></pre></td></tr></table></div></figure>


        <h1 id="自定义登录页面-amp-设置路径不需要认证"   >
          <a href="#自定义登录页面-amp-设置路径不需要认证" class="heading-link"><i class="fas fa-link"></i></a><a href="#自定义登录页面-amp-设置路径不需要认证" class="headerlink" title="自定义登录页面&amp;设置路径不需要认证"></a>自定义登录页面&amp;设置路径不需要认证</h1>
      <p><strong>在实际的业务开发中，我们需要自己的好看的登录页面。因此接下来我们将指定登录的页面。</strong></p>
<p><strong>在实际的业务开发中，有些Controller是不需要进行验证用户权限的。我们也进行设置。</strong></p>
<p><mark>主要思路就是，在 SecurityConfig 配置类中，配置一下就可以了。</mark></p>
<p>值得注意的是，现在我们还是用到configure方法，但是里面的参数不是<code>AuthenticationManagerBuilder auth</code>，而是<code>HttpSecurity http。</code></p>
<p>我们通过<code>http.formLogin()</code> 进行一系列的设置</p>
<ol>
<li><p>设置默认登录页面的路径</p>
</li>
<li><p>设置默认登录的请求路径（SpringSecurity自动帮我们实现）</p>
</li>
<li><p>设置默认登录成功跳转的路径</p>
</li>
<li><p>设置哪些路径不需要认证，直接通过</p>
</li>
</ol>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.vincent.securitydemo.config;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.config.annotation.authentication.builders.AuthenticationManagerBuilder;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.config.annotation.web.builders.HttpSecurity;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.config.annotation.web.configuration.WebSecurityConfigurerAdapter;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.core.userdetails.UserDetailsService;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.crypto.password.PasswordEncoder;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SecurityUserServiceConfig</span> <span class="keyword">extends</span> <span class="title">WebSecurityConfigurerAdapter</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserDetailsService userDetailsService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">configure</span><span class="params">(AuthenticationManagerBuilder auth)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="comment">//配置用户认证</span></span><br><span class="line">        auth</span><br><span class="line">                .userDetailsService(userDetailsService)</span><br><span class="line">                .passwordEncoder(passwordEncoder());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">configure</span><span class="params">(HttpSecurity http)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="comment">//完成与HTTP请求的配置设置</span></span><br><span class="line">        http.formLogin()</span><br><span class="line">                .loginPage(<span class="string">&quot;/login.html&quot;</span>) </span><br><span class="line">                 <span class="comment">//自定义自己编写的登录页面 参数是地址</span></span><br><span class="line">                .</span><br><span class="line">                loginProcessingUrl(<span class="string">&quot;/user/login&quot;</span>)  </span><br><span class="line">                <span class="comment">//定义登录访问的请求路径 但是这个具体的方法过程由SpringSecurity实现</span></span><br><span class="line">                </span><br><span class="line">                .failureUrl(<span class="string">&quot;/error.html&quot;</span>)</span><br><span class="line">                <span class="comment">//定义登录错误跳转的页面 参数是地址</span></span><br><span class="line"></span><br><span class="line">                .defaultSuccessUrl(<span class="string">&quot;index.html&quot;</span>).permitAll()   </span><br><span class="line">                <span class="comment">//定义默认登录成功后 跳转到的路径</span></span><br><span class="line">                </span><br><span class="line">                .and().authorizeRequests().antMatchers(<span class="string">&quot;/&quot;</span>, <span class="string">&quot;/test/hello&quot;</span>, <span class="string">&quot;/user/login&quot;</span>).permitAll()</span><br><span class="line">                .anyRequest().authenticated()</span><br><span class="line">                <span class="comment">//授权通过，这些路径是不需要认证，直接让它过！</span></span><br><span class="line">                </span><br><span class="line">                .and().csrf().disable(); <span class="comment">//关闭CSRF认证方式</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function">PasswordEncoder <span class="title">passwordEncoder</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> BCryptPasswordEncoder();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p><strong>现在我们只需要，一个登录页面，一个处理登录成功的controller</strong></p>
<ul>
<li>注意我们这里的action值，必须<strong>跟config中配置的请求路径相同</strong>，而且<strong>name只能是用户名和密码</strong>。 </li>
</ul>
<p><em>resources/static/login.html</em></p>
<figure class="highlight html"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;/user/login&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">        用户名：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span>&gt;</span> <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">        密码： <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;登录&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></div></figure>
<p><em>resources/static/error.html</em></p>
<figure class="highlight html"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>错误页面<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>抱歉，登录错误！<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></div></figure>

<p><em>resources/static/index.html</em></p>
<figure class="highlight html"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>主页面<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>登录成功，这是主界面！<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></div></figure>

<p><em>controller/TestController.java</em></p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping(&quot;/index&quot;)</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> String <span class="title">toIndex</span><span class="params">()</span></span>&#123;</span><br><span class="line">       <span class="keyword">return</span> <span class="string">&quot;Hello, Index!&quot;</span>;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></div></figure>


        <h1 id="基于角色或者权限的访问控制"   >
          <a href="#基于角色或者权限的访问控制" class="heading-link"><i class="fas fa-link"></i></a><a href="#基于角色或者权限的访问控制" class="headerlink" title="基于角色或者权限的访问控制"></a>基于角色或者权限的访问控制</h1>
      
        <h2 id="1-hasAuthority方法"   >
          <a href="#1-hasAuthority方法" class="heading-link"><i class="fas fa-link"></i></a><a href="#1-hasAuthority方法" class="headerlink" title="1. hasAuthority方法"></a>1. hasAuthority方法</h2>
      <p><strong>对于这个方法，如果用户具有指定的权限，则返回True，否则返回False.</strong></p>
<p><strong># 在config中声明只有哪些权限可以通过这个路径请求</strong><br><img   src="https://img-blog.csdnimg.cn/20210522204147176.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzQzNDQ1MDY3,size_16,color_FFFFFF,t_70" style="width: image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,tepx;height: t_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzQzNDQ1MDY3,size_16,color_FFFFFF,t_70px;"  alt="在这里插入图片描述"></p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//只有具有admin权限 才能访问这个/test/index这个路径(同时在Service中加入admin）</span></span><br><span class="line">.antMatchers(<span class="string">&quot;/test/index&quot;</span>).hasAuthority(<span class="string">&quot;admin&quot;</span>)</span><br></pre></td></tr></table></div></figure>

<p><strong># Service中加入这些权限</strong></p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//在Service中加入admin权限</span></span><br><span class="line">List&lt;GrantedAuthority&gt; authorityList = AuthorityUtils.commaSeparatedStringToAuthorityList(<span class="string">&quot;admin&quot;</span>);</span><br></pre></td></tr></table></div></figure>

<p><img   src="https://img-blog.csdnimg.cn/20210522205711287.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzQzNDQ1MDY3,size_16,color_FFFFFF,t_70" style="width: image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,tepx;height: t_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzQzNDQ1MDY3,size_16,color_FFFFFF,t_70px;"  alt="在这里插入图片描述"><br>当出现上述图片时，<strong>代表403权限不够！</strong></p>

        <h2 id="2-hasAnyAuthority"   >
          <a href="#2-hasAnyAuthority" class="heading-link"><i class="fas fa-link"></i></a><a href="#2-hasAnyAuthority" class="headerlink" title="2. hasAnyAuthority"></a>2. hasAnyAuthority</h2>
      <ul>
<li>当某个请求对于声明的角色中，<strong>任意一个角色都可以</strong>通过时使用。</li>
</ul>
<p><strong>比如对于学生的管理，教师Teacher与管理员Admin都可以访问这些接口路径。</strong></p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.antMatchers(<span class="string">&quot;/test/index&quot;</span>).hasAnyAuthority(<span class="string">&quot;admin,teacher&quot;</span>)</span><br></pre></td></tr></table></div></figure>

<p>则表示，当权限为teacher或者admin…等等时（用逗号隔开即可）都允许通过！</p>

        <h2 id="3-hasRole"   >
          <a href="#3-hasRole" class="heading-link"><i class="fas fa-link"></i></a><a href="#3-hasRole" class="headerlink" title="3. hasRole"></a>3. hasRole</h2>
      <ul>
<li>基本用法不变，但是源码显示：它会将我们<strong>声明的角色名xxx</strong>变成<strong>ROLE_+xxx。</strong></li>
</ul>
<p>因此，我们在Service中，声明具有的角色时，<strong>应该手动添加为ROLE_xxx。</strong></p>
<p>#配置类</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.antMatchers(<span class="string">&quot;/test/index&quot;</span>).hasRole(<span class="string">&quot;salesman&quot;</span>)</span><br></pre></td></tr></table></div></figure>

<p>#Service声明具有的权限</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">List&lt;GrantedAuthority&gt; authorityList = AuthorityUtils.commaSeparatedStringToAuthorityList(<span class="string">&quot;admin,Role_salesman&quot;</span>);</span><br></pre></td></tr></table></div></figure>


        <h2 id="4-hasAnyRole"   >
          <a href="#4-hasAnyRole" class="heading-link"><i class="fas fa-link"></i></a><a href="#4-hasAnyRole" class="headerlink" title="4.  hasAnyRole"></a>4.  hasAnyRole</h2>
      <p><strong>用法与hasAnyAutority一致。</strong></p>

        <h1 id="自定义无权限403页面"   >
          <a href="#自定义无权限403页面" class="heading-link"><i class="fas fa-link"></i></a><a href="#自定义无权限403页面" class="headerlink" title="自定义无权限403页面"></a>自定义无权限403页面</h1>
      <ul>
<li>在配置类中，配置自定义403页面即可。</li>
</ul>
<p><img   src="https://img-blog.csdnimg.cn/20210522210640704.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzQzNDQ1MDY3,size_16,color_FFFFFF,t_70" style="width: image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,tepx;height: t_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzQzNDQ1MDY3,size_16,color_FFFFFF,t_70px;"  alt="在这里插入图片描述"></p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http.exceptionHandling().accessDeniedPage(<span class="string">&quot;/unauth.html&quot;</span>);</span><br></pre></td></tr></table></div></figure>

<p>如果满足无权限条件的话，会跳转到这个页面。<br><img   src="https://img-blog.csdnimg.cn/20210522210800475.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzQzNDQ1MDY3,size_16,color_FFFFFF,t_70" style="width: image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,tepx;height: t_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzQzNDQ1MDY3,size_16,color_FFFFFF,t_70px;"  alt="在这里插入图片描述"></p>

        <h1 id="SpringSecurity-认证-amp-授权-常见的注解"   >
          <a href="#SpringSecurity-认证-amp-授权-常见的注解" class="heading-link"><i class="fas fa-link"></i></a><a href="#SpringSecurity-认证-amp-授权-常见的注解" class="headerlink" title="SpringSecurity 认证&amp;授权 常见的注解"></a>SpringSecurity 认证&amp;授权 常见的注解</h1>
      <ul>
<li>注解的作用，就是简化开发。</li>
</ul>

        <h2 id="Secured-“ROLE-XXX-ROLE-YYY”"   >
          <a href="#Secured-“ROLE-XXX-ROLE-YYY”" class="heading-link"><i class="fas fa-link"></i></a><a href="#Secured-“ROLE-XXX-ROLE-YYY”" class="headerlink" title="@Secured(“ROLE_XXX, ROLE_YYY”)"></a>@Secured(“ROLE_XXX, ROLE_YYY”)</h2>
      <p><strong>这个注解表示：用户具有某个角色，可以根据这个角色来访问相应的接口。</strong></p>
<p><strong>使用这个注解时，我们要打开注解功能：</strong></p>
<ol>
<li><p>添加注解到<strong>Springboot启动类</strong>或者<strong>Config配置类</strong>上：</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@EnableGlobalMethodSecurity(securedEnabled = true)</span></span><br></pre></td></tr></table></div></figure></li>
<li><p>在Controller的方法上面，使用这个注解，自动为我们判断角色权限。</p>
</li>
</ol>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping(&quot;/deleteUser&quot;)</span></span><br><span class="line"><span class="meta">@Secured(&quot;ROLE_admin&quot;)</span></span><br><span class="line"> <span class="function"><span class="keyword">public</span> String <span class="title">deleteUser</span><span class="params">()</span></span>&#123;</span><br><span class="line">     <span class="keyword">return</span> <span class="string">&quot;通过权限，这是删除页面！&quot;</span>;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></div></figure>

<p><strong>表示这个方法，必须要具有admin角色才能进入。</strong></p>

        <h2 id="PreAuthorize"   >
          <a href="#PreAuthorize" class="heading-link"><i class="fas fa-link"></i></a><a href="#PreAuthorize" class="headerlink" title="@PreAuthorize"></a>@PreAuthorize</h2>
      <ul>
<li>这个是<strong>在方法执行之前进行校验。</strong></li>
</ul>
<ol>
<li><p>在启动类相同位置，逗号，开启<strong>prePostEnabled = true</strong></p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@EnableGlobalMethodSecurity(securedEnabled = true, prePostEnabled = true)</span></span><br></pre></td></tr></table></div></figure></li>
<li><p>在相应方法上，加入注解**@PreAuthorize()**</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping(&quot;/updateUser&quot;)</span></span><br><span class="line"><span class="meta">@PreAuthorize(&quot;hasRole(&#x27;ROLE_admin&#x27;)&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">updateUser</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;通过权限，这是更改页面！&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure></li>
</ol>
<p><img   src="https://img-blog.csdnimg.cn/20210522212525782.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzQzNDQ1MDY3,size_16,color_FFFFFF,t_70" style="width: image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,tepx;height: t_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzQzNDQ1MDY3,size_16,color_FFFFFF,t_70px;"  alt="在这里插入图片描述"><br>可以看到，这里可以选择之前的四种：</p>
<ol>
<li>hasRole</li>
<li>hasAnyRole</li>
<li>hasAuthority</li>
<li>hasAnyAuthority</li>
</ol>
<ul>
<li>注意涉及到Role时，手动添加<strong>ROLE_XXX</strong>即可。</li>
</ul>

        <h2 id="PostAuthorize"   >
          <a href="#PostAuthorize" class="heading-link"><i class="fas fa-link"></i></a><a href="#PostAuthorize" class="headerlink" title="@PostAuthorize"></a>@PostAuthorize</h2>
      <ul>
<li><p>这种方式用得频率比较少，<strong>代表：执行方法之后，再进行校验</strong>。<strong>一般适用于，带有返回值的校验方式！</strong></p>
</li>
<li><p><em>也就是说，方法是一定会执行的。</em>*</p>
</li>
</ul>
<p>只不过是，方法执行后，遇到了403权限错误。</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping(&quot;/afterMethodVerify&quot;)</span></span><br><span class="line"><span class="meta">@PostAuthorize(&quot;hasRole(&#x27;ROLE_admin&#x27;)&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">afterMethodVerify</span><span class="params">()</span></span>&#123;</span><br><span class="line">	System.out.println(<span class="string">&#x27;一定会执行的！&#x27;</span>);</span><br><span class="line">   <span class="keyword">return</span> <span class="string">&quot;通过权限，这是目标页面！&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>


        <h1 id="用户实现注销"   >
          <a href="#用户实现注销" class="heading-link"><i class="fas fa-link"></i></a><a href="#用户实现注销" class="headerlink" title="用户实现注销"></a>用户实现注销</h1>
      
        <h2 id="1-配置注销的请求路径以及注销成功后跳转的URL（可以是HTML）"   >
          <a href="#1-配置注销的请求路径以及注销成功后跳转的URL（可以是HTML）" class="heading-link"><i class="fas fa-link"></i></a><a href="#1-配置注销的请求路径以及注销成功后跳转的URL（可以是HTML）" class="headerlink" title="1. 配置注销的请求路径以及注销成功后跳转的URL（可以是HTML）"></a>1. 配置注销的请求路径以及注销成功后跳转的URL（可以是HTML）</h2>
      <figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//配置注销</span></span><br><span class="line">http.logout().logoutUrl(<span class="string">&quot;/logout&quot;</span>).logoutSuccessUrl(<span class="string">&quot;/login.html&quot;</span>).permitAll();</span><br></pre></td></tr></table></div></figure>

<p><strong>这里可以看到，我们配置注销url是/logout（框架内置）</strong></p>
<p><strong>并且当成功注销后，跳转到login.html。</strong></p>

        <h2 id="2-在任意页面中添加-login请求路径"   >
          <a href="#2-在任意页面中添加-login请求路径" class="heading-link"><i class="fas fa-link"></i></a><a href="#2-在任意页面中添加-login请求路径" class="headerlink" title="2.在任意页面中添加/login请求路径"></a>2.在任意页面中添加/login请求路径</h2>
      <p><strong>比如我们可以在登录后跳转的主界面index.html中，加入一个超链接:</strong></p>
<figure class="highlight html"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;/logout&quot;</span>&gt;</span>点我注销<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></div></figure>
<p><strong>这样就可以实现了。</strong></p>
<p>测试如下：</p>
<p><strong>1. 在未认证的情况下，访问index.html。</strong><br><img   src="https://img-blog.csdnimg.cn/20210523135635391.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzQzNDQ1MDY3,size_16,color_FFFFFF,t_70" style="width: image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,tepx;height: t_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzQzNDQ1MDY3,size_16,color_FFFFFF,t_70px;"  alt="在这里插入图片描述"><br><strong>此时会自动跳转到，login.html登录页面。</strong></p>
<ol start="2">
<li>登录之后<strong>进入index.html</strong>此时点击该页面上的<strong>注销锚点</strong></li>
</ol>
<p><img   src="https://img-blog.csdnimg.cn/20210523140202814.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzQzNDQ1MDY3,size_16,color_FFFFFF,t_70" style="width: image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,tepx;height: t_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzQzNDQ1MDY3,size_16,color_FFFFFF,t_70px;"  alt="在这里插入图片描述"><br><strong>此时进入登录页面，再访问index.html后会自动跳转到login.html。</strong></p>

        <h1 id="用户实现自动登录"   >
          <a href="#用户实现自动登录" class="heading-link"><i class="fas fa-link"></i></a><a href="#用户实现自动登录" class="headerlink" title="用户实现自动登录"></a>用户实现自动登录</h1>
      
        <h2 id="使用cookie技术"   >
          <a href="#使用cookie技术" class="heading-link"><i class="fas fa-link"></i></a><a href="#使用cookie技术" class="headerlink" title="使用cookie技术"></a>使用cookie技术</h2>
      <ul>
<li>缺点：是客户端技术，如果有<strong>敏感数据，不建议使用</strong>这个技术。</li>
</ul>

        <h2 id="使用Spring-security安全框架机制实现"   >
          <a href="#使用Spring-security安全框架机制实现" class="heading-link"><i class="fas fa-link"></i></a><a href="#使用Spring-security安全框架机制实现" class="headerlink" title="使用Spring security安全框架机制实现"></a>使用Spring security安全框架机制实现</h2>
      <ul>
<li>实现原理图如下：</li>
</ul>
<p><img   src="https://img-blog.csdnimg.cn/20210523141512530.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzQzNDQ1MDY3,size_16,color_FFFFFF,t_70" style="width: image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,tepx;height: t_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzQzNDQ1MDY3,size_16,color_FFFFFF,t_70px;"  alt="在这里插入图片描述"></p>
<ul>
<li>详细步骤如下：<br><img   src="https://img-blog.csdnimg.cn/20210523142006720.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzQzNDQ1MDY3,size_16,color_FFFFFF,t_70" style="width: image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,tepx;height: t_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzQzNDQ1MDY3,size_16,color_FFFFFF,t_70px;"  alt="在这里插入图片描述">
        <h3 id="1-数据库创建表（可选择自动帮我们创建）"   >
          <a href="#1-数据库创建表（可选择自动帮我们创建）" class="heading-link"><i class="fas fa-link"></i></a><a href="#1-数据库创建表（可选择自动帮我们创建）" class="headerlink" title="1. 数据库创建表（可选择自动帮我们创建）"></a>1. 数据库创建表（可选择自动帮我们创建）</h3>
      
        <h3 id="2-配置类注入数据源"   >
          <a href="#2-配置类注入数据源" class="heading-link"><i class="fas fa-link"></i></a><a href="#2-配置类注入数据源" class="headerlink" title="2. 配置类注入数据源"></a>2. 配置类注入数据源</h3>
      配置类SecurityUserServiceConfig.java<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//将数据库源</span></span><br><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> DataSource dataSource;</span><br><span class="line"></span><br><span class="line"><span class="comment">//操作数据库的对象</span></span><br><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> PersistentTokenRepository <span class="title">persistentTokenRepository</span><span class="params">()</span></span>&#123;</span><br><span class="line">    JdbcTokenRepositoryImpl jdbcTokenRepository = <span class="keyword">new</span> JdbcTokenRepositoryImpl();</span><br><span class="line">    jdbcTokenRepository.setDataSource(dataSource);</span><br><span class="line">     <span class="comment">//自动帮我们创建表</span></span><br><span class="line">    jdbcTokenRepository.setCreateTableOnStartup(<span class="keyword">true</span>); </span><br><span class="line">    <span class="keyword">return</span> jdbcTokenRepository;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure></li>
<li><strong>第一次运行时会自动帮我们创建SQL表，之后我们注释到setCreateTableStartup这一行即可。</strong></li>
</ul>
<p><img   src="https://img-blog.csdnimg.cn/2021052614194418.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzQzNDQ1MDY3,size_16,color_FFFFFF,t_70" style="width: image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,tepx;height: t_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzQzNDQ1MDY3,size_16,color_FFFFFF,t_70px;"  alt="在这里插入图片描述"></p>

        <h3 id="3-配置类设置记住我rememberMe相关信息"   >
          <a href="#3-配置类设置记住我rememberMe相关信息" class="heading-link"><i class="fas fa-link"></i></a><a href="#3-配置类设置记住我rememberMe相关信息" class="headerlink" title="3. 配置类设置记住我rememberMe相关信息"></a>3. 配置类设置记住我rememberMe相关信息</h3>
      <p><strong># 将这个PersistentTokenRepository对象配置进来</strong></p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//设置记住我(自动登录)以及记住的时间长度</span></span><br><span class="line">.and().rememberMe().tokenRepository(persistentTokenRepository())</span><br><span class="line">.tokenValiditySeconds(<span class="number">60</span>).userDetailsService(userDetailsService)</span><br><span class="line">.and().csrf().disable(); </span><br><span class="line"><span class="comment">//关闭CSRF认证方式</span></span><br></pre></td></tr></table></div></figure>


        <h3 id="4-前端页面加入记住我复选框"   >
          <a href="#4-前端页面加入记住我复选框" class="heading-link"><i class="fas fa-link"></i></a><a href="#4-前端页面加入记住我复选框" class="headerlink" title="4. 前端页面加入记住我复选框"></a>4. 前端页面加入记住我复选框</h3>
      <ul>
<li>注意，<strong>这里复选框的name属性值</strong>不能是其他名字，<strong>Spring Security规定只能是</strong><code>remember-me</code>。</li>
</ul>
<figure class="highlight html"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;/user/login&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">    用户名：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span>&gt;</span> <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    密码： <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">    60秒内自动登录：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">name</span>=<span class="string">&quot;remember-me&quot;</span> &gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;登录&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></div></figure>

<p><strong>这样的话，在每次登录时，打开控制台可以看到Cookie相关信息</strong></p>
<p><img   src="https://img-blog.csdnimg.cn/20210526142502349.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzQzNDQ1MDY3,size_16,color_FFFFFF,t_70" style="width: image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,tepx;height: t_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzQzNDQ1MDY3,size_16,color_FFFFFF,t_70px;"  alt="在这里插入图片描述"><br><img   src="https://img-blog.csdnimg.cn/20210526142539439.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzQzNDQ1MDY3,size_16,color_FFFFFF,t_70" style="width: image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,tepx;height: t_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzQzNDQ1MDY3,size_16,color_FFFFFF,t_70px;"  alt="在这里插入图片描述"><br>图中可以看到，有一个 <code>remember-me</code> Cookie信息。</p>
<p><strong>在60秒内（配置类中设置时长），可以直接免去登录而跳转到其他页面中。</strong></p>
<p><img   src="https://img-blog.csdnimg.cn/20210526142954966.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzQzNDQ1MDY3,size_16,color_FFFFFF,t_70" style="width: image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,tepx;height: t_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzQzNDQ1MDY3,size_16,color_FFFFFF,t_70px;"  alt="在这里插入图片描述"></p>

        <h1 id="CSRF理解"   >
          <a href="#CSRF理解" class="heading-link"><i class="fas fa-link"></i></a><a href="#CSRF理解" class="headerlink" title="CSRF理解"></a>CSRF理解</h1>
      <ul>
<li><strong>CSRF：Cross-site Request Forgery。是一种控制用户在已登录的Web应用程序中执行非本意的操作的攻击方法。简单来说，就是攻击者利用一些技术手段来欺骗用户的浏览器去访问自己曾经认证过的网站并运行一些操作，利用Web中用户认证的漏洞。</strong></li>
</ul>
<p><strong>Spring Security默认打开CSRF防护功能！我们可以手动关闭它的防护功能。</strong></p>
<p>通过以下代码实现：</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.and().csrf().disable(); <span class="comment">//关闭CSRF认证方式</span></span><br></pre></td></tr></table></div></figure>


        <h2 id="Spring-Security-中的CSRF"   >
          <a href="#Spring-Security-中的CSRF" class="heading-link"><i class="fas fa-link"></i></a><a href="#Spring-Security-中的CSRF" class="headerlink" title="Spring Security 中的CSRF"></a>Spring Security 中的CSRF</h2>
      <ol>
<li><p>第一次登录时，由于缺少Token，因此Spring Security会帮我们<strong>生成一定长度的Token</strong>放进<strong>Session或者Cookie</strong>中。</p>
</li>
<li><p>在下次请求时<strong>会带着Token进行请求</strong>，与已有保存的httpToken字符串进行比对！！！<strong>如果比对失败，则不允许。以此来实现防护CSRF攻击！</strong></p>
</li>
</ol>

        <h3 id="CsrfFilter来实现这个过程"   >
          <a href="#CsrfFilter来实现这个过程" class="heading-link"><i class="fas fa-link"></i></a><a href="#CsrfFilter来实现这个过程" class="headerlink" title="CsrfFilter来实现这个过程"></a>CsrfFilter来实现这个过程</h3>
      </div></div></article><article class="postlist-item post"><header class="post-header"><h1 class="post-title"><a class="post-title__link" href="/2021/05/19/Java%E9%80%82%E5%BA%94%E5%89%8D%E7%AB%AFJSON%E5%8F%82%E6%95%B0-%E4%B8%87%E7%89%A9%E7%9A%86%E5%8F%AFMap/">Java适应前端JSON参数_万物皆可Map</a></h1><div class="post-meta"><span class="post-meta-item post-meta-item--createtime"><span class="post-meta-item__icon"><i class="far fa-calendar-plus"></i></span><span class="post-meta-item__info">发表于</span><span class="post-meta-item__value">2021-05-19</span></span><span class="post-meta-item post-meta-item--updatetime"><span class="post-meta-item__icon"><i class="far fa-calendar-check"></i></span><span class="post-meta-item__info">更新于</span><span class="post-meta-item__value">2021-05-19</span></span><span class="post-meta-item post-meta-item--wordcount"><span class="post-meta-item__icon"><i class="far fa-file-word"></i></span><span class="post-meta-item__info">字数统计</span><span class="post-meta-item__value">448</span></span><span class="post-meta-item post-meta-item--readtime"><span class="post-meta-item__icon"><i class="far fa-clock"></i></span><span class="post-meta-item__info">阅读时长</span><span class="post-meta-item__value">3分</span></span></div></header><div class="post-body"><div class="post-excerpt"><p><strong>来源于之前做过的ECharts引入饼图数据：</strong></p>
<p><span class="exturl"><a class="exturl__link"   target="_blank" rel="noopener" href="https://bruce-jj.gitee.io/blog/2021/05/12/VUE%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95%E5%8F%8A%E7%9B%B8%E5%BA%94%E5%BA%94%E7%94%A8-4/#VUE%E4%B8%AD%E6%B7%BB%E5%8A%A0Echarts%E5%8F%AF%E8%A7%86%E5%8C%96%E5%9B%BE%E8%A1%A8" >点我回顾ECharts</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></p>
<p>我们前端图表data中有两个参数：</p>
<ol>
<li><p>name 代表饼图每一部分的名称</p>
</li>
<li><p>value 代表饼图每一部分的数据量（自动根据这个数据量更改比例）</p>
</li>
</ol>
<p><strong>因此我们前端需要复杂处理：name与value</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//同步请求数据</span></span><br><span class="line">$.ajax(&#123;</span><br><span class="line">	<span class="attr">url</span>: <span class="string">&quot;$&#123;request.getContexPath()&#125;/meal/showData&quot;</span>,</span><br><span class="line">	<span class="attr">type</span>: <span class="string">&quot;POST&quot;</span>,</span><br><span class="line">	<span class="attr">dataType</span>: <span class="string">&quot;JSON&quot;</span>,</span><br><span class="line">	<span class="attr">async</span>: <span class="literal">false</span>,</span><br><span class="line">	<span class="comment">// 回调函数</span></span><br><span class="line">	<span class="attr">success</span>: <span class="function"><span class="keyword">function</span> (<span class="params">res</span>)</span>&#123;</span><br><span class="line">		data = res <span class="comment">//这里具体看链接中 引入的饼图ECharts</span></span><br><span class="line">	&#125;,</span><br><span class="line">	<span class="attr">error</span>: <span class="function"><span class="keyword">function</span> (<span class="params">error</span>)</span>&#123;</span><br><span class="line">		<span class="built_in">console</span>.log(error)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure>

<p><strong>data中是这样的:</strong></p>
<figure class="highlight js"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">data:[ &#123; <span class="string">&quot;name&quot;</span>: <span class="string">&quot;bookName&quot;</span>, <span class="attr">value</span>: <span class="string">&quot;20&quot;</span> &#125;]</span><br></pre></td></tr></table></div></figure>

<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">  <span class="meta">@ResponseBody</span>  <span class="meta">@RequestMapping(&quot;/showData&quot;)</span>  <span class="keyword">public</span> List&lt;Map&lt;String,Object&gt;&gt; showData(</span><br><span class="line">	Model model, </span><br><span class="line">	HttpServletRequest request)&#123;</span><br><span class="line">		      <span class="comment">//  查询所有订单信息</span>      List&lt;OrderItem&gt; list = orderItemService.list();</span><br><span class="line"></span><br><span class="line"><span class="comment">//map: productId(Integer类型) 次数(Integer类型) </span>      Map&lt;Integer,Integer&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line"></span><br><span class="line"><span class="comment">//遍历所有待处理的list</span>      <span class="comment">//利用map的键值唯一性统计各（具体item对象）数量</span>      list.forEach(i -&gt; &#123;</span><br><span class="line">	<span class="comment">//如果存在对应的pid 作为键 那么就累加sum</span></span><br><span class="line">	<span class="comment">//否则（第一次检索） 赋值为默认1</span>          map.merge(i.getPid(), <span class="number">1</span>, Integer::sum);      &#125;);      <span class="comment">//查询商品名字返回结果集</span></span><br><span class="line"><span class="comment">//值用Object更加的灵活</span>      List&lt;Map&lt;String,Object&gt;&gt; res = <span class="keyword">new</span> ArrayList&lt;&gt;();	      <span class="comment">//map映射转换为 集合set</span>      Set&lt;Map.Entry&lt;Integer, Integer&gt;&gt; entries = map.entrySet();</span><br><span class="line">      <span class="comment">//遍历这个集合</span>      entries.forEach(entry -&gt; &#123;          Map&lt;String,Object&gt; map1 = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">	          <span class="comment">//获取到集合中的每一个key值</span>          Integer key = entry.getKey();</span><br><span class="line">	          <span class="comment">//根据这个key值（也就是pid) 去找对应的product对象</span>          Product product = productService.get(key);</span><br><span class="line">	          <span class="comment">//将需要两个属性 put进去</span>          <span class="comment">//我们需要前端data的name:val value:value</span>          map1.put(<span class="string">&quot;name&quot;</span>, product.getName());          map1.put(<span class="string">&quot;value&quot;</span>, entry.getValue());          res.add(map1);      &#125;);      <span class="keyword">return</span>  res;  &#125;</span><br></pre></td></tr></table></div></figure>

</div></div></article><article class="postlist-item post"><header class="post-header"><h1 class="post-title"><a class="post-title__link" href="/2021/05/18/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E5%AD%A6%E4%B9%A0-%E8%A3%85%E9%A5%B0%E5%99%A8%E6%A8%A1%E5%BC%8F/">设计模式学习_装饰器模式</a></h1><div class="post-meta"><span class="post-meta-item post-meta-item--createtime"><span class="post-meta-item__icon"><i class="far fa-calendar-plus"></i></span><span class="post-meta-item__info">发表于</span><span class="post-meta-item__value">2021-05-18</span></span><span class="post-meta-item post-meta-item--updatetime"><span class="post-meta-item__icon"><i class="far fa-calendar-check"></i></span><span class="post-meta-item__info">更新于</span><span class="post-meta-item__value">2021-06-10</span></span><span class="post-meta-item post-meta-item--wordcount"><span class="post-meta-item__icon"><i class="far fa-file-word"></i></span><span class="post-meta-item__info">字数统计</span><span class="post-meta-item__value">1k</span></span><span class="post-meta-item post-meta-item--readtime"><span class="post-meta-item__icon"><i class="far fa-clock"></i></span><span class="post-meta-item__info">阅读时长</span><span class="post-meta-item__value">6分</span></span></div></header><div class="post-body"><div class="post-excerpt">
        <h1 id="装饰器模式-Decorator-Pattern"   >
          <a href="#装饰器模式-Decorator-Pattern" class="heading-link"><i class="fas fa-link"></i></a><a href="#装饰器模式-Decorator-Pattern" class="headerlink" title="装饰器模式  Decorator Pattern"></a>装饰器模式  Decorator Pattern</h1>
      <iframe width="560" height="315" src="https://www.youtube.com/embed/GCraGHx6gso" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

<ul>
<li>试想有一个<strong>平安夜苹果</strong>，我们用一个精美的盒子将其装入，同时我们可以按照自己的需要，在最外层继续装精美的盒子（例子不太恰当）。</li>
</ul>
<p><strong>而这就是装饰器模式，本身的工作原理。</strong></p>

        <h2 id="定义"   >
          <a href="#定义" class="heading-link"><i class="fas fa-link"></i></a><a href="#定义" class="headerlink" title="定义"></a>定义</h2>
      <p><strong>1. 装饰器模式，允许我们像现有的对象添加新的功能同时不改变其设计结构。</strong>    </p>
<p><strong>2. 是作为现有类的一个包装，即本质上，还是这个类</strong></p>
<p><strong>3. 动态扩展或者撤销类的功能</strong></p>
<p>同时，装饰器模式可以解决，一般继承Inheritance的缺陷。</p>
<p>我们知道，<strong>当一个类继承另一个类是，它必须具备这个类的所有功能（包括属性与方法）。</strong></p>
<p>这样是有缺陷的，比如：</p>
<p>我们有一个<strong>叫做Beverage 饮料的类 是一个抽象类（代表我们不能像接口一样 去实例化）</strong></p>
<p>其中，Beverage有价格属性以及得到价格的方法</p>
<p>现在Beverage有两个子类：<strong>1. 咖啡 2. 茶</strong></p>
<p><strong>现在我们按照一般的思路来添加功能，就是直接在Beverage类中添加（比如咖啡是否加牛奶）</strong></p>
<p>但是，试想一下，如果有牛奶这个属性，对于茶来说，就可能显得没必要了（抱歉如果你喜欢这么搭配，无意冒犯）</p>
<ul>
<li><strong>也就是说，部分子类有时，没必要拥有父类的所有信息。</strong></li>
</ul>
<p>所以，我们的装饰器模式就是来解决这样的问题：<strong>如何在不更改已有代码的同时，更高效地添加对象的功能。</strong></p>

        <h2 id="UML图示"   >
          <a href="#UML图示" class="heading-link"><i class="fas fa-link"></i></a><a href="#UML图示" class="headerlink" title="UML图示"></a>UML图示</h2>
      <p><img   src="https://img-blog.csdnimg.cn/20210518105159541.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzQzNDQ1MDY3,size_16,color_FFFFFF,t_70" style="width: image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,tepx;height: t_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzQzNDQ1MDY3,size_16,color_FFFFFF,t_70px;"  alt="在这里插入图片描述"></p>
<p>从这个图中，我们需要看到最重要的概念：</p>
<ol>
<li>对于装饰器来说，它<strong>即具有饮料成员变量，同时自己又是一个饮料</strong></li>
</ol>
<p><strong>很好解释：对于奶茶店里的珍珠，首先它要知道自己加到哪杯饮料上去，其次加到那杯饮料过后，它们共同组成了一杯新的饮料。</strong></p>
<p>这样，一层一层的包裹，可以动态地延展系统中对象的功能。</p>

        <h2 id="代码实现"   >
          <a href="#代码实现" class="heading-link"><i class="fas fa-link"></i></a><a href="#代码实现" class="headerlink" title="代码实现"></a>代码实现</h2>
      <ol>
<li><p>这里我们有Milk与Coffee两种饮料，分别卖5元与10元</p>
</li>
<li><p>这里我们有可选选项Sugar，加糖多加1元</p>
</li>
</ol>
<p>首先我们要有抽象类Beverage.java</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.company.entity;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Beverage</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">int</span> <span class="title">getPrice</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></div></figure>

<p>然后我们有两个继承Beverage的Milk.java与Coffee.java</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.company.entity;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Milk</span> <span class="keyword">extends</span> <span class="title">Beverage</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//假设菜单上规定 牛奶一杯5元</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getPrice</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">5</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></div></figure>

<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.company.entity;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Coffee</span> <span class="keyword">extends</span> <span class="title">Beverage</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//假设菜单上规定 咖啡一杯10元（注意，咖啡与牛奶都是基础选项）</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getPrice</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">10</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p>接下来我们要有，一个抽象类AddOnDecorator.java</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.company.decorator;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.company.entity.Beverage;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">AddOnDecorator</span> <span class="keyword">extends</span> <span class="title">Beverage</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">int</span> <span class="title">getPrice</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></div></figure>

<p>最后我们要有自己的可选选项SugarDecorator.java去继承这个抽象类</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.company.decorator;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.company.entity.Beverage;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SugarDecorator</span> <span class="keyword">extends</span> <span class="title">AddOnDecorator</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//被包裹的内层 不管之前加了什么</span></span><br><span class="line">    <span class="comment">// （可以是咖啡来加糖 也可以是牛奶来加糖）</span></span><br><span class="line">    Beverage beverage;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">SugarDecorator</span><span class="params">(Beverage beverage)</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.beverage = beverage;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//这里糖是可选选项</span></span><br><span class="line">    <span class="comment">// 当你给已有的饮料加糖时 加上糖后</span></span><br><span class="line">    <span class="comment">// 仍然是饮料 还可以加其他的东西</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getPrice</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.beverage.getPrice() + <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p><strong>这里的关键代码是：</strong></p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Beverage beverage;</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="keyword">this</span>.beverage.getPrice() + <span class="number">1</span>;</span><br><span class="line"></span><br></pre></td></tr></table></div></figure>

<p>就相当于<strong>给里层的饮料，加了一层价格1元</strong>，<strong>但是里层的饮料还加了什么我们不在乎。</strong></p>
<p>因为，<strong>不管加了什么可选选项，它同时就是一杯饮料。</strong></p>
<p>最后，我们用Main.java运行即可：</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.company;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.company.decorator.SugarDecorator;</span><br><span class="line"><span class="keyword">import</span> com.company.entity.Beverage;</span><br><span class="line"><span class="keyword">import</span> com.company.entity.Coffee;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        Coffee coffee = <span class="keyword">new</span> Coffee();</span><br><span class="line">        System.out.println(<span class="string">&quot;如果只点一杯咖啡，价格是：&quot;</span> + coffee.getPrice()  + <span class="string">&quot;元&quot;</span> );</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;...&quot;</span>);</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;咖啡太苦了，准备加糖...&quot;</span>);</span><br><span class="line"></span><br><span class="line">        SugarDecorator sugarDecorator = <span class="keyword">new</span> SugarDecorator(coffee);</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;加完糖后，整个饮料的价格是：&quot;</span> + sugarDecorator.getPrice());</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p><img   src="https://img-blog.csdnimg.cn/20210518110234967.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzQzNDQ1MDY3,size_16,color_FFFFFF,t_70" style="width: image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,tepx;height: t_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzQzNDQ1MDY3,size_16,color_FFFFFF,t_70px;"  alt="在这里插入图片描述"></p>
</div></div></article></section><nav class="paginator"><div class="paginator-inner"><span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/6/">6</a><a class="extend next" rel="next" href="/page/2/"><i class="fas fa-angle-right"></i></a></div></nav></div></div><div class="sidebar-wrap" id="sidebar-wrap"><aside class="sidebar" id="sidebar"><section class="sidebar-toc hide"></section><!-- ov = overview--><section class="sidebar-ov"><div class="sidebar-ov-author"><div class="sidebar-ov-author__avatar"><img class="sidebar-ov-author__avatar_img" src="/images/avatar.jpg" alt="avatar"></div><p class="sidebar-ov-author__text">C'est la vie</p></div><div class="sidebar-ov-state"><a class="sidebar-ov-state-item sidebar-ov-state-item--posts" href="/archives/"><div class="sidebar-ov-state-item__count">52</div><div class="sidebar-ov-state-item__name">归档</div></a><a class="sidebar-ov-state-item sidebar-ov-state-item--categories" href="/categories/"><div class="sidebar-ov-state-item__count">20</div><div class="sidebar-ov-state-item__name">分类</div></a><a class="sidebar-ov-state-item sidebar-ov-state-item--tags" href="/tags/"><div class="sidebar-ov-state-item__count">21</div><div class="sidebar-ov-state-item__name">标签</div></a></div><div class="sidebar-ov-cc"><a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.en" target="_blank" rel="noopener" data-popover="知识共享许可协议" data-popover-pos="up"><img src="/images/cc-by-nc-sa.svg"></a></div></section></aside></div><div class="clearfix"></div></div></main><footer class="footer" id="footer"><div class="footer-inner"><div><span>Copyright © 2021</span><span class="footer__icon"><i class="fas fa-heart"></i></span><span>何水浪</span></div><div><span>由 <a href="http://hexo.io/" title="Hexo" target="_blank" rel="noopener">Hexo</a> 强力驱动</span><span> v5.4.0</span><span class="footer__devider">|</span><span>主题 - <a href="https://github.com/liuyib/hexo-theme-stun/" title="Stun" target="_blank" rel="noopener">Stun</a></span><span> v2.6.2</span></div></div></footer><div class="loading-bar" id="loading-bar"><div class="loading-bar__progress"></div></div><div class="back2top" id="back2top"><span class="back2top__icon"><i class="fas fa-rocket"></i></span></div></div><div class="search-mask"></div><div class="search-popup"><span class="search-close"></span><div class="search-input"><input placeholder="搜索文章（支持多关键词，请用空格分隔）"></div><div class="search-results"></div></div><script src="https://cdn.jsdelivr.net/npm/jquery@v3.4.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@1.5.2/velocity.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@1.5.2/velocity.ui.min.js"></script><script>function initSearch() {
  var isXML = true;
  var search_path = 'search.json';

  if (!search_path) {
    search_path = 'search.xml';
  } else if (/json$/i.test(search_path)) {
    isXML = false;
  }

  var path = '/' + search_path;
  $.ajax({
    url: path,
    dataType: isXML ? 'xml' : 'json',
    async: true,
    success: function (res) {
      var datas = isXML ? $('entry', res).map(function () {
        // 将 XML 转为 JSON
        return {
          title: $('title', this).text(),
          content: $('content', this).text(),
          url: $('url', this).text()
        };
      }).get() : res;
      var $input = $('.search-input input');
      var $result = $('.search-results');
      // 搜索对象（标题、内容）的权重，影响显示顺序
      var WEIGHT = { title: 100, content: 1 };
      var searchPost = function () {
        var searchText = $input.val().toLowerCase().trim();
        // 根据空白字符分隔关键字
        var keywords = searchText.split(/[\s]+/);
        // 搜索结果
        var matchPosts = [];

        // 有多个关键字时，将原文字整个保存下来
        if (keywords.length > 1) {
          keywords.push(searchText);
        }
        // 防止未输入字符时搜索
        if (searchText.length > 0) {
          datas.forEach(function (data) {
            var isMatch  = false;
            // 没有标题的文章使用预设的 i18n 变量代替
            var title = (data.title && data.title.trim()) || '[ 文章无标题 ]';
            var titleLower = title && title.toLowerCase();
            // 删除 HTML 标签 和 所有空白字符
            var content = data.content && data.content.replace(/<[^>]+>/g, '');
            var contentLower = content && content.toLowerCase();
            // 删除重复的 /
            var postURL = data.url && decodeURI(data.url).replace(/\/{2,}/g, '/');
            // 标题中匹配到的关键词
            var titleHitSlice = [];
            // 内容中匹配到的关键词
            var contentHitSlice = [];

            keywords.forEach(function (keyword) {
              /**
              * 获取匹配的关键词的索引
              * @param {String} keyword 要匹配的关键字
              * @param {String} text 原文字
              * @param {Boolean} caseSensitive 是否区分大小写
              * @param {Number} weight 匹配对象的权重。权重大的优先显示
              * @return {Array}
              */
              function getIndexByword (word, text, caseSensitive, weight) {
                if (!word || !text) {
                  return [];
                };

                var startIndex = 0; // 每次匹配的开始索引
                var index = -1;     // 匹配到的索引值
                var result = [];    // 匹配结果

                if (!caseSensitive) {
                  word = word.toLowerCase();
                  text = text.toLowerCase();
                }

                while((index = text.indexOf(word, startIndex)) !== -1) {
                  var hasMatch = false;
                  // 索引位置相同的关键词，保留长度较长的
                  titleHitSlice.forEach(function (hit) {
                    if (hit.index === index && hit.word.length < word.length) {
                      hit.word = word;
                      hasMatch = true;
                    }
                  });
                  startIndex = index + word.length;
                  !hasMatch && result.push({ index: index, word: word, weight: weight });
                }
                return result;
              }
              titleHitSlice = titleHitSlice.concat(getIndexByword(keyword, titleLower, false, WEIGHT.title));
              contentHitSlice = contentHitSlice.concat(getIndexByword(keyword, contentLower, false, WEIGHT.content));
            });

            var hitTitle = titleHitSlice.length;
            var hitContent = contentHitSlice.length;

            if (hitTitle > 0 || hitContent > 0) {
              isMatch = true;
            }
            if (isMatch) {
              ;[titleHitSlice, contentHitSlice].forEach(function (hit) {
                // 按照匹配文字的索引的递增顺序排序
                hit.sort(function (left, right) {
                  return left.index - right.index;
                });
              });
              /**
              * 给文本中匹配到的关键词添加标记，从而进行高亮显示
              * @param {String} text 原文本
              * @param {Array} hitSlice 匹配项的索引信息
              * @param {Number} start 开始索引
              * @param {Number} end 结束索引
              * @return {String}
              */
              function highlightKeyword (text, hitSlice, start, end) {
                if (!text || !hitSlice || !hitSlice.length) {
                  return;
                }

                var result = '';
                var startIndex = start;
                var endIndex = end;
                hitSlice.forEach(function (hit) {
                  if (hit.index < startIndex) {
                    return;
                  }

                  var hitWordEnd = hit.index + hit.word.length;
                  result += text.slice(startIndex, hit.index);
                  result += '<b>' + text.slice(hit.index, hitWordEnd) + '</b>';
                  startIndex = hitWordEnd;
                });
                result += text.slice(startIndex, endIndex);
                return result;
              }

              var postData = {};
              // 文章总的搜索权重
              var postWeight = titleHitSlice.length * WEIGHT.title + contentHitSlice.length * WEIGHT.content;
              // 标记匹配关键词后的标题
              var postTitle = highlightKeyword(title, titleHitSlice, 0, title.length) || title;
              // 标记匹配关键词后的内容
              var postContent;
              // 显示内容的长度
              var SHOW_WORD_LENGTH = 200;
              // 命中关键词前的字符显示长度
              var SHOW_WORD_FRONT_LENGTH = 20;
              var SHOW_WORD_END_LENGTH = SHOW_WORD_LENGTH - SHOW_WORD_FRONT_LENGTH;

              // 截取匹配的第一个字符，前后共 200 个字符来显示
              if (contentHitSlice.length > 0) {
                var firstIndex = contentHitSlice[0].index;
                var start = firstIndex > SHOW_WORD_FRONT_LENGTH ? firstIndex - SHOW_WORD_FRONT_LENGTH : 0;
                var end = firstIndex + SHOW_WORD_END_LENGTH;
                postContent = highlightKeyword(content, contentHitSlice, start, end);
              } else { // 未匹配到内容，直接截取前 200 个字符来显示
                postContent = content.slice(0, SHOW_WORD_LENGTH);
              }
              postData.title = postTitle;
              postData.content = postContent;
              postData.url = postURL;
              postData.weight = postWeight;
              matchPosts.push(postData);
            }
          });
        }

        var resultInnerHtml = '';
        if (matchPosts.length) {
          // 按权重递增的顺序排序，使权重大的优先显示
          matchPosts.sort(function (left, right) {
            return right.weight - left.weight;
          });
          resultInnerHtml += '<ul>';
          matchPosts.forEach(function (post) {
            resultInnerHtml += '<li><a class="search-results-title" href="' + post.url + '">';
            resultInnerHtml += post.title;
            resultInnerHtml += '</a><div class="search-results-content">';
            resultInnerHtml += post.content;
            resultInnerHtml += '</div></li>';
          });
          resultInnerHtml += '</ul>';
        } else {
          resultInnerHtml += '<div class="search-results-none"><i class="far fa-meh"></i></div>';
        }
        $result.html(resultInnerHtml);
      };
      $input.on('input', searchPost);
      $input.on('keyup', function (e) {
        if (e.keyCode === Stun.utils.codeToKeyCode('Enter')) {
          searchPost();
        }
      });
    }
  });
}

function closeSearch () {
  $('body').css({ overflow: 'auto' });
  $('.search-popup').css({ display: 'none' });
  $('.search-mask').css({ display: 'none' });
}

window.addEventListener('DOMContentLoaded', function () {
  Stun.utils.pjaxReloadLocalSearch = function () {
    $('.header-nav-search').on('click', function (e) {
      e.stopPropagation();
      $('body').css('overflow', 'hidden');
      $('.search-popup')
        .velocity('stop')
        .velocity('transition.expandIn', {
          duration: 300,
          complete: function () {
            $('.search-popup input').focus();
          }
        });
      $('.search-mask')
        .velocity('stop')
        .velocity('transition.fadeIn', {
          duration: 300
        });

      initSearch();
    });
    $('.search-mask, .search-close').on('click', function () {
      closeSearch();
    });
    $(document).on('keydown', function (e) {
      // Escape <=> 27
      if (e.keyCode === Stun.utils.codeToKeyCode('Escape')) {
        closeSearch();
      }
    });
  };

  Stun.utils.pjaxReloadLocalSearch();
}, false);

function safeOpenUrl(url) {
  var newTab = window.open();
  newTab.opener = null;
  newTab.location = url;
}

function extSearch(engine) {
  var engines = {
    google: 'https://www.google.com/search?q=',
    bing: 'https://cn.bing.com/search?q=',
    baidu: 'https://www.baidu.com/s?ie=UTF-8&wd=',
  };
  var host = window.location.host;
  var query = $('.search-input input').val().toLowerCase().trim();
  var uri = engines[engine] + query + ' site:' + host;

  if (query) {
    safeOpenUrl(uri);
  } else {
    Stun.utils.popAlert('warning', '请输入字符');
  }
}

var assistSearchList = window.CONFIG.assistSearch;

if (Array.isArray(assistSearchList)) {
  assistSearchList.forEach(function (name) {
    document.querySelector('.search-btns-item--' + name).addEventListener('click', function () {
      extSearch(name);
    }, false);
  });
}</script><script src="/js/utils.js?v=2.6.2"></script><script src="/js/stun-boot.js?v=2.6.2"></script><script src="/js/scroll.js?v=2.6.2"></script><script src="/js/header.js?v=2.6.2"></script><script src="/js/sidebar.js?v=2.6.2"></script><script type="application/json" src="/search.json"></script></body></html>